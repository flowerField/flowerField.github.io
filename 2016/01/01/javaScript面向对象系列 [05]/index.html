<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScript面向对象系列 [05] · 花田半亩</title><meta name="description" content="javaScript面向对象系列 [05] - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScript面向对象系列 [05]</h1><div class="post-info">Jan 1, 2016<span class="post-count"></span> ✧ 字数统计:4.2k(字) &nbsp;&nbsp; ♨︎ 阅读时长:17(分钟)</div><div class="post-content"><h3 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h3><p><strong>说明</strong> 在<code>JavaScript</code>中有严格模式和非严格模式两种运行环境<br><strong>关键字</strong> <code>“use strict”;</code></p>
<p><strong>实现严格模式</strong> 只需要在脚本代码中添加上上述关键字即可。 </p>
<p><strong>关键字具体说明</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1) 注意区分大小写，必须全部都是小写的</span><br><span class="line">(2) 注意空格，整个字符串总共10个字符</span><br><span class="line">(3) 单引号和双引号无所谓，但是需要有引号</span><br><span class="line">(4) 必须写在作用域的最顶部，注意其具体的位置</span><br><span class="line">(5) 可以加分号，也可以不加，但是必须是一个字符串</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong> 下面的关键字写法均是错误的</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;USE strict&quot;;</span><br><span class="line">&quot; use strict &quot;;</span><br><span class="line">&quot;(&quot;USE strict&quot;).toLowerCase();&quot;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>➥ 严格模式使用注意</strong></p>
</blockquote>
<blockquote>
<p>〇 修正this的值<br>① 所有的变量必须使用var 关键字声明<br>② 不能使用<code>delete</code>关键字删除全局变量<br>③ 在对象中不允许有同名的属性<br>④ 函数的参数必须唯一(不能出现同名的参数)<br>⑤ <code>arguments</code>对象的行为不同，严格模式下和实参相对独立<br>⑥ 禁用了<code>argument.callee</code>和<code>caller函数</code><br>⑦ 不能在if语句中声明函数<br>⑧ 禁止使用<code>eval</code>和<code>argument</code>作为标识符<br>⑨ 禁用了<code>with</code>语句和八进制字面量</p>
</blockquote>
<p><strong><code>001 所有的变量都必须使用var关键字声明</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">10</span>;             <span class="comment">//错误的演示</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">10</span>);</span><br></pre></td></tr></table></figure>
<p><strong><code>002 不能使用delete关键字删除全局变量</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在非严格模式下,删除失败(静默失败)   失败了不吭声,严格模式下直接报错</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">delete</span> a;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p><strong><code>003 在对象中不允许有同名的属性</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在非严格模式下,会使用后面的属性赋值作为最终值,在严格模式下则直接报错</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;李四&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj);</span><br></pre></td></tr></table></figure>
<p>**<code>004 函数的参数必须唯一(不能出现同名的参数)**</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在非严格模式下,如果函数在定义的时候,使用了多个同名的参数,则在函数内部形参的实际值为最后一个传入的实参值</span></span><br><span class="line"><span class="comment">//在严格模式下,直接报错</span></span><br><span class="line"><span class="comment">//    function func(a,a,a) &#123;</span></span><br><span class="line"><span class="comment">//        console.log(a);</span></span><br><span class="line"><span class="comment">//        console.log(arguments);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">a,b,c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line">func(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p><strong><code>005 arguments对象的行为不同</code></strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（1）严格模式下,在函数内部修改了对象的指向,对arguments的值不会产生影响</span><br><span class="line">（2）在严格模式下,形参的值和arguments的值是相互独立的,在函数内部修改了形参的值对arguments不受影响</span><br><span class="line">（3）在非严格模式下，修改了形参的值，arguments中的数据会跟着改变</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试引用类型的值作为函数的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">funcName</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(obj);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在函数内部修改形参的值</span></span><br><span class="line">    obj = &#123;<span class="attr">age</span>:<span class="number">20</span>&#125;;</span><br><span class="line">    <span class="built_in">console</span>.log(obj);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">funcName(&#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>&#125;);</span><br><span class="line"><span class="comment">//测试基本类型数据作为函数的参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">    str = <span class="string">&quot;hello&quot;</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun(<span class="string">&quot;hi&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><strong><code>006 禁用了argument.callee和caller函数</code></strong></p>
<p><code>argument.callee</code>是对函数自身的引用 <code>argument.calller</code>是对调用函数的引用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = (<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n ==<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">arguments</span>.callee(n-<span class="number">1</span>) + n;</span><br><span class="line">&#125;)(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(num);       <span class="comment">//55</span></span><br></pre></td></tr></table></figure>
<p><strong><code>007 不能在if语句中声明函数</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果在if语句中声明函数，则会产生语法错误</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;________&quot;</span>);</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;呵呵呵呵&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        demo();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>008 禁止使用eval和argument作为标识符</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="built_in">eval</span> = <span class="string">&quot;测试的字符串&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">eval</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">arguments</span> = <span class="string">&quot;参数列表&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">arguments</span>);</span><br></pre></td></tr></table></figure>
<p><strong><code>009 修正this的值</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">在严格模式下,函数<span class="built_in">this</span>的值始终是指定的值,无论指定的是什么值</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">&quot;测试的name&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demoTest</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在非严格模式下,打印出来的this为全局的对象window</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>);  <span class="comment">//在严格模式下打印出来的this为undefined</span></span><br><span class="line">&#125;</span><br><span class="line">demoTest();</span><br></pre></td></tr></table></figure>
<p><strong><code>010 禁用了with语句</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> o = &#123;<span class="attr">name</span>:<span class="string">&quot;暂时干&quot;</span>,<span class="attr">age</span>:<span class="number">20</span>&#125;;</span><br><span class="line">  <span class="function"><span class="title">with</span>(<span class="params">o</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      name = <span class="string">&quot;lisi&quot;</span>;</span><br><span class="line">      age = <span class="number">48</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(o);</span><br></pre></td></tr></table></figure>
<p><strong><code>11 禁用了八进制</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以0开头的数据常常引起混乱</span></span><br><span class="line"><span class="comment">//var num = 023;     //2*8 + 3 ==&gt; 19</span></span><br><span class="line"><span class="comment">//console.log(num); //19</span></span><br></pre></td></tr></table></figure>

<p><strong>严格模式书写格式</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">01 必须使用单引号或者是双引号括住字符串</span><br><span class="line">02 必须使用小写,不能出现大写字符</span><br><span class="line">03 必须是10个字符，不能多和也不能少</span><br><span class="line">04 字符串后面的分号可以省略</span><br><span class="line">05 必须写在当前作用域的最顶上</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&quot;use strict&quot;;   //正确写法</span></span><br><span class="line"><span class="comment">//&quot;use strict&quot;    //正确写法     分号可以省略</span></span><br><span class="line"><span class="comment">//&#x27;use strict&#x27;;   //正确写法     可以使用单引号</span></span><br><span class="line"><span class="comment">//&quot;use  strict&quot;;    //错误写法   必须是10个字符</span></span><br><span class="line"><span class="comment">//&quot;use Strict&quot;;     //错误写法   所有的字符都必须小写</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&quot;use strict&quot;</span>;</span><br><span class="line">a = <span class="number">10</span>;</span><br><span class="line"><span class="comment">//  &quot;use strict&quot;;           //错误写法 </span></span><br><span class="line">b = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>
<p><strong>作用范围</strong><br><span style='color:#195'><strong>① 函数的顶部(只对当前的函数有效)</strong></span><br><span style='color:#195'><strong>② script标签的顶部,只对当前的标签有效,对页面中其他的script无效</span></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//位置01       对func01和func02都有效</span></span><br><span class="line"><span class="comment">//&quot;use strict&quot;;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//位置02   对func01有效,对func02无效</span></span><br><span class="line">    <span class="comment">//&quot;use strict&quot;;</span></span><br><span class="line">    a = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//位置03 对func02有效,但对func01无效</span></span><br><span class="line">   <span class="comment">//&quot;use strict&quot;;</span></span><br><span class="line">    b = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01();</span><br><span class="line">func02();</span><br></pre></td></tr></table></figure>
<h3 id="作用域和闭包"><a href="#作用域和闭包" class="headerlink" title="作用域和闭包"></a>作用域和闭包</h3><p><strong>作用域</strong> <span style='color:red'><strong>变量其作用的范围就是它的作用域</strong>。</span></p>
<p><strong>块级作用域</strong> JavaScript中没有块级作用域</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> num = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(i);</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line"><span class="comment">//**说明** 如果有块级作用域,那么i和num打印的结果应该为undefined</span></span><br></pre></td></tr></table></figure>
<p><strong>词法作用域</strong> 词法作用域指的是在代码写好的那一刻,变量的作用域就已经确定了。<br><strong>动态作用域</strong> 变量的作用域由执行时的环境所决定，主要关注的是<code>当前的函数调用栈</code>。</p>
<p><strong>备注</strong><br><span style='color:#195'><strong>JavaScript语言是词法作用域的</strong></span><br><span style='color:#195'><strong>在JavaScript中唯一能够创建作用域的东西是函数</strong></span></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;这是第一个a&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;这是第二个a&quot;</span>;</span><br><span class="line">    func01()</span><br><span class="line">&#125;</span><br><span class="line">func02();       <span class="comment">//打印结果为:这是第一个a</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="string">&quot;这是第一个a&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);     </span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;这是第二个a&quot;</span>;</span><br><span class="line">    func01()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01();       <span class="comment">//打印结果为:这是第一个a</span></span><br><span class="line">func02();       <span class="comment">//打印结果为:这是第一个a</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">var</span> a = <span class="string">&quot;这是第一个a&quot;</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func02</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="string">&quot;这是第二个a&quot;</span>;</span><br><span class="line">        func01()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);      </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func01();       <span class="comment">//打印结果为:这是第一个a</span></span><br><span class="line">    func02();       <span class="comment">//打印结果为:这是第一个a</span></span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>➥ 词法作用域的规则</strong></p>
</blockquote>
<blockquote>
<p>① 在函数内部允许访问外部的变量<br>② 在<code>JavaScript</code>中只有函数可以创建作用域<br>③ 作用域规则首先应用提升规则分析(代码的预解析阶段)<br>④ 如果当前作用域中有该变量，则不考虑外部作用域的同名变量</p>
</blockquote>
<h4 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h4><p><strong>作用域链的结构</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">01 在js中函数可以创建作用域</span><br><span class="line">02 函数中又可以创建函数(即又可以开辟新的作用域)</span><br><span class="line">03 函数内部的作用域可以访问外部的作用域</span><br><span class="line">04 如果有多个函数嵌套,那么就会构成一个链式的访问结构,也就是作用域链</span><br><span class="line">05 注意:函数内部的作用域可以访问外部的作用域,但是外部的作用域却不能访问内部的作用域</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//f1---&gt;全局作用域</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">//f4--&gt;f1---&gt;全局作用域</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">f5</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//f2--&gt;全局作用域</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">f6</span>(<span class="params"></span>) </span>&#123; &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f3</span>(<span class="params"></span>) </span>&#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>作用域注意点</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">01 在获取值和设置值的时候都是访问变量</span><br><span class="line">02 并非在函数内部写了变量,这个变量就属于当前函数,而是必须使用var 关键字声明的变量才属于当前函数</span><br><span class="line">03 函数在声明的时候,里面的代码并不会执行,只有在函数调用的时候才会执行</span><br><span class="line">04 声明函数时候的函数名,其实也是一个变量名,可以通过这个变量名来进行设置和赋值</span><br><span class="line">05 注意:在变量内部使用var 关键字声明一个变量并不会把同名的全局变量覆盖掉</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="keyword">var</span> a = <span class="number">20</span>;              <span class="comment">//注意:该行代码并不会覆盖掉全局变量中的变量a</span></span><br><span class="line">    <span class="built_in">console</span>.log(a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">f1();               <span class="comment">//20</span></span><br><span class="line"><span class="built_in">console</span>.log(a);     <span class="comment">//10</span></span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong> 在函数中使用var关键字声明变量a并不会覆盖全局作用域中的a。 注意需要同时考虑变量在当前作用域的提升以及访问变量时的搜索原则。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = <span class="string">&quot;demo字符串&quot;</span>;         <span class="comment">//该行代码会把f1函数覆盖掉</span></span><br><span class="line">f1 = <span class="string">&quot;demoTest字符串&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(f1);</span><br><span class="line"><span class="comment">//f1();</span></span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong> 函数的名称也是变量，如果在代码中出现同名的变量，那么函数的实现会被覆盖掉。</p>
<p><strong>作用域中变量搜索原则</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01 在使用变量的时候,首先在自己的作用域中查找</span><br><span class="line">02 如果找到了就直接使用,如果没有找到,那么就到上一级作用域中去查找</span><br><span class="line">03 重复上面的步骤,直到0级作用域,如果还是找不到那么就返回undefined(报错)</span><br></pre></td></tr></table></figure>


<h3 id="变量和函数声明的提升"><a href="#变量和函数声明的提升" class="headerlink" title="变量和函数声明的提升"></a>变量和函数声明的提升</h3><p>JS中的代码执行分为两个步骤: <strong>① 预解析</strong>和<strong>② 执行</strong>。其中<code>JavaScript</code>解析器引擎在预解析阶段会对使用var关键字声明的变量和function声明的代码块进行提升操作，把这些变量提升到当前作用域的顶端</p>
<p>这里简单列出代码提升的几种情况 =&gt; (函数 &amp;&amp; 变量)</p>
<p><strong><code>001 函数提升</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">func();</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;测试的函数&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>02 变量提升</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);         <span class="comment">//打印出来的结果为undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//var a;                //注意:只会对变量的声明进行提升</span></span><br><span class="line"><span class="comment">//console.log(a);</span></span><br><span class="line"><span class="comment">//a = 10</span></span><br></pre></td></tr></table></figure>
<p><strong><code>03 函数同名情况提升</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">func01();                   <span class="comment">//打印last</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;first&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func01();                   <span class="comment">//打印last</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func01</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;last&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟提升后的情况</span></span><br><span class="line"><span class="comment">// function func01() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;first&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// function func01() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;last&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// func01();</span></span><br><span class="line"><span class="comment">// func01();</span></span><br></pre></td></tr></table></figure>
<p><strong>说明</strong> 预处理的时候，同名的函数都会进行提升，但是后面的会覆盖掉前面的.</p>
<p><strong><code>04 变量名和函数同名的情况</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a);                     <span class="comment">//打印function</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我是一个函数&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> a = <span class="number">20</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a);                     <span class="comment">//打印20</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//变量和函数提升后的结果 错误</span></span><br><span class="line"><span class="comment">//    function a() &#123;</span></span><br><span class="line"><span class="comment">//        console.log(&quot;我是一个函数&quot;);</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"><span class="comment">//    var a ;</span></span><br><span class="line"><span class="comment">//    console.log(a);</span></span><br><span class="line"><span class="comment">//    a = 20;</span></span><br><span class="line"><span class="comment">//    console.log(a);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//变量和函数提升后的结果 正确</span></span><br><span class="line"><span class="comment">// function a() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;我是一个函数&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// console.log(a);</span></span><br><span class="line"><span class="comment">// var a = 20;</span></span><br><span class="line"><span class="comment">// console.log(a);</span></span><br></pre></td></tr></table></figure>
<p><strong>总结</strong> 如果出现变量和函数同名的情况,那么只会提升函数到当前作用域顶端而忽略变量的提升操作。</p>
<p><strong>声明提升注意点</strong></p>
<p><strong><code>001变量的提升是分作用域的</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(a); <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟提升</span></span><br><span class="line"><span class="comment">// var a;</span></span><br><span class="line"><span class="comment">// console.log(a); //undefined</span></span><br><span class="line"><span class="comment">// a = 10;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">20</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></span><br><span class="line">func();             <span class="comment">//20</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟提升</span></span><br><span class="line"><span class="comment">// var num;</span></span><br><span class="line"><span class="comment">// function func() &#123;</span></span><br><span class="line"><span class="comment">//     var num;</span></span><br><span class="line"><span class="comment">//     num = 20;</span></span><br><span class="line"><span class="comment">//     console.log(num);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// num = 10;</span></span><br><span class="line"><span class="comment">// console.log(num);   //10</span></span><br><span class="line"><span class="comment">// func();             //20</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></span><br><span class="line">func();             <span class="comment">//undefiend</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟提升</span></span><br><span class="line"><span class="comment">// var num;</span></span><br><span class="line"><span class="comment">// function func() &#123;</span></span><br><span class="line"><span class="comment">//     var num;</span></span><br><span class="line"><span class="comment">//     console.log(num);</span></span><br><span class="line"><span class="comment">//     num = 20;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// num = 10;</span></span><br><span class="line"><span class="comment">// console.log(num);   //10</span></span><br><span class="line"><span class="comment">// func();             //undefiend</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num);</span><br><span class="line">    num = <span class="number">20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(num);   <span class="comment">//10</span></span><br><span class="line">func();             <span class="comment">//10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//模拟变量提升</span></span><br><span class="line"><span class="comment">// var num;</span></span><br><span class="line"><span class="comment">// function func() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(num);</span></span><br><span class="line"><span class="comment">//     num = 20;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// num= 10;</span></span><br><span class="line"><span class="comment">// console.log(num);   //10</span></span><br><span class="line"><span class="comment">// func();             //10</span></span><br><span class="line"><span class="comment">// console.log(num);   //20</span></span><br></pre></td></tr></table></figure>

<p><strong><code>002 函数表达式的提升</code></strong></p>
<p><strong>说明</strong> 在使用函数表达式创建函数时整个函数表达式并不会进行提升，只会对var声明的变量提升。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func();</span><br><span class="line"><span class="keyword">var</span> func = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;会不会被调用&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以上如上代码将报错</span></span><br><span class="line"><span class="comment">//模拟提升的过程</span></span><br><span class="line"><span class="comment">// var func;</span></span><br><span class="line"><span class="comment">// func();                 //找不到这个函数</span></span><br><span class="line"><span class="comment">// func = function () &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;会不会被调用&quot;);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h4><p><strong>闭包</strong> <span style='color:#195'>通过某种方式实现的一个封闭的、包裹的对外不公开的结构 | 空间。</span></p>
<p><strong>原理</strong> 变量的访问原则(即上一级的作用域无法访问下一级的作用域)，其实函数本身也是闭包。</p>
<p><strong>闭包要解决的问题</strong> <strong><code>提供一种间接的方式能够访问到函数内部的数据（变量）</code></strong></p>
<p><strong>实现思路</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">01 我们需要能够在函数外部访问函数内部的变量，正常情况无法访问；</span><br><span class="line">02 在函数内部如果新创建函数，那么安装作用域链的原则，这个新创建的内部函数能够访问到函数中的这些变量。</span><br><span class="line">03 我们如果能够操作函数中新创建的函数，那么就能够操作函数中的变量（如访问和设置等）</span><br><span class="line">04 如果要能够操作函数中新创建的函数，那么需要在函数中把新创建的函数返回。</span><br><span class="line">05 调用函数，接收并得到其返回值（是一个函数）</span><br><span class="line">06 调用返回值（函数），通过函数传参的方式来设置函数中的变量。</span><br><span class="line">07 调用返回值（函数），通过在函数内部再次return的方式来访问函数中的变量。</span><br></pre></td></tr></table></figure>
<p><strong>闭包的基本模式</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">在函数内部创建函数(内部函数),在这个内部函数中,可以操作外部函数中的变量</span><br><span class="line">01 在函数(外部)中创建函数(内部函数),在该函数(内部函数)中操作外部函数中的变量</span><br><span class="line">02 在外部函数中,把内部函数作为返回值返回</span><br><span class="line">03 调用外部函数,并接收其返回值(是一个函数)</span><br><span class="line">04 调用接收到的返回值(内部函数),来间接的操作外部函数中的变量</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">        num = n;</span><br><span class="line">        <span class="built_in">console</span>.log(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> funcName = func();</span><br><span class="line">funcName(<span class="string">&quot;哗啦哗啦&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong><code>001 获取单个数据（考虑赋值）</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (a !== <span class="literal">undefined</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            num = a;</span><br><span class="line">        &#125;</span><br><span class="line">            <span class="keyword">return</span> num;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f1 = func();</span><br><span class="line"><span class="keyword">var</span> x = f1(<span class="number">456</span>);</span><br><span class="line"><span class="keyword">var</span> y = f1();</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line"><span class="built_in">console</span>.log(y);</span><br></pre></td></tr></table></figure>
<p><strong>说明</strong> 上面的代码能够支持通过闭包对函数中的变量num进行访问（取值）或赋值的操作。</p>
<p><strong><code>002 获取多个数据（数组）</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;张学友&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> name;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getAge</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> age;</span><br><span class="line">            &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> foo = func();</span><br><span class="line"><span class="built_in">console</span>.log(foo[<span class="number">0</span>]());      <span class="comment">//张学友</span></span><br><span class="line"><span class="built_in">console</span>.log(foo[<span class="number">1</span>]());      <span class="comment">//40</span></span><br></pre></td></tr></table></figure>
<p><strong>说明</strong> 上面的代码能够满足返回多个变量值的需求，但是要数组操作的方式并不常见，且和使用习惯不符合。</p>
<p><strong><code>003 利用对象返回并设置对个变量值</code></strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;张学友&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">45</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">getName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">getAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> age;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">setName</span>:<span class="function"><span class="keyword">function</span> (<span class="params">nameValue</span>) </span>&#123;</span><br><span class="line">            name = nameValue;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">setAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params">ageValue</span>) </span>&#123;</span><br><span class="line">            age = ageValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> func = foo();</span><br><span class="line"><span class="built_in">console</span>.log(func.getName());        <span class="comment">//张学友</span></span><br><span class="line"><span class="built_in">console</span>.log(func.getAge());         <span class="comment">//45</span></span><br><span class="line"></span><br><span class="line">func.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">func.setAge(<span class="number">30</span>);</span><br><span class="line"><span class="built_in">console</span>.log(func.getName());        <span class="comment">//张三</span></span><br><span class="line"><span class="built_in">console</span>.log(func.getAge());         <span class="comment">//30</span></span><br></pre></td></tr></table></figure>
<p><strong>闭包作用的说明</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(1)创建一个私有的空间保护数据,外界如果需要访问数据必须通过函数提供的指定方法</span><br><span class="line">(2)在这些指定的方法中,我们可以设置一些校验的逻辑,以保证对数据访问和设置的安全性</span><br></pre></td></tr></table></figure>

<h3 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：001 </span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(num); </span><br><span class="line">    &#125;</span><br><span class="line">    foo();</span><br><span class="line">    <span class="built_in">console</span>.log(num); </span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：002 </span></span><br><span class="line">    <span class="keyword">var</span> scope = <span class="string">&quot;global&quot;</span>;</span><br><span class="line">    foo();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(scope);  </span><br><span class="line">        <span class="keyword">var</span> scope = <span class="string">&quot;local&quot;</span>;</span><br><span class="line">        <span class="built_in">console</span>.log(scope);  </span><br><span class="line">    &#125;   </span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：003</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">       <span class="keyword">if</span>(<span class="string">&quot;a&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>)&#123;</span><br><span class="line">           <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="built_in">console</span>.log(a); </span><br><span class="line">   &#125;</span><br><span class="line">   f1();  </span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：004</span></span><br><span class="line">   <span class="keyword">if</span>(<span class="string">&quot;a&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(a);  </span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：005</span></span><br><span class="line">    <span class="keyword">if</span>(!<span class="string">&quot;a&quot;</span> <span class="keyword">in</span> <span class="built_in">window</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> a = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">console</span>.log(a); </span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：006</span></span><br><span class="line">    <span class="keyword">var</span> foo = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!foo)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> foo = <span class="number">10</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(foo); <span class="comment">//10</span></span><br><span class="line">    &#125;</span><br><span class="line">    bar();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：007</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.show = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    Foo.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    Foo.prototype.getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> getName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;4&quot;</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;5&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Foo.getName(); </span><br><span class="line">    getName(); </span><br><span class="line">    Foo().getName(); </span><br><span class="line">    getName(); </span><br><span class="line">    <span class="keyword">new</span> Foo.show() </span><br><span class="line">    <span class="keyword">new</span> Foo.getName() </span><br><span class="line">    <span class="keyword">new</span> Foo().getName(); </span><br><span class="line">    <span class="keyword">new</span> <span class="keyword">new</span> Foo().getName(); </span><br></pre></td></tr></table></figure>

<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2016/01/01/javaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E5%88%97%20%5B04%5D/" class="prev">上一篇</a><a href="/2016/01/01/javaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E5%88%97%20%5B03%5D/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 422.4k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>