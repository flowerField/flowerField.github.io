<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScript面向对象系列 [04] · 花田半亩</title><meta name="description" content="javaScript面向对象系列 [04] - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScript面向对象系列 [04]</h1><div class="post-info">Jan 1, 2016<span class="post-count"></span> ✧ 字数统计:5.1k(字) &nbsp;&nbsp; ♨︎ 阅读时长:22(分钟)</div><div class="post-content"><h3 id="对象和函数"><a href="#对象和函数" class="headerlink" title="对象和函数"></a>对象和函数</h3><h4 id="类型检查对比"><a href="#类型检查对比" class="headerlink" title="类型检查对比"></a>类型检查对比</h4><p>在JavaScript代码中经常需要对变量(数据)进行类型的检查，譬如检查某个变量是否是字符串、某个对象是否是数组等，这里简单总结常用了四种进行类型检查的方式。</p>
<blockquote>
<p>① **<code>typeof</code>**关键字<br>② **<code>constructor</code>**属性<br>③ **<code>instanceof</code>**关键字<br>④ **<code>Object.prototype.toString</code>**方法</p>
</blockquote>
<p><strong><code>typeof</code>关键字</strong></p>
<p><code>typeof</code>是JavaScript中的关键字，使用该关键字可以简单的来判断变量的类型。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> demo;               <span class="comment">//undefined</span></span><br><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Nice!&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> num = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> bool = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">&quot;zs&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">var</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> demo);  <span class="comment">//&quot;undefined&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> str);   <span class="comment">//&quot;string&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> bool);  <span class="comment">//&quot;boolean&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> obj);   <span class="comment">//&quot;object&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> arr);   <span class="comment">//&quot;object&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> fn);    <span class="comment">//&quot;function&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">typeof</span> <span class="literal">null</span>);  <span class="comment">//&quot;object&quot;</span></span><br></pre></td></tr></table></figure>
<p><code>typeof</code>关键字在使用的时候，语法形式为<code>typeof 变量(数据)</code>，返回值为字符串类型的数据。使用时该关键字能够简单的进行数据类型区分，但存在一些局限性(譬如数组类型得到的结果为<code>object</code>)。</p>
<p><strong><code>constructor</code>属性</strong></p>
<p><code>constructor</code>属性主要用来判断对象的类型，更明确的说是用来检查某个对象的构造函数。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Person();</span><br><span class="line"><span class="keyword">var</span> s = <span class="keyword">new</span> Student();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(p.constructor); <span class="comment">//Person</span></span><br><span class="line"><span class="built_in">console</span>.log(s.constructor); <span class="comment">//Student</span></span><br></pre></td></tr></table></figure>
<p><strong>说明</strong> <code>constructor</code>是实例对象对应原型对象上面的属性，构造函数和原型对象相互关联，构造函数通过<code>prototype</code>属性来访问原型对象，原型对象通过<code>constructor</code>属性来找到对应的构造函数。当使用实例对象来访问构造器属性的时候，使用的其实是原型对象的属性。即上面代码中p.constructor 其实是<code>p.__proto__.constructor</code>。</p>
<p>**<code>instanceof</code>**关键字</p>
<p><code>instanceof</code>关键字的用于检查某个构造函数的原型对象是否在当前实例对象的原型链中。大部分(构造函数的原型对象没有被替换覆盖)情况下，可以简单认为<code>instanceof</code>用来检查实例对象和构造函数的实例化关系，返回布尔类型的值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Perosn</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line"><span class="keyword">var</span> o = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> Perosn();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(o <span class="keyword">instanceof</span> <span class="built_in">Object</span>);           <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(p <span class="keyword">instanceof</span> Perosn);           <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(p <span class="keyword">instanceof</span> Student);          <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>)     <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Object</span>)     <span class="comment">//true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Function</span> <span class="keyword">instanceof</span> <span class="built_in">Function</span>);  <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p><strong><code>Object.prototype.toString</code>方法</strong></p>
<p><code>Object.prototype.toString</code>方法是用来进行类型检查的最强有力的武器，该方法作为<code>Object</code>的原型方法实现，返回一个类似<code>[object Object]</code>结构的字符串。方法返回值本身是字符串类型的，主要包含对象类型和构造函数两部分内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr.toString());                        <span class="comment">//“1,2,3”</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(arr));   <span class="comment">//“[object Array]”</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.toString());                        <span class="comment">//“[object Object]”</span></span><br><span class="line"><span class="built_in">console</span>.log((<span class="number">10</span>).toString());                       <span class="comment">//“10”</span></span><br><span class="line"><span class="built_in">console</span>.log((<span class="number">10</span>).toString(<span class="number">2</span>));                      <span class="comment">//&quot;1010&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.prototype.toString.call(<span class="number">10</span>));    <span class="comment">//[object Number]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组类型的判断(兼容性处理)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isArray</span>(<span class="params">array</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(array);</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(array) == <span class="string">&quot;[object Array]&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"><span class="built_in">console</span>.log(isArray(arr));      <span class="comment">//true</span></span><br></pre></td></tr></table></figure>
<h4 id="对象的创建和拷贝"><a href="#对象的创建和拷贝" class="headerlink" title="对象的创建和拷贝"></a>对象的创建和拷贝</h4><p>这里先简单总结下创建对象的几种方式，然后对<span style='color:red'><strong>浅拷贝</strong>和<strong>深拷贝</strong></span>进行说明。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//创建对象的几种方式总结</span><br><span class="line">    [1] 对象字面量方式创建       var o = &#123;&#125;;</span><br><span class="line">    [2] 内置构造函数创建         var o = new Object();</span><br><span class="line">    [3] 简单工厂函数创建        </span><br><span class="line">    [4] 自定义构造函数创建       <span class="keyword">function</span> <span class="function"><span class="title">Person</span></span>()&#123;&#125; var p = new Person();</span><br><span class="line">    [5] Object.create函数创建   var o = Object(&#123;Person.prototype&#125;);</span><br><span class="line">    [6] Object.assgin函数创建(合并)</span><br><span class="line"></span><br><span class="line">//备注和说明</span><br><span class="line">Object.create函数在创建对象的时候，会把参数设置为新对象的原型对象(ES5)。</span><br><span class="line">Object.assgin函数主要用来合并对象(ES6)。</span><br></pre></td></tr></table></figure>
<div class='titleX'>**浅拷贝**</div>
<span style='color:#195'>**浅拷贝**</span>就是在执行对象拷贝操作的时候只拷贝一层，也因此如果目标对象的成员值是引用类型的数据，那么就会存在数据共享的问题，浅拷贝可以简单的通过`循环赋值`来实现。

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">    <span class="attr">friends</span>:[<span class="string">&quot;LiuY&quot;</span>,<span class="string">&quot;Xia&quot;</span>],</span><br><span class="line">    <span class="attr">car</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="string">&quot;A&quot;</span>,</span><br><span class="line">        <span class="attr">typeName</span>:<span class="string">&quot;奥迪&quot;</span>,</span><br><span class="line">        <span class="attr">number</span>:<span class="string">&quot;粤A66666&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj2 = &#123;&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span>(<span class="params">obj1,obj2</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj1)</span><br><span class="line">    &#123;</span><br><span class="line">        obj2[key] = obj1[key];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">copy(obj1,obj2);</span><br><span class="line"><span class="built_in">console</span>.log(obj2);  <span class="comment">//&#123;age: 18, name: &quot;wendingding&quot;, friends: Array(2), car: &#123;…&#125;&#125;</span></span><br><span class="line">obj2.friends.push(<span class="string">&quot;Hui&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//引用类型的成员存在共享问题</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.friends);  <span class="comment">//[&quot;LiuY&quot;, &quot;Xia&quot;, &quot;Hui&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.friends);  <span class="comment">//[&quot;LiuY&quot;, &quot;Xia&quot;, &quot;Hui&quot;]</span></span><br></pre></td></tr></table></figure>
<p class='titleX'>**深拷贝**</p>

<p><span style='color:#195'><strong>深拷贝</strong></span>就是在执行对象拷贝操作的时候完全<code>(彻底)拷贝</code>，当调用方法对两个对象进行深拷贝操作完成之后，维持两份数据的副本(两个对象间没有任何的关系)。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">            <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">            <span class="attr">friends</span>:[<span class="string">&quot;LiuY&quot;</span>,<span class="string">&quot;Xia&quot;</span>],</span><br><span class="line">            <span class="attr">car</span>:&#123;</span><br><span class="line">                <span class="attr">type</span>:<span class="string">&quot;A&quot;</span>,</span><br><span class="line">                <span class="attr">typeName</span>:<span class="string">&quot;奥迪&quot;</span>,</span><br><span class="line">                <span class="attr">number</span>:<span class="string">&quot;粤A66666&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> obj2 = &#123;&#125;;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">deepCopy</span>(<span class="params">target,obj</span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">            obj = obj || &#123;&#125;;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> target)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//检查当前成员是否为对象的实例成员</span></span><br><span class="line">                <span class="keyword">if</span>(target.hasOwnProperty(key))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(<span class="keyword">typeof</span> target[key] == <span class="string">&quot;object&quot;</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        obj[key] = <span class="built_in">Array</span>.isArray(target[key]) ? [] : &#123;&#125;;</span><br><span class="line">                        deepCopy(target[key],obj[key]);</span><br><span class="line">                    &#125;<span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        obj[key] = target[key];</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        deepCopy(obj1,obj2);</span><br><span class="line">        obj2.friends.push(<span class="string">&quot;Xiao&quot;</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(obj1.friends);  <span class="comment">// [&quot;LiuY&quot;, &quot;Xia&quot;]</span></span><br><span class="line">        <span class="built_in">console</span>.log(obj2.friends);  <span class="comment">// [&quot;LiuY&quot;, &quot;Xia&quot;, &quot;Xiao&quot;]</span></span><br><span class="line">        <span class="built_in">console</span>.log(obj1.car == obj2.car);  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<h4 id="作用域安全的构造函数"><a href="#作用域安全的构造函数" class="headerlink" title="作用域安全的构造函数"></a>作用域安全的构造函数</h4><p>构造函数本身是一个函数，在调用的时候有多种调用方式。</p>
<blockquote>
<p>① <code>new 构造函数（）</code>调用<br>② <code>构造函数（）</code>调用(普通函数)</p>
</blockquote>
<p>因为构造函数本质上和普通函数没有任何区别，所以完全可以像普通函数一样的直接来进行调用，而如果作为普通函数来进行调用，那么函数内部的this会指向当前的上下文环境(<code>window</code>)并不安全。这里尝试给出作用域安全的构造函数，并简单介绍其实现的方式。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">this</span> <span class="keyword">instanceof</span> Person)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//设置实例属性和方法</span></span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//02  创建对象</span></span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = Person(<span class="string">&quot;wendingding&quot;</span>);</span><br><span class="line">p1.showName();          <span class="comment">//lisi</span></span><br><span class="line">p2.showName();          <span class="comment">//wendingding</span></span><br></pre></td></tr></table></figure>
<p class='tip'>**备注** **`new`**是从构造函数生成实例对象的命令。ES6为new命令引入了`target`属性。在构造函数中**`new.target`**指向的当前的构造函数，如果构造函数不是通过new调用的，那么该属性值为undefined。我们可以通过该属性来确定构造函数的调用方式。</p>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">new</span>.target === Person) <span class="comment">//if (new.target != undefined)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.showName = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Person(name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p1 = <span class="keyword">new</span> Person(<span class="string">&quot;lisi&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> p2 = Person(<span class="string">&quot;wendingding--&quot;</span>);</span><br><span class="line">p1.showName();          <span class="comment">//lisi</span></span><br><span class="line">p2.showName();          <span class="comment">//wendingding--</span></span><br></pre></td></tr></table></figure>
<h4 id="函数的调用方式和This的丢失"><a href="#函数的调用方式和This的丢失" class="headerlink" title="函数的调用方式和This的丢失"></a>函数的调用方式和This的丢失</h4><p><strong>函数的几种调用方式</strong></p>
<blockquote>
<p>01 <strong>普通函数调用</strong> <code>this指向全局对象window</code><br>02 <strong>构造函数调用</strong> <code>this指向新创建的对象</code><br>03 <strong>对象的方法调用</strong><code>this指向调用的对象本身</code><br>04 <strong>通过call 或者是apply方式调用(函数上下文)</strong> <code>this指向的是当前的上下文对象</code></p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">getName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以对象的方法来进行调用</span></span><br><span class="line">obj.getName();  <span class="comment">//张三</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getName = obj.getName;</span><br><span class="line">getName();  <span class="comment">//window.name 为空值</span></span><br></pre></td></tr></table></figure>
<p><strong>说明</strong> <code>obj.getName()</code>是以对象方法进行调用，函数内部的this指向的当前的对象(obj),而<code>getName()</code>表示以普通函数方式调用，this指向的是<code>window</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//01 获取页面中id值为demo的标签</span></span><br><span class="line"><span class="comment">//  var div = document.getElementById(&#x27;demo&#x27;);</span></span><br><span class="line"><span class="comment">//  var getId = document.getElementById;</span></span><br><span class="line"><span class="comment">//  var div = getId(&#x27;demo&#x27;);        //会报错?</span></span><br><span class="line"><span class="comment">//  console.log(div);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//借用apply来修正this</span></span><br><span class="line"><span class="built_in">document</span>.getElementById = (<span class="function"><span class="keyword">function</span> (<span class="params">func</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> func.apply(<span class="built_in">document</span>,<span class="built_in">arguments</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(<span class="built_in">document</span>.getElementById);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> getId = <span class="built_in">document</span>.getElementById;</span><br><span class="line"><span class="keyword">var</span> div = getId(<span class="string">&#x27;demo&#x27;</span>);        <span class="comment">//会报错?</span></span><br><span class="line"><span class="built_in">console</span>.log(div);</span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">01 因为document.getElementById方法的内部实现中需要使用到this，这个this本来期望指向的是document对象</span><br><span class="line">02 当我们以document.getElementById来调用的时候,内部的this指向document对象</span><br><span class="line">03 但是当我们以getId的方式调用的时候,内部的this指向的是window对象(因为我们以普通的方式进行调用)</span><br></pre></td></tr></table></figure>

<h4 id="函数的特殊之处"><a href="#函数的特殊之处" class="headerlink" title="函数的特殊之处"></a>函数的特殊之处</h4><p>函数的特殊之处在于,它本身是对象,且函数可以提供作用域。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(01) 函数可以在运行时动态的创建,还可以在程序执行过程中创建。</span><br><span class="line">(02) 函数可以赋值给变量,可以被扩展,甚至是删除。</span><br><span class="line">(03) 函数可以作为其他函数的参数和返回值。</span><br><span class="line">(04) 函数可以拥有自己的属性和方法。</span><br></pre></td></tr></table></figure>

<p><strong>函数是第一型对象</strong></p>
<p><code>01 函数可以像普通对象一样作为函数的参数</code><br><code>02 函数可以像普通对象一样赋值给变量（函数表达式） </code><br><code>03 函数可以像普通对象一个作为函数的返回值返回</code><br><code>04 函数是可以通过（）调用并执行的对象。</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//函数作为参数传递</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;,<span class="number">100</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数作为返回值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;demo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> f = func();</span><br><span class="line">f();                <span class="comment">//demo</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数赋值给变量</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">a();    <span class="comment">//直接通过变量的名称调用函数</span></span><br></pre></td></tr></table></figure>
<p><strong>函数的特征</strong> 是可以调用的特殊对象  &amp;&amp; 可以创建作用域<br><strong>函数的创建</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">001 使用字面量的方式来创建函数(或者是函数字面量)</span><br><span class="line">var add = function add(a,b)&#123;return a + b;&#125;; //命名函数表达式</span><br><span class="line">var add = function (a,b)&#123;return a + b;&#125;;    //函数表达式,匿名函数</span><br><span class="line">function add()&#123;&#125;;   //函数声明</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//01 函数声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo01</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line"><span class="comment">//02 函数表达式(匿名函数)</span></span><br><span class="line"><span class="keyword">var</span> demo02 = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//03 命名函数表达式</span></span><br><span class="line"><span class="keyword">var</span> demo03 = <span class="function"><span class="keyword">function</span> <span class="title">demo03Test</span>(<span class="params"></span>) </span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//04 打印name属性</span></span><br><span class="line"><span class="built_in">console</span>.log(demo01.name);   <span class="comment">//demo01</span></span><br><span class="line"><span class="built_in">console</span>.log(demo02.name);   <span class="comment">//demo02 (注意在火狐浏览器中打印出来的name属性为空)</span></span><br><span class="line"><span class="built_in">console</span>.log(demo03.name);   <span class="comment">//demo03Test</span></span><br></pre></td></tr></table></figure>
<p><strong>函数回调</strong><br><strong>回调函数(回调)</strong> 当我们把某个函数作为参数传递给另一个函数的时候,这个函数就称为回调函数</p>
<p>函数回调的基本模式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params">callBack</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理其他的操作</span></span><br><span class="line">    callBack();     <span class="comment">//调用回调函数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;这是一个回调函数&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func(demo); <span class="comment">//注意调用函数的时候,参数是回调函数的引用(不要加括号);</span></span><br></pre></td></tr></table></figure>
<p><strong>函数回调中的this</strong></p>
<p class='tip'>如果回调函数是某个对象的方法，而该对象方法中使用了this指针那么该方法作为回调函数来使用的时候，那么需要注意this的指向。</p>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//01 提供一个对象,该对象中永远showName方法</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;默认的名字&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">30</span>,</span><br><span class="line">    <span class="attr">showName</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.name);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">showAge</span>:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">this</span>.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//02 提供一个函数,该函数接受一个参数(函数引用)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demo</span>(<span class="params">callBack,callBack_obj</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//处理第一个参数传递对象方法字符串的形式</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> callBack == <span class="string">&#x27;string&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        callBack = callBack_obj[callBack];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> callBack == <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        callBack.call(callBack_obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//demo(obj.showName,obj);</span></span><br><span class="line"><span class="comment">//demo(obj.showAge,obj);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//传递字符串和对象来进行调用</span></span><br><span class="line">demo(<span class="string">&quot;showName&quot;</span>,obj);</span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">（01）以上代码传入两个参数，分别为具体的回调函数，和该回调函数所属的对象</span><br><span class="line">（02）该函数的参数接受两种方式的回调传递（一种是直接传递函数引用，一种是传递对象方法的字符串）</span><br><span class="line">（03）在函数内部对传入的回调参数做处理，修正this的问题</span><br></pre></td></tr></table></figure>

<p><strong>函数作为函数的返回值</strong></p>
<p>① 使用闭包实现一个计数器(setup函数的返回值为一个函数)<br>② 通过调用返回值(一个函数),可以操作setup函数中的变量</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> setup = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> next = setup();</span><br><span class="line"><span class="built_in">console</span>.log(next());    <span class="comment">//0</span></span><br><span class="line"><span class="built_in">console</span>.log(next());    <span class="comment">//1</span></span><br><span class="line"><span class="built_in">console</span>.log(next());    <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<p><strong>惰性函数定义</strong></p>
<p><strong>定义</strong> 某个函数直到第一次使用的时候才被正确的定义，并且其具有向后惰性执行更少的工作。<br><strong>场景</strong> 函数有一些初始化的准备工作要做,且只需要执行一次的情况。<br><strong>特点</strong> 能够更新自己(函数)的实现。<br><strong>问题</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01 当重新定义自身的时候,已经添加到原始函数的任何属性都会丢失。 </span><br><span class="line">02 如何函数被赋值给了其他的变量或者是对象方法,那么在使用变量或者是对象方法调用时仍然会执行旧的函数体。</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;foo!&quot;</span>);</span><br><span class="line">    foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;new foo!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数的调用</span></span><br><span class="line"><span class="comment">//foo();  //foo!</span></span><br><span class="line"><span class="comment">//foo();  //new foo!</span></span><br><span class="line"><span class="comment">//主要问题</span></span><br><span class="line"><span class="comment">//① 添加属性</span></span><br><span class="line"><span class="comment">//② 把函数赋值给新的变量</span></span><br><span class="line"><span class="comment">//③ 以对象的方法调用函数</span></span><br></pre></td></tr></table></figure>
<p><strong>备注</strong> 当惰性函数定义在处理以上三种情况的时候，使用新的变量名调用或者是是以对象的方法来调用函数，那么该函数在执行的时候并不会更新自身，而是执行旧的函数体的内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//01 声明函数foo</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;foo!&quot;</span>);</span><br><span class="line">    foo = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;foo! foo!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//02 为foo函数对象添加属性</span></span><br><span class="line">foo.description = <span class="string">&quot;foo函数的描述信息&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//03 把foo函数赋值给其他的变量</span></span><br><span class="line"><span class="keyword">var</span> func = foo;</span><br><span class="line"></span><br><span class="line"><span class="comment">//04 把foo函数赋值给对象中的方法</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    <span class="attr">showFoo</span>:foo</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//05 验证并演示输出</span></span><br><span class="line">func(); <span class="comment">//foo!</span></span><br><span class="line">func(); <span class="comment">//foo!</span></span><br><span class="line"><span class="built_in">console</span>.log(func.description);  <span class="comment">//foo函数的描述信息</span></span><br><span class="line"><span class="comment">//总结:01 如果把函数赋值给其他的变量,那么在以其他变量的方式调用时不会更新自身,还是执行旧的函数体</span></span><br><span class="line"></span><br><span class="line">obj.showFoo();  <span class="comment">//foo!</span></span><br><span class="line">obj.showFoo();  <span class="comment">//foo!</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.showFoo.description);   <span class="comment">//foo函数的描述信息</span></span><br><span class="line"><span class="comment">//总结:02 如果把函数赋值给对象的方法,那么在以对象方法形式调用时不会更新自身,还是会执行旧的函数体。</span></span><br><span class="line"></span><br><span class="line">foo();  <span class="comment">//已经更新过foo函数 foo! foo!</span></span><br><span class="line">foo();  <span class="comment">//已经更新过foo函数 foo! foo!</span></span><br><span class="line"><span class="built_in">console</span>.log(foo.description);   <span class="comment">//undefined</span></span><br></pre></td></tr></table></figure>

<p><strong>即时函数(IIFE)</strong></p>
<p><strong>定义</strong> 在函数声明之后立即执行该函数，全称**<code>Immediately-Invoked Function Expression (IIFE) </code>**。</p>
<p><strong>组成</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">① 使用函数表达式来定义函数(匿名函数) </span><br><span class="line">② 在函数表达式末尾添加一组(),表示立即执行当前函数。 </span><br><span class="line">③ 将整个函数包装在()中，具体可以有两种包含方式。</span><br></pre></td></tr></table></figure>

<p><strong>优点</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">01 不会产生全局变量，在即时函数内部定义的所有变量都是该函数的局部变量，不会造成全局变量污染问题。 </span><br><span class="line">02 具有更好的封装性，部无法访问到该函数内部的数据。</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//第一种写法</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">&quot;即时函数的第一种写法&quot;</span>);</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种写法</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;即时函数的第二种写法&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：其它可用的写法</span></span><br><span class="line"> (<span class="function"><span class="keyword">function</span> (<span class="params">a</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(a);</span><br><span class="line">    &#125;(<span class="number">20</span>));</span><br><span class="line"></span><br><span class="line">    +<span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b);</span><br><span class="line">    &#125;(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">    -<span class="function"><span class="keyword">function</span> (<span class="params">b</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b);</span><br><span class="line">    &#125;(<span class="number">40</span>);</span><br></pre></td></tr></table></figure>
<p><strong>IIFE的传参和返回值</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//01 接受参数</span></span><br><span class="line">   (<span class="function"><span class="keyword">function</span> (<span class="params">str</span>) </span>&#123;</span><br><span class="line">       <span class="built_in">console</span>.log(str);           <span class="comment">//hello</span></span><br><span class="line">   &#125;)(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//02 提供返回值并赋值给新的变量</span></span><br><span class="line">   <span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">   &#125;)();</span><br><span class="line"></span><br><span class="line">   <span class="built_in">console</span>.log(foo);           <span class="comment">//3</span></span><br></pre></td></tr></table></figure>

<h3 id="图书管理综合案例"><a href="#图书管理综合案例" class="headerlink" title="图书管理综合案例"></a>图书管理综合案例</h3><p class='tip'>**说明** 这里我们介绍多种代码的组织方式以解决实际问题并简单对比。</p>

<p>实现方式(一) ：使用面向过程的方式处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bookList = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;什么是批判&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;福柯&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;飞鸟集&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;泰戈尔&quot;</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加操作</span></span><br><span class="line">bookList.push(&#123;<span class="attr">name</span>:<span class="string">&quot;城堡&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;卡夫卡&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">    <span class="keyword">if</span> (obj.name == <span class="string">&quot;飞鸟集&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(obj);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">    <span class="keyword">if</span> (obj.name == <span class="string">&quot;飞鸟集&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        obj.author = <span class="string">&quot;泰戈尔-戈尔泰&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除操作</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">    <span class="keyword">if</span> (obj.name == <span class="string">&quot;飞鸟集&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//删除该对象</span></span><br><span class="line">        bookList.splice(i, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bookList);</span><br></pre></td></tr></table></figure>

<p>实现方式(二)：使用函数来封装图书管理操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bookList = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;什么是批判&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;福柯&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;飞鸟集&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;泰戈尔&quot;</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</span><br><span class="line">    bookList.push(bookObj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addBook(&#123;<span class="attr">name</span>:<span class="string">&quot;城堡&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;卡夫卡&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">        <span class="keyword">if</span> (obj.name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getBook(<span class="string">&quot;什么是批判&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">        <span class="keyword">if</span> (obj.name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            obj.author = authorName;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">updateBookData(<span class="string">&quot;飞鸟集&quot;</span>,<span class="string">&quot;泰戈尔斯坦&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">        <span class="keyword">if</span> (obj.name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//删除该对象</span></span><br><span class="line">            bookList.splice(i, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(bookList);</span><br></pre></td></tr></table></figure>
<p>实现方式(三)：函数封装-复用形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bookList = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;什么是批判&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;福柯&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;飞鸟集&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;泰戈尔&quot;</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">//增加操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addBook</span>(<span class="params">bookObj</span>) </span>&#123;</span><br><span class="line">    bookList.push(bookObj);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addBook(&#123;<span class="attr">name</span>:<span class="string">&quot;城堡&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;卡夫卡&quot;</span>&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//查询操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getBook</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bookList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = bookList[i];</span><br><span class="line">        <span class="keyword">if</span> (obj.name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getBook(<span class="string">&quot;什么是批判&quot;</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//修改操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateBookData</span>(<span class="params">name,authorName</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = getBook(name);</span><br><span class="line">    obj.author = authorName;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">updateBookData(<span class="string">&quot;飞鸟集&quot;</span>,<span class="string">&quot;泰戈尔斯坦&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//删除操作</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeBook</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> obj = getBook(name);</span><br><span class="line">    <span class="keyword">var</span> index = bookList.indexOf(obj);</span><br><span class="line">    bookList.splice(index,<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">addBook(&#123;<span class="attr">name</span>:<span class="string">&quot;东京人&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;川端康成&quot;</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(bookList);</span><br></pre></td></tr></table></figure>
<p>实现方式(三)：面向对象的方式管理图书</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = [</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;什么是批判&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;福柯&quot;</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>:<span class="string">&quot;飞鸟集&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;泰戈尔&quot;</span>&#125;</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">BookManager</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.bookList = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">BookManager.prototype = &#123;</span><br><span class="line">    <span class="attr">constructor</span>:BookManager,</span><br><span class="line">    <span class="attr">init</span>:<span class="function"><span class="keyword">function</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.bookList = arr || [];</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">addBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">bookObj</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.bookList.push(bookObj)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">getBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="built_in">this</span>.bookList.length; i++) &#123;</span><br><span class="line">        <span class="keyword">var</span> obj = <span class="built_in">this</span>.bookList[i];</span><br><span class="line">        <span class="keyword">if</span> (obj.name == name)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;,</span><br><span class="line">    <span class="attr">updateBookData</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name,authorName</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> obj = <span class="built_in">this</span>.getBook(name);</span><br><span class="line">        obj.author = authorName;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">removeBook</span>:<span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> obj = <span class="built_in">this</span>.getBook(name);</span><br><span class="line">        <span class="keyword">var</span> index = <span class="built_in">this</span>.bookList.indexOf(obj);</span><br><span class="line">        <span class="built_in">this</span>.bookList.splice(index,<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//01 创建对象</span></span><br><span class="line"><span class="keyword">var</span> YYManager = <span class="keyword">new</span> BookManager();</span><br><span class="line">YYManager.init(obj);</span><br><span class="line"><span class="built_in">console</span>.log(YYManager.bookList);</span><br><span class="line"></span><br><span class="line"><span class="comment">//02 演示添加操作</span></span><br><span class="line">YYManager.addBook(&#123;<span class="attr">name</span>:<span class="string">&quot;花田半亩&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;田维&quot;</span>&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(YYManager.bookList);</span><br><span class="line"></span><br><span class="line"><span class="comment">//03 演示查询操作</span></span><br><span class="line"><span class="built_in">console</span>.log(YYManager.getBook(<span class="string">&quot;花田半亩&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//04 演示更新操作</span></span><br><span class="line">YYManager.updateBookData(<span class="string">&quot;花田半亩&quot;</span>,<span class="string">&quot;甜田&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(YYManager.getBook(<span class="string">&quot;花田半亩&quot;</span>));;</span><br><span class="line"></span><br><span class="line"><span class="comment">//05 演示删除操作</span></span><br><span class="line">YYManager.removeBook(<span class="string">&quot;什么是批判&quot;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(YYManager.bookList);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//02 创建第二个人的图书管理对象</span></span><br><span class="line"><span class="keyword">var</span> wulitaotaoMManager = <span class="keyword">new</span> BookManager();</span><br><span class="line">wulitaotaoMManager.init([&#123;<span class="attr">name</span>:<span class="string">&quot;装逼速成&quot;</span>,<span class="attr">author</span>:<span class="string">&quot;六扇门&quot;</span>&#125;]);</span><br><span class="line"><span class="built_in">console</span>.log(wulitaotaoMManager.bookList);</span><br></pre></td></tr></table></figure>
<p><strong>案例总结</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">01 提供构造函数，在构造函数内部设置实例化属性</span><br><span class="line">02 把常用的操作提取成对象的实例方法，写在原型对象身上</span><br><span class="line">03 提供init方法，用于初始化数据</span><br><span class="line">04 注意：如果切断了原型对象那么需要修正内部的构造器属性指向</span><br></pre></td></tr></table></figure>

<h3 id="Class"><a href="#Class" class="headerlink" title="Class"></a>Class</h3><p><span style='color:#195'>javaScript语言的传统方法是通过构造函数定义并生成新的对象，这种写法同典型面向对象语言的写法差异很大。ES6引入了**Class(类)**的概念来作为对象的模板，通过<code>class关键字</code>来定义类。</span></p>
<p><strong>类的基本结构</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.name = <span class="string">&quot;zs&quot;</span>;</span><br><span class="line">        <span class="built_in">this</span>.age = <span class="number">18</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">showName</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;姓名：&quot;</span> + <span class="built_in">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">showAge</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;年龄：&quot;</span>+ <span class="built_in">this</span>.age);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;这是一个测试的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> p  = <span class="keyword">new</span> Person();</span><br></pre></td></tr></table></figure>
<p><strong>类的重要事实</strong></p>
<blockquote>
<p>❏ <strong><code>类和模块的内部默认使用严格模式</code></strong><br>❏ <strong><code>区别于ES5，类内定义的所有方法都是不可以被枚举的</code></strong><br>❏ <strong><code>Class可以看做是语法糖，可以看做是对ES5中构造函数进行了一层封装</code></strong><br>❏ <strong><code>事实上，类的所有方法都被定义在类的原型对象(prototype)上，所有的实例共享</code></strong><br>❏ <strong><code>constructor是类的默认方法，通过new创建对象时总默认调用该方法，若没定义则默认添加</code></strong></p>
</blockquote>
<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2016/06/06/iOS%E5%BC%80%E5%8F%91%E7%B3%BB%E5%88%97%20iOS%E5%BC%80%E5%8F%91%E5%8D%9A%E5%AE%A2%E9%93%BE%E6%8E%A5(%E6%96%87%E9%A1%B6%E9%A1%B6)/" class="prev">上一篇</a><a href="/2016/01/01/javaScript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E5%88%97%20%5B05%5D/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 418.8k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>