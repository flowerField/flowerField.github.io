<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 前端工程化系列[01]-Bower包管理工具的使用 · 花田半亩</title><meta name="description" content="前端工程化系列[01]-Bower包管理工具的使用 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">前端工程化系列[01]-Bower包管理工具的使用</h1><div class="post-info">May 19, 2018<span class="post-count"></span> ✧ 字数统计:4.2k(字) &nbsp;&nbsp; ♨︎ 阅读时长:17(分钟)</div><div class="post-content"><blockquote>
<p>本文主要介绍前端开发中常用的包管理工具Bower，具体包括Bower的基本情况、安装、使用和常见命令等内容，最后还介绍了依赖树管理的常见方式以及Bower采用的策略并进行了比较。</p>
</blockquote>
<h3 id="1-1-关于Bower"><a href="#1-1-关于Bower" class="headerlink" title="1.1 关于Bower"></a>1.1 关于Bower</h3><img src='../../../../src/bower.png' height='200px'>

<p>Bower是一款优秀的包管理器，它由Twitter公司开发，支持以命令行的方式来对包进行搜索、下载、更新和卸载。</p>
<p><strong>模块或组件</strong>指独立完整的模块，可以是应用的一部分或者是扩展，依赖可以是jQuery或backbone这样的库，也可以像Bootstrap这样的UI框架或者是UI组件。</p>
<p><strong>包</strong>英文（package）模块或组件的另一种叫法。</p>
<p><strong>依赖</strong>一个模块为了满足独立完整原则所必须的其他模块，依赖提供了这个模块所需要的功能，如果没有这个功能，那么这个组件就无法工作。例如我们认为jQuery-ui这个组件依赖于jQuery。</p>
<p><strong>Bower的优点</strong></p>
<blockquote>
<p>❑  专为前端开发设计，几乎所有的主流前端库都可以使用该工具。<br>❑  约束松散，使用简单。<br>❑  依赖树扁平更适合Web应用开发。</p>
</blockquote>
<p>官网参考：<a target="_blank" rel="noopener" href="https://bower.io/">https://bower.io/</a></p>
<h3 id="1-2-Bower的安装"><a href="#1-2-Bower的安装" class="headerlink" title="1.2 Bower的安装"></a>1.2 Bower的安装</h3><p>在安装bower之前，必须确认你已经安装了<a target="_blank" rel="noopener" href="https://nodejs.org/en/">Node.js</a>和<a target="_blank" rel="noopener" href="https://git-scm.com/">Git</a>。</p>
<p><strong>安装Bower</strong></p>
<p>使用npm来安装Bower，-g表示全局安装</p>
<p><code>$ npm install -g bower</code></p>
<p><strong>查看Bower版本</strong></p>
<p>Bower安装完成后就能在命令行中直接使用bower命令了，可以通过下面的命令行来查看当前的版本。</p>
<p><code>$ bower -v</code> 或者是<code>$ bower -version</code></p>
<p><strong>查看帮助信息</strong></p>
<p>使用help命令来查看帮助信息。</p>
<p><code>$ bower -help</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Usage:</span><br><span class="line"></span><br><span class="line">    bower <span class="tag">&lt;<span class="name">command</span>&gt;</span> [<span class="tag">&lt;<span class="name">args</span>&gt;</span>] [<span class="tag">&lt;<span class="name">options</span>&gt;</span>]</span><br><span class="line">Commands:</span><br><span class="line"></span><br><span class="line">    cache            Manage bower cache(管理缓存信息)</span><br><span class="line">    help             Display help information about Bower（显示关于Bower的帮助信息）</span><br><span class="line">    home             Opens a package homepage into your favorite browser</span><br><span class="line">    info             Info of a particular package(显示特定包的详细信息)</span><br><span class="line">    init             Interactively create a bower.json file（交互式创建bower.json文件）</span><br><span class="line">    install          Install a package locally（安装包到本地）</span><br><span class="line">    link             Symlink a package folder(在本地bower库建立一个项目链接）</span><br><span class="line">    list             List local packages - and possible updates（列出本地包以及可能的更新）</span><br><span class="line">    login            Authenticate with GitHub and store credentials（Github身份认证）</span><br><span class="line">    lookup           Look up a single package URL by name（根据包名查询包的URL）</span><br><span class="line">    prune            Removes local extraneous packages（删除项目没有用到的包）</span><br><span class="line">    register         Register a package（注册一个包）</span><br><span class="line">    search           Search for packages by name（通过名称来搜索包）</span><br><span class="line">    update           Update a local package（更新项目的包）</span><br><span class="line">    uninstall        Remove a local package（移除项目的包）</span><br><span class="line">    unregister       Remove a package from the registry（注销包）</span><br><span class="line">    version          Bump a package version（列出版本信息）</span><br><span class="line">Options:...</span><br></pre></td></tr></table></figure>

<h3 id="1-3-Bower的使用"><a href="#1-3-Bower的使用" class="headerlink" title="1.3 Bower的使用"></a>1.3 Bower的使用</h3><p><strong>初始化操作</strong></p>
<p>在桌面创建新的文件夹，用来演示Bower的使用。先使用命令行进入到文件夹路径，然后使用下面的命令来对Bower进行初始化操作。</p>
<p><code>$ bower init</code></p>
<p>根据提示来交互式的设置基本项，初始化操作完成之后，会在文件夹的根目录中创建一个bower.json文件，里面包含一些基本信息。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;bowerDemo&quot;</span>,</span><br><span class="line">  <span class="string">&quot;authors&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;wendingding&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;Nothing&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;MIT&quot;</span>,</span><br><span class="line">  <span class="string">&quot;homepage&quot;</span>: <span class="string">&quot;wendingding.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;private&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;ignore&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;**/.*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;node_modules&quot;</span>,</span><br><span class="line">    <span class="string">&quot;bower_components&quot;</span>,</span><br><span class="line">    <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="string">&quot;tests&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>安装指定的包</strong></p>
<p>尝试执行下面的命令行，来把jQuery框架安装到当前项目中。</p>
<p><code>$ bower install --save jquery</code></p>
<p>命令行中的save参数会把包记录保存到bower.json文件中，install命令会把jQuery框架下载到bower_components目录中，该目录文件是保存所有组件和依赖的地方。当执行install命令的时候，Bower会从仓库中获取到jQuery组件的信息然后和bower.json文件中的信息进行比较，如果jQuery没有安装，那么就会默认安装最新版本，如果已经安装了，则bower会自动停止并提示。</p>
<p>具体的执行情况如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">bogon:Demo wendingding$ bower install --save jquery</span><br><span class="line">bower invalid-meta  <span class="keyword">for</span>:<span class="regexp">/Users/</span>文顶顶/Desktop/Demo/bower.json</span><br><span class="line">bower invalid-meta  The <span class="string">&quot;name&quot;</span> is recommended to be lowercase, can contain digits, dots</span><br><span class="line">bower cached        https:<span class="comment">//github.com/jquery/jquery-dist.git#3.3.1</span></span><br><span class="line">bower validate      <span class="number">3.3</span><span class="number">.1</span> against https:<span class="comment">//github.com/jquery/jquery-dist.git#*</span></span><br><span class="line">bower install       jquery#<span class="number">3.3</span><span class="number">.1</span></span><br><span class="line"></span><br><span class="line">jquery#<span class="number">3.3</span><span class="number">.1</span> bower_components/jquery</span><br></pre></td></tr></table></figure>
<p>命令执行完毕后，Bower会在根目录下生成bower_components文件夹，并把下载好的包（jQuery框架）放在这个文件夹里面。此时目录结构如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── bower.json</span><br><span class="line">└── bower_components</span><br><span class="line">    └── jquery</span><br><span class="line">        ├── AUTHORS.txt</span><br><span class="line">        ├── LICENSE.txt</span><br><span class="line">        ├── README.md</span><br><span class="line">        ├── bower.json</span><br><span class="line">        ├── dist</span><br><span class="line">        ├── external</span><br><span class="line">        └── src</span><br></pre></td></tr></table></figure>
<p>查看bower.json文件会发现，此时更新了包和对应的版本信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;dependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;jquery&quot;</span>: <span class="string">&quot;^3.3.1&quot;</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong><span style='color:#f55'>Bower在执行安装操作的时候，主要做了如下操作：</span></strong></p>
</blockquote>
<blockquote>
<p>① &nbsp;检查项目目录中的bower.json文件，以确定包是否已经安装了。<br>② &nbsp;如果指定的包没有安装，那么Bower就会检查Bower仓库中是否存在名称对应的包<br>③ &nbsp;如果Bower仓库中存在指定的包，那么就下载最新版本到本地<br>④ &nbsp;把下载好的包的文件添加到项目目录中，并且更新bower.json文件(包名和版本)</p>
</blockquote>
<h3 id="1-4-Bower的常见命令"><a href="#1-4-Bower的常见命令" class="headerlink" title="1.4 Bower的常见命令"></a>1.4 Bower的常见命令</h3><p><strong>安装指定包</strong></p>
<p><code>$ bower install                               # 通过 bower.json 文件安装</code><br><code>$ bower install jquery                      # 通过在github上注册的包名安装</code><br><code>$ bower install desandro/masonry            # GitHub短链接</code><br><code>$ bower install http://example.com/x.js     # URL路径</code><br><code>$ bower install git://github.com/user/package.git   #Github上的 .git</code></p>
<p>想要下载安装的包可以是GitHub上的短链接、.git 、一个URL路径等。</p>
<p><strong>搜索指定的包</strong></p>
<p><code>$ bower search jquery</code></p>
<p>如果我们在使用框架或者是框架插件的时候，记不住或者是不确定包的名字，则可以尝试先通过关键字搜索，bower会列出包含关键字的所有可用包。</p>
<p><strong>安装包的指定版本</strong></p>
<p><code>$ bower install --save jquery#1.8.0</code></p>
<p>Bower通过#号来确定需要下载的版本，如果没有指定版本，则Bower自动帮我们下载最新的。所以，如果需要下载特定版本的包，可以在安装命令中使用#号来声明。</p>
<p>如果要安装指定的版本，也可以先在bower.json文件中对dependencies选项进行配置，然后执行<code>$ bower install</code>或者是<code> $ bower update</code>命令。</p>
<p><strong>查看已安装的包</strong></p>
<p> <code>$ bower list</code><br> <code>$ bower list --paths</code></p>
<p>具体的执行情况如下</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ bower list</span><br><span class="line">bower check-<span class="keyword">new</span>     Checking <span class="keyword">for</span> <span class="keyword">new</span> versions <span class="keyword">of</span> the project dependencies...</span><br><span class="line">demo /Users/文顶顶/Desktop/Test</span><br><span class="line">├── jquery#<span class="number">3.3</span><span class="number">.1</span></span><br><span class="line">└─┬ jquery-ui#<span class="number">1.12</span><span class="number">.1</span></span><br><span class="line">  └── jquery#<span class="number">3.3</span><span class="number">.1</span></span><br><span class="line">wendingding$ bower list --paths</span><br><span class="line">	  <span class="attr">jquery</span>: bower_components/jquery/dist/jquery.js</span><br><span class="line">	  jquery-ui<span class="string">&#x27;: bower_components/jquery-ui/jquery-ui.js</span></span><br></pre></td></tr></table></figure>
<p><code>list命令</code>可以查看项目中当前下载过的包，并提供最新版本号。<br><code>paths命令</code>可以查看当前下载过的所有包在项目中的对应路径，在其它工具中需要声明/配置前端依赖包地址的时候该命令可能会比较有用。</p>
<p><strong>卸载指定的包</strong></p>
<p><code>$ bower uninstall jquery</code></p>
<p>卸载本地项目中已经安装的jQuery框架。</p>
<p><strong>更新指定的包</strong></p>
<p><code>$ bower update jquery</code></p>
<p>更新包的过程和安装包的过程差不多，区别在于更新的时候会使用新文件替换旧文件，上面的命令强制安装最新版本的jQuery框架。</p>
<p><strong>查看指定包的详细信息</strong></p>
<p><code>$ bower info jquery</code></p>
<p>通过info指令可以查看指定包的详情，还指令会列出对应的git仓库地址，以及所有可用的版本。</p>
<h3 id="1-5-Bower安装有依赖的包"><a href="#1-5-Bower安装有依赖的包" class="headerlink" title="1.5 Bower安装有依赖的包"></a>1.5 Bower安装有依赖的包</h3><p>通常当我们使用Bower命令(<code>bower install --save xxx</code>)来安装指定包的时候，Bower会查找包对应的git仓库地址然后下载到本地并在bower.json文件中记录版本等信息。但有的包在使用的时候可能存在依赖关系，比如ember这个包需要依赖于jQuery框架。</p>
<blockquote>
<p><strong>使用Bower安装有依赖包的两种方式</strong><br>❑  先安装该包的依赖项（这里为jQuery），再安装指定的包（这里为ember）<br>❑  直接安装（这里为ember）</p>
</blockquote>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;方式 ① &nbsp; &nbsp;</strong></span></p>
<p>先安装依赖,再安装指定包</p>
<p><code>$ bower install --save jquery</code><br><code>$ bower install --save ember</code><br><code>$ bower list</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Test /Users/文顶顶/Desktop/Test</span><br><span class="line">├─┬ ember#2.18.2 (latest is 3.0.0-beta.2)</span><br><span class="line">│ └── jquery#3.3.1</span><br><span class="line">└── jquery#3.3.1</span><br></pre></td></tr></table></figure>
<p><span style='border:1px solid#000'><strong>&nbsp; &nbsp;方式 ② &nbsp; &nbsp;</strong></span></p>
<p>直接安装指定包,会自动安装依赖(推荐)</p>
<p><code>$ bower install --save ember</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bower invalid-meta  for:/Users/文顶顶i/Desktop/Test/bower.json</span><br><span class="line">bower cached        https://github.com/components/ember.git#2.18.2</span><br><span class="line">bower validate      2.18.2 against https://github.com/components/ember.git#*</span><br><span class="line">bower cached        https://github.com/jquery/jquery-dist.git#3.3.1</span><br><span class="line">bower validate      3.3.1 against https://github.com/jquery/jquery-dist.git#&gt;=1.7.0&lt;4.0.0</span><br><span class="line">bower install       ember#2.18.2</span><br><span class="line">bower install       jquery#3.3.1</span><br><span class="line">ember#2.18.2 bower_components/ember</span><br><span class="line">└── jquery#3.3.1</span><br><span class="line">jquery#3.3.1 bower_components/jquery`</span><br></pre></td></tr></table></figure>
<p>列出项目中已经安装的所有包和依赖关系</p>
<p><code>$ bower list</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line">Test /Users/文顶顶/Desktop/Test</span><br><span class="line">└─┬ ember#2.18.2 (latest is 3.0.0-beta.2)</span><br><span class="line">  └── jquery#3.3.1</span><br></pre></td></tr></table></figure>

<p>该命令行在安装ember包的时候，发现需要依赖于jQuery框架，就会自动下载对应版本的jQuery框架并安装到本地项目中。</p>
<h3 id="1-6-依赖树管理"><a href="#1-6-依赖树管理" class="headerlink" title="1.6 依赖树管理"></a>1.6 依赖树管理</h3><p>组件(包)并非总是相互独立的，有些组件(包)在使用的时候需要依赖于另外一些组件(包)，就像上文提到的ember需要依赖于jQuery，jQuery-ui需要依赖于jQuery一样，我们尝试使用下面的图示来描述这种关系。</p>
<img src='../../../../src/bower_tree1.png'>

<p>上面的图示揭示了包（组件）与包（组件）之间的依赖关系，非常简单容易理解。在实际中，每个组件可能都有多个依赖，而这些依赖自己可能还有别的依赖，或者多个不同组件都依赖于某个指定的组件，因此在处理的时候可能会非常复杂。为了理清楚这复杂的关系，依赖管理工具会把所有的依赖构成一颗<code>Dependency Tree</code>（依赖树）。</p>
<blockquote>
<p><strong>依赖树主要有三种</strong><br>❑   嵌套依赖树<br>❑   扁平依赖树<br>❑   混合依赖树</p>
</blockquote>
<p>注意：在构造依赖树的时候，组件（包）必须要有唯一的标识，该标识由组件的名称和版本号构成，也就是说jQuery1.7.3和jQuery3.3.1是两个不同的组件。</p>
<p><strong>嵌套依赖树</strong></p>
<p><code>基本理念</code>：每个组件各自都有自己的依赖，而不会共用一个依赖。<br><code>主要问题</code>：项目中会产生同一组件的多个副本，且可能有多个版本的组件共存比较混乱。</p>
<img src='../../../../src/bower_tree2.png'>

<p><strong>扁平依赖树</strong></p>
<p><code>基本理念</code>：保证每个组件在项目只有一个版本，没有任何其它的副本。<br><code>主要问题</code>：容易产生冲突，如果两个组件需要同一个依赖的不同版本，就会导致出错，必须要用户自己来解决冲突，决定具体使用哪个依赖并解决潜在的不一致性。</p>
<img src='../../../../src/bower_tree3.png'>
**混合依赖树**

<p><code>基本理念</code>：使用最高效的办法来管理一个组件的不同版本。<br><code>主要特点</code>：混合依赖树是扁平依赖树和嵌套依赖树的折中方案，如果一个组件的依赖已经安装了，而且版本也兼容，那么就不必再次下载安装，只要指向已安装的那个组件即可，如果版本不兼容的话，则下载安装并版本兼容的组件。</p>
<img src='../../../../src/bower_tree4.png'>

<h3 id="1-7-Bower依赖树管理和冲突处理"><a href="#1-7-Bower依赖树管理和冲突处理" class="headerlink" title="1.7 Bower依赖树管理和冲突处理"></a>1.7 Bower依赖树管理和冲突处理</h3><p>Bower作为专为前端开发者设计的依赖管理工具，是完全基于扁平依赖树的。上文介绍了扁平依赖树在处理的时候要求<strong>保证每个组件在项目只有一个版本，没有任何其它的副本</strong>，优缺参半。那既然如此，Bower为什么不使用更高效的混合依赖树？</p>
<blockquote>
<p><strong>Bower采用扁平依赖树管理的原因</strong></p>
</blockquote>
<blockquote>
<p><span style='color:#f25'>（1）代码体积对于前端开发非常重要，而扁平树管理可以实现组件最(少)小化。</span><br><span style='color:#f25'>（2）所有组件默认都在浏览器的全局作用域中运行，不同版本的同名组件会产生冲突。</span></p>
</blockquote>
<p>因为Bower采用了扁平依赖树的方式来处理，所以在使用的时候容易产生冲突，这种依赖管理方式要求开发者注重组件的版本兼容和依赖关系。接下来，我们简单演示Bower使用过程中会出现冲突的情况。</p>
<p><strong>冲突的产生和处理</strong></p>
<p>① 安装jQuery框架的1.2.3版本</p>
<p><code>$ bower install --save jquery#1.2.3</code></p>
<p>执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">bower invalid-meta  for:/Users/文顶顶/Desktop/Test/bower.json</span><br><span class="line">bower invalid-meta  The &quot;name&quot; is recommended to be lowercase, can contain...</span><br><span class="line">bower not-cached    https://github.com/jquery/jquery-dist.git#1.2.3</span><br><span class="line">bower resolve       https://github.com/jquery/jquery-dist.git#1.2.3</span><br><span class="line">bower download      https://github.com/jquery/jquery-dist/archive/1.2.3.tar.gz</span><br><span class="line">bower extract       jquery#1.2.3 archive.tar.gz</span><br><span class="line">bower deprecated    Package jquery is using the deprecated component.json</span><br><span class="line">bower resolved      https://github.com/jquery/jquery-dist.git#1.2.3</span><br><span class="line">bower install       jquery#1.2.3</span><br></pre></td></tr></table></figure>
<p>② 安装ember组件并解决冲突</p>
<p><code>$ bower install --save ember</code></p>
<p>具体的执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">bogon:Test wendingding$ bower install --save ember</span><br><span class="line">bower invalid-meta  for:/Users/文顶顶/Desktop/Test/bower.json</span><br><span class="line">bower invalid-meta  The &quot;name&quot; is recommended to be lowercase, can contain digits, dots, dashes</span><br><span class="line">bower cached        https://github.com/components/ember.git#2.18.2</span><br><span class="line">bower validate      2.18.2 against https://github.com/components/ember.git#*</span><br><span class="line">bower cached        https://github.com/jquery/jquery-dist.git#3.3.1</span><br><span class="line">bower validate      3.3.1 against https://github.com/jquery/jquery-dist.git#&gt;= 1.7.0 &lt; 4.0.0</span><br><span class="line"></span><br><span class="line">Unable to find a suitable version for jquery, please choose one by typing one of the numbers below:</span><br><span class="line">    1) jquery#1.2.3 which resolved to 1.2.3 and is required by Test</span><br><span class="line">    2) jquery#&gt;= 1.7.0 &lt; 4.0.0 which resolved to 3.3.1 and is required by ember#2.18.2</span><br><span class="line"></span><br><span class="line">Prefix the choice with ! to persist it to bower.json</span><br><span class="line"></span><br><span class="line">? Answer 2</span><br><span class="line">bower install       jquery#3.3.1</span><br><span class="line">bower install       ember#2.18.2</span><br><span class="line"></span><br><span class="line">jquery#3.3.1 bower_components/jquery</span><br><span class="line"></span><br><span class="line">ember#2.18.2 bower_components/ember</span><br><span class="line">└── jquery#3.3.1</span><br></pre></td></tr></table></figure>

<p><code>说明</code>：我们先把jQuery的1.2.3版本安装到了项目中，然后又通过Bower来安装ember，而ember组件需要依赖于jQuery框架，这里有个关键信息就是<code>ember要求依赖的jQuery框架版本范围为1.70 ~ 4.0.0 </code>和本地已经安装的jQuery 1.2.3冲突，Bower并不会自己处理这个问题而是抛出一个异常，把选择权交给用户，由用户来选择使用哪种方案。</p>
<p>通过命令行的打印，我们看到Bower为我们提供了两个可选项，第一个选项是保留本地已经安装的1.2.3版本，第二个选项是保存ember所依赖的版本，这里显示了依赖需要的版本范围jQuery#&gt;=1.70&lt;4.0.0和最终会决定(resolved)的版本(3.3.1)。上面的示例中，冲突产生后我们输入2，选择安装jQuery的3.3.1版本。</p>
<p>③ 查看项目已安装的组件信息</p>
<p><code>$ bower list</code></p>
<p>具体的组件和依赖结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Test /Users/文顶顶/Desktop/Test</span><br><span class="line">├─┬ ember#2.18.2 (latest is 3.0.0-beta.2)</span><br><span class="line">│ └── jquery#3.3.1</span><br><span class="line">└── jquery#3.3.1 incompatible with 1.2.3 (1.2.3 available, latest is 3.3.1)</span><br></pre></td></tr></table></figure>
<p>冲突处理完后，项目中原本下载安装好的jQuery1.2.3版本被重新下载的3.3.1版本替代。</p>
<h3 id="1-8-Bower自定义组件目录"><a href="#1-8-Bower自定义组件目录" class="headerlink" title="1.8 Bower自定义组件目录"></a>1.8 Bower自定义组件目录</h3><p>默认情况下，所有的依赖包都被下载保存到bower_components文件路径，如果想要把依赖包下载到自己指定的目录，使用.bowerrc文件配合bower.json就可以实现。</p>
<p>在项目根目录创建.bowerrc文件，使用json格式来设置文件路径。<br><code>&#123;     &quot;directory&quot;: &quot;指定路径&quot; &#125;</code><br>保存好以后，执行bower install命令，就会把bower.json配置好的相关组件全部下载到指定的路径中。</p>
<p>命令行参考</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">bogon:Test wendingding$ touch .bowerrc</span><br><span class="line">bogon:Test wendingding$ vim .bowerrc</span><br><span class="line">bogon:Test wendingding$ cat .bowerrc</span><br><span class="line">&#123;</span><br><span class="line">    &quot;directory&quot;: &quot;app/xxx/&quot;</span><br><span class="line">&#125;</span><br><span class="line">bogon:Test wendingding$ cat bower.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;Test&quot;,</span><br><span class="line">  &quot;authors&quot;: [</span><br><span class="line">    &quot;flowerField &lt;18681537032@163.com&gt;&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;MIT&quot;,</span><br><span class="line">  &quot;homepage&quot;: &quot;&quot;,</span><br><span class="line">  &quot;ignore&quot;: [</span><br><span class="line">    &quot;**/.*&quot;,</span><br><span class="line">    &quot;node_modules&quot;,</span><br><span class="line">    &quot;bower_components&quot;,</span><br><span class="line">    &quot;test&quot;,</span><br><span class="line">    &quot;tests&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;jquery&quot;: &quot;^3.3.1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">bogon:Test wendingding$ bower install</span><br><span class="line">bower invalid-meta  for:/Users/文顶顶/Desktop/Test/bower.json</span><br><span class="line">bower invalid-meta  The &quot;name&quot; is recommended to be lowercase, can contain digits...</span><br><span class="line">bower cached        https://github.com/jquery/jquery-dist.git#3.3.1</span><br><span class="line">bower validate      3.3.1 against https://github.com/jquery/jquery-dist.git#^3.3.1</span><br><span class="line">bower install       jquery#3.3.1</span><br><span class="line"></span><br><span class="line">jquery#3.3.1 app/xxx/jquery</span><br><span class="line">bogon:Test wendingding$ tree -L 3</span><br><span class="line">.</span><br><span class="line">├── app</span><br><span class="line">│   └── xxx</span><br><span class="line">│       └── jquery</span><br><span class="line">└── bower.json</span><br></pre></td></tr></table></figure>

<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/19/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97%5B02%5D%20Grunt%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E4%BD%BF%E7%94%A8/" class="prev">上一篇</a><a href="/2018/05/18/javaScript%E7%B3%BB%E5%88%97%20%5B33%5D-new/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 418.8k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>