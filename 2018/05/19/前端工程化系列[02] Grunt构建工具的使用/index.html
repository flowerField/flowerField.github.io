<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 前端工程化系列[02]-Grunt构建工具的基本使用 · 花田半亩</title><meta name="description" content="前端工程化系列[02]-Grunt构建工具的基本使用 - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">前端工程化系列[02]-Grunt构建工具的基本使用</h1><div class="post-info">May 19, 2018<span class="post-count"></span> ✧ 字数统计:5.1k(字) &nbsp;&nbsp; ♨︎ 阅读时长:21(分钟)</div><div class="post-content"><blockquote>
<p>本文主要介绍前端开发中常用的构建工具Grunt，具体包括Grunt的基本情况、安装、使用和常见插件的安装、配置和使用等内容。</p>
</blockquote>
<h3 id="1-1-Grunt简单介绍"><a href="#1-1-Grunt简单介绍" class="headerlink" title="1.1 Grunt简单介绍"></a>1.1 Grunt简单介绍</h3><img src='../../../../src/grunt.png' height='300px'>

<p><span style='color:#f25'>Grunt是一套前端自动化构建工具。</span>对于需要反复重复的任务（如压缩、编译、单元测试等），自动化构建工具可以减轻并简化我们的工作。我们只需要在 Gruntfile 文件中正确配置好要处理的任务，任务运行器就会自动帮我们完成大部分工作。</p>
<p><strong>Grunt的优点</strong></p>
<blockquote>
<p>❏  Grunt拥有庞大的生态系统，并且一直在增长。<br>❏  Grunt支持我们自己创作插件并发布。</p>
</blockquote>
<p>由于Grunt拥有数量庞大的插件，所以几乎任何的任务都可以利用Grunt来自动完成，你也可以根据自己项目的特点来创作合适的插件发布。</p>
<p><strong><span style='color:#f25'>Grunt的工作方式</span></strong></p>
<p>Grunt为开发者提供了一个工具包，用于创建命令行程序来执行项目构建过程中的重复性任务，比如压缩js代码、编译Sass样式等。Grunt不仅仅能创建简单任务以解决特定工程遇到的特定需求，还能将任务打包为可复用的插件。这些插件可以被发布、分享，使用以及被其他人进行改进。</p>
<p>Grunt的运转依赖于四个核心的组件：分别是<span style='color:#f25'>Gruntfile、Tasks 、Plugins以及任务配置。</span></p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;① Gruntfile &nbsp; &nbsp;</strong></span></p>
<p>Gruntfile指的是在项目根目录下面名为Gruntfile.js的Node模块。该文件使得我们可以加载Grunt插件，创建自定义任务，并根据项目需求对它们进行配置。</p>
<p>Grunt每次运行时的首要任务都是接受该模块发出的指令。</p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;② Tasks &nbsp; &nbsp;</strong></span></p>
<p>Tasks作为Grunt的基本构建模块，它实际上是由Grunt的registerTask（）方法注册的具名函数。</p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;③ Plugins &nbsp; &nbsp;</strong></span></p>
<p>Plugins是一系列能够用于不同项目的可配置任务的集合。</p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;④ 任务配置 &nbsp; &nbsp;</strong></span></p>
<p>Grunt强调配置优先，任务和插件的功能都可以通过配置文件进行定制，以适应不同工程的需求。这种代码和配置相分离的特性，使开发者能够创造出高复用的插件。</p>
<p><strong>相关参考</strong></p>
<p><strong>现在最新版本&nbsp;&nbsp;&nbsp;&nbsp;</strong>   <span style='color:#f25'>v1.0.2</span><br><strong>其它构建工具&nbsp;&nbsp;&nbsp;&nbsp;</strong> <span style='color:#f25'> gulp、webpack、fis3等</span></p>
<p><a target="_blank" rel="noopener" href="http://www.gruntjs.com/">Grunt官网</a><br><a target="_blank" rel="noopener" href="http://www.gruntjs.net/">Grunt官网(中文)</a><br><a target="_blank" rel="noopener" href="http://www.gruntjs.net/plugins">Grunt相关的插件列表</a></p>
<h3 id="1-2-Grunt的安装"><a href="#1-2-Grunt的安装" class="headerlink" title="1.2 Grunt的安装"></a>1.2 Grunt的安装</h3><p>Grunt和相关的插件都通过 npm 安装并管理。</p>
<p>Grunt基于Node.js，安装之前要先安装Node.js。</p>
<blockquote>
<p><strong>Node.js的安装</strong></p>
</blockquote>
<blockquote>
<p>① 打开<a target="_blank" rel="noopener" href="https://nodejs.org/en/">Node.js官网</a>找到Download选项，选择对应的版本下载。<br>② 下载之后，根据对应的提示进行安装即可。<br>③ 安装完成之后，可以通过<code>$ node --version</code>和<code>$ npm --version</code>命令查看是否安装成功。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ node --version</span><br><span class="line">v8.9.3</span><br><span class="line">wendingding:~ wendingding$ npm --version</span><br><span class="line">5.5.1</span><br><span class="line">wendingding:~ wendingding$</span><br></pre></td></tr></table></figure>
<p><strong>安装注意点</strong></p>
<p>❗ ️Grunt依赖于nodejs的v0.8.0及以上版本；<br>❗ ️奇数版本号的 Node.js 被认为是不稳定的开发版；<br>❗️  需确保当前环境中所安装的 npm 已经是最新版本（<code> $ npm update -g npm</code>）</p>
<p><strong><span style='color:#f25'>安装Grunt命令行</span></strong></p>
<p><strong>注意</strong> 在使用Grunt之前，需要先安装Grunt命令行到全局环境中。</p>
<p>安装命令：<code>$ npm install -g grunt-cli</code></p>
<p>安装完之后，可以通过<code>$ grunt</code>命令来验证Grunt命令行是否安装完成并生效，命令行中的<code>-g</code>表示全局安装。</p>
<p>具体的执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ npm install -g grunt-cli</span><br><span class="line">/usr/local/bin/grunt -&gt; /usr/local/lib/node_modules/grunt-cli/bin/grunt</span><br><span class="line">+ grunt-cli@1.2.0</span><br><span class="line">added 16 packages in 9.289s</span><br><span class="line">wendingding:~ wendingding$ grunt</span><br><span class="line">grunt-cli: The grunt command line interface (v1.2.0)</span><br><span class="line"></span><br><span class="line">Fatal error: Unable to find local grunt.</span><br><span class="line"></span><br><span class="line">If you&#x27;re seeing this message, grunt hasn&#x27;t been installed locally to</span><br><span class="line">your project. For more information about installing and configuring grunt,</span><br><span class="line">please see the Getting Started guide:</span><br><span class="line"></span><br><span class="line">http://gruntjs.com/getting-started</span><br></pre></td></tr></table></figure>

<p><strong>Grunt命令行的作用</strong></p>
<p><code>Grunt命令行用于调用与Gruntfile在同一目录中 Grunt</code>。每次运行Grunt 时，都会根据node提供的require()系统查找本地安装的 Grunt（<code>因此我们可以在项目的任意子目录中运行grunt</code>） ，如果找到一份本地安装的 Grunt，命令行就将其加载，并传递Gruntfile中的配置信息，然后执行指定的任务。</p>
<h3 id="1-3-Grunt的安装和使用"><a href="#1-3-Grunt的安装和使用" class="headerlink" title="1.3 Grunt的安装和使用"></a>1.3 Grunt的安装和使用</h3><h4 id="1-3-1-Grunt使用的基本步骤"><a href="#1-3-1-Grunt使用的基本步骤" class="headerlink" title="1.3.1 Grunt使用的基本步骤"></a>1.3.1 Grunt使用的基本步骤</h4><blockquote>
<p><strong><span style='color:#f25'>Grunt使用的基本步骤</span></strong></p>
<p>① &nbsp;生成package.json和Gruntfile.js文件<br>② &nbsp;命令行安装项目中需要用到的插件<br>③ &nbsp;编辑Gruntfile文件定义Task并进行配置<br>④ &nbsp;命令行以grunt task的方式执行任务</p>
</blockquote>
<h4 id="1-3-2-Grunt的安装"><a href="#1-3-2-Grunt的安装" class="headerlink" title="1.3.2 Grunt的安装"></a>1.3.2 Grunt的安装</h4><p>接下来，我们通过一个完整的Grunt案例来介绍Grunt的常规使用方法。首先创建的对应的项目文件目录，这里命名为Grunt_demo文件夹，然后创建<code>package.json文件</code>和<code>Gruntfile.js文件</code>并进行相关配置,安装相应的插件并执行Task。</p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;① 创建package.json文件&nbsp; &nbsp;</strong></span></p>
<p>创建package.json文件有两种方式，一种是直接创建然后以json格式的字段来进行配置，第二种是通过执行npm install来创建，推荐通过命令行的方式来创建。</p>
<p>** ✧ 直接创建package.json文件 ✧ **</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wendingding:~ wendingding$ mkdir Grunt_Demo</span><br><span class="line">wendingding:~ wendingding$ cd Grunt_Demo/</span><br><span class="line">wendingding:Grunt_Demo wendingding$ PWD</span><br><span class="line">/Users/文顶顶/Grunt_Demo</span><br><span class="line">wendingding:Grunt_Demo wendingding$ touch package.json</span><br><span class="line">wendingding:Grunt_Demo wendingding$ open package.json</span><br></pre></td></tr></table></figure>

<p>命令行说明</p>
<p><code>$ mkdir Grunt_Demo</code> 表示创建文件夹<br><code>$ cd Grunt_Demo/</code>    表示进入文件目录<br><code>$ PWD</code>              表示查看当前路径<br><code>$ touch package.json</code> 表示创建package.json文件<br><code>$ open package.json </code> 表示使用记事本打开文件并编辑</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ open package.json</span><br><span class="line">wendingding:Grunt_Demo wendingding$ cat package.json</span><br><span class="line">&#123;</span><br><span class="line">	&quot;name&quot;:&quot;Grunt_Demo&quot;,</span><br><span class="line">	&quot;version&quot;:&quot;1.0.0&quot;,</span><br><span class="line">	&quot;dependencies&quot;:&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>$ cat package.json</code> 表示查看文件内容</p>
<p>创建好package.json文件后，可以根据需要添加内容字段到文件中。该json文件中最基本字段主要有<span style='color:#195'>name、version和dependencies</span>，其中name和version对应的是Grunt项目的名称和版本，而dependencies字段中则列出该项目的依赖。</p>
<p><span style='color:#f25'>package.json文件用于被npm存储项目的元数据，以便将此项目发布为npm模块。我们可以在此文件中列出项目依赖的Grunt和Grunt插件，保存在devDependencies（开发依赖）配置段内。</span></p>
<p>** ✧ 初始化命令创建package.json文件 ✧ **</p>
<p>除手动创建外，我们还能够通过命令行来进行初始化操作，会以交互的方式来生成一个包含基本配置信息的package.json文件。</p>
<p>初始化命令：<code>$ npm init</code></p>
<p>下面列出具体的命令行执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ npm init</span><br><span class="line">This utility will walk you through creating a package.json file.</span><br><span class="line">It only covers the most common items, and tries to guess sensible defaults.</span><br><span class="line"></span><br><span class="line">See `npm help json` for definitive documentation on these fields</span><br><span class="line">and exactly what they do.</span><br><span class="line"></span><br><span class="line">Use `npm install <span class="tag">&lt;<span class="name">pkg</span>&gt;</span>` afterwards to install a package and</span><br><span class="line">save it as a dependency in the package.json file.</span><br><span class="line"></span><br><span class="line">Press ^C at any time to quit.</span><br><span class="line">package name: (grunt_demo)</span><br><span class="line">version: (1.0.0)</span><br><span class="line">description:</span><br><span class="line">entry point: (index.js)</span><br><span class="line">test command:</span><br><span class="line">git repository:</span><br><span class="line">keywords:</span><br><span class="line">author:</span><br><span class="line">license: (ISC)</span><br><span class="line">About to write to /Users/文顶顶/Grunt_Demo/package.json:</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;grunt_demo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Is this ok? (yes) yes</span><br><span class="line">wendingding:Grunt_Demo wendingding$ cat package.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;grunt_demo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在执行<code>npm init</code>命令创建基本package.json文件的时候，可以设置名称、版本、依赖等选项，如果不设置直接回车表示以默认(建议)的方式来进行配置。</p>
<pre class='tip'>
<strong>package.json文件注意点</strong><br>
❐ package.json应当放置于项目的根目录中，并同项目源代码一起管理。<br>
❐ 如果在根目录中运行npm install命令，那么将依据package.json列出的依赖项来自动安装适当版本的依赖。
</pre>

<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;② 创建Gruntfile文件&nbsp; &nbsp;</strong></span></p>
<p>Gruntfile文件是Grunt项目中最核心的文件，可以被命名为 Gruntfile.js 或者是Gruntfile.coffee，该文件同package.json文件一起存放在项目的根目录中，主要<code>用来配置或定义任务（task）并加载Grunt插件</code>。</p>
<p>标准的grunt项目中必须拥有package.json和Gruntfile这两个文件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ touch Gruntfile.js</span><br><span class="line">wendingding:Grunt_Demo wendingding$ tree -L 2</span><br><span class="line">.</span><br><span class="line">├── Gruntfile.js</span><br><span class="line">└── package.json</span><br><span class="line"></span><br><span class="line">0 directories, 2 files</span><br></pre></td></tr></table></figure>

<p><code>$ tree -L 2</code> 表示以树状图的方式列出当前目录下面的二级文件结构，具体使用可以参考<a target="_blank" rel="noopener" href="http://wendingding.com/2018/04/11/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E7%B3%BB%E5%88%97%20Mac%E7%B3%BB%E7%BB%9F%E4%B8%ADTree%E7%9A%84%E4%BD%BF%E7%94%A8/">网络编程系列 Mac系统中Tree的使用</a></p>
<p><span style='border:1px solid #000'><strong>&nbsp; &nbsp;③ 安装Grunt &nbsp; &nbsp;</strong></span></p>
<p>在创建Grunt项目的过程中，我们可以通过<code>$ npm install &lt;module&gt; --save-dev</code>模式的命令来安装Grunt和Grunt插件。该命令在安装<module>的同时，会自动将其添加到package.json文件的devDependencies 配置段中。</p>
<p>接下来我们演示安装Grunt最新版本到项目目录中，并将其添加到devDependencies内。</p>
<p>命令行：<code>$ npm install grunt --save-dev</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ npm install grunt --save-dev</span><br><span class="line">npm notice created a lockfile as package-lock.json. You should commit this file.</span><br><span class="line">npm WARN grunt_demo@1.0.0 No description</span><br><span class="line">npm WARN grunt_demo@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line">+ grunt@1.0.2</span><br><span class="line">added 94 packages in 33.833s</span><br></pre></td></tr></table></figure>

<p>命令行执行完毕之后，会发现package.json的配置段中信息发生了变更，在devDependencies配置项中增加了grunt字段和对应的版本信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ cat package.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;grunt_demo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;grunt&quot;: &quot;^1.0.2&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>项目的根目录中增加了node_modules文件中，该目录列出了必要的依赖文件，下面给出文件结构。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ tree -L 2</span><br><span class="line">.</span><br><span class="line">├── Gruntfile.js</span><br><span class="line">├── node_modules</span><br><span class="line">│   ├── abbrev</span><br><span class="line">│   ├── ansi-regex</span><br><span class="line">│   ├── ansi-styles</span><br><span class="line">│   ├── argparse</span><br><span class="line">│   ├── array-find-index</span><br><span class="line">│   ├── async</span><br><span class="line">│   ├── balanced-match</span><br><span class="line">│   ├── brace-expansion</span><br><span class="line">│   ├── builtin-modules</span><br><span class="line">│   ├── camelcase</span><br><span class="line">│   ├── camelcase-keys</span><br><span class="line">│   ├── chalk</span><br><span class="line">│   ├── coffeescript</span><br><span class="line">│   ├── colors</span><br><span class="line">│   ├── concat-map</span><br><span class="line">│   ├── currently-unhandled</span><br><span class="line">│   ├── dateformat</span><br><span class="line">│   ├── decamelize</span><br><span class="line">│   ├── error-ex</span><br><span class="line">│   ├── escape-string-regexp</span><br><span class="line">│   ├── esprima</span><br><span class="line">│   ├── eventemitter2</span><br><span class="line">│   ├── exit</span><br><span class="line">│   ├── find-up</span><br><span class="line">│   ├── findup-sync</span><br><span class="line">│   ├── fs.realpath</span><br><span class="line">│   ├── get-stdin</span><br><span class="line">│   ├── getobject</span><br><span class="line">│   ├── glob</span><br><span class="line">│   ├── graceful-fs</span><br><span class="line">│   ├── grunt</span><br><span class="line">│   ├── grunt-known-options</span><br><span class="line">│   ├── grunt-legacy-log</span><br><span class="line">│   ├── grunt-legacy-log-utils</span><br><span class="line">│   ├── grunt-legacy-util</span><br><span class="line">│   ├── has-ansi</span><br><span class="line">│   ├── hooker</span><br><span class="line">│   ├── hosted-git-info</span><br><span class="line">│   ├── iconv-lite</span><br><span class="line">│   ├── indent-string</span><br><span class="line">│   ├── inflight</span><br><span class="line">│   ├── inherits</span><br><span class="line">│   ├── is-arrayish</span><br><span class="line">│   ├── is-builtin-module</span><br><span class="line">│   ├── is-finite</span><br><span class="line">│   ├── is-utf8</span><br><span class="line">│   ├── isexe</span><br><span class="line">│   ├── js-yaml</span><br><span class="line">│   ├── load-json-file</span><br><span class="line">│   ├── lodash</span><br><span class="line">│   ├── loud-rejection</span><br><span class="line">│   ├── map-obj</span><br><span class="line">│   ├── meow</span><br><span class="line">│   ├── minimatch</span><br><span class="line">│   ├── minimist</span><br><span class="line">│   ├── nopt</span><br><span class="line">│   ├── normalize-package-data</span><br><span class="line">│   ├── number-is-nan</span><br><span class="line">│   ├── object-assign</span><br><span class="line">│   ├── once</span><br><span class="line">│   ├── parse-json</span><br><span class="line">│   ├── path-exists</span><br><span class="line">│   ├── path-is-absolute</span><br><span class="line">│   ├── path-type</span><br><span class="line">│   ├── pify</span><br><span class="line">│   ├── pinkie</span><br><span class="line">│   ├── pinkie-promise</span><br><span class="line">│   ├── read-pkg</span><br><span class="line">│   ├── read-pkg-up</span><br><span class="line">│   ├── redent</span><br><span class="line">│   ├── repeating</span><br><span class="line">│   ├── resolve</span><br><span class="line">│   ├── rimraf</span><br><span class="line">│   ├── safer-buffer</span><br><span class="line">│   ├── semver</span><br><span class="line">│   ├── signal-exit</span><br><span class="line">│   ├── spdx-correct</span><br><span class="line">│   ├── spdx-exceptions</span><br><span class="line">│   ├── spdx-expression-parse</span><br><span class="line">│   ├── spdx-license-ids</span><br><span class="line">│   ├── sprintf-js</span><br><span class="line">│   ├── strip-ansi</span><br><span class="line">│   ├── strip-bom</span><br><span class="line">│   ├── strip-indent</span><br><span class="line">│   ├── supports-color</span><br><span class="line">│   ├── trim-newlines</span><br><span class="line">│   ├── underscore.string</span><br><span class="line">│   ├── validate-npm-package-license</span><br><span class="line">│   ├── which</span><br><span class="line">│   └── wrappy</span><br><span class="line">├── package-lock.json</span><br><span class="line">└── package.json</span><br><span class="line"></span><br><span class="line">91 directories, 3 files</span><br></pre></td></tr></table></figure>
<p>至此，Grunt项目的基本配置以及Grunt的安装已经完成，在开发中使用Grunt主要是用Grunt相关的一些插件来实现特定的功能。Grunt的生态中提供了非常丰富的插件，我们可以直接在官方搜索查看，接下来给大家介绍几个在前端项目构建中常用到的插件。</p>
<h4 id="1-3-3-Grunt插件的安装和使用"><a href="#1-3-3-Grunt插件的安装和使用" class="headerlink" title="1.3.3 Grunt插件的安装和使用"></a>1.3.3 Grunt插件的安装和使用</h4><p>** ✧ <span style='color:#195'>文件合并插件concat的安装和使用 </span>✧ **</p>
<p>concat插件的地址：<a target="_blank" rel="noopener" href="https://github.com/gruntjs/grunt-contrib-concat">https://github.com/gruntjs/grunt-contrib-concat</a></p>
<p>concat插件安装命令：<code>$ npm install grunt-contrib-concat --save-dev</code></p>
<p><code>--save-dev</code>参数表示插件安装完成后，记录相关信息到package.json文件中的devDependencies配置项。</p>
<p>下面列出具体的执行情况</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ npm install grunt-contrib-concat --save-dev</span><br><span class="line">npm WARN grunt_demo@1.0.0 No description</span><br><span class="line">npm WARN grunt_demo@1.0.0 No repository field.</span><br><span class="line"></span><br><span class="line">+ grunt-contrib-concat@1.0.1</span><br><span class="line">added 2 packages in 3.165s</span><br><span class="line">wendingding:Grunt_Demo wendingding$ cat package.json</span><br><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;grunt_demo&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;description&quot;: &quot;&quot;,</span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;author&quot;: &quot;&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,</span><br><span class="line">  &quot;devDependencies&quot;: &#123;</span><br><span class="line">    &quot;grunt&quot;: &quot;^1.0.2&quot;,</span><br><span class="line">    &quot;grunt-contrib-concat&quot;: &quot;^1.0.1&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>插件安装完成后，在项目的node_modules文件目录会新增加grunt-contrib-concat模块。接下来我们通过编辑Gruntfile文件来定义和配置Task。</p>
<p>在项目的根目录中创建src文件夹，在该文件夹下面创建两个示例的js文件，分别为demo_one.js和demo_two.js</p>
<p>demo_one.js文件的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明demoOne函数并执行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demoOne</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;demoOne.js文件中的内容&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">demoOne();</span><br></pre></td></tr></table></figure>
<p>demo_two.js文件的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//声明demoTwo函数并执行</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">demoTwo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;demoTwo.js文件中的内容&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">demoTwo();</span><br></pre></td></tr></table></figure>
<p><strong><span style='color:#f25'>编辑Gruntfile文件定义和配置Task</span></strong></p>
<p>接下来我们需要编辑Gruntfile文件，在该文件中告诉grunt具体的任务(Task)是什么，以及这些任务(Task)应该如何执行，下面给出示例代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//包装函数,规定所有的代码都需要写在该函数内部</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">grunt</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//项目配置信息</span></span><br><span class="line">    grunt.initConfig(&#123;</span><br><span class="line">        <span class="comment">//表示从package文件中加载json数据,并保存到pkg属性中</span></span><br><span class="line">        <span class="attr">pkg</span>:grunt.file.readJSON(<span class="string">&quot;package.json&quot;</span>),</span><br><span class="line">        <span class="comment">//concat任务的配置信息</span></span><br><span class="line">        <span class="string">&quot;concat&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">dist</span>: &#123;</span><br><span class="line">                <span class="comment">//把src目录下面的demo_one和demo_two文件合并成demo.js文件保存到dist目录</span></span><br><span class="line">                <span class="attr">src</span>: [<span class="string">&#x27;src/demo_one.js&#x27;</span>, <span class="string">&#x27;src/demo_two.js&#x27;</span>],</span><br><span class="line">                <span class="attr">dest</span>: <span class="string">&#x27;dist/demo.js&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//加载包含concat任务的插件</span></span><br><span class="line">    grunt.loadNpmTasks(<span class="string">&quot;grunt-contrib-concat&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//设置默认执行的任务列表</span></span><br><span class="line">    grunt.registerTask(<span class="string">&quot;default&quot;</span>,[<span class="string">&quot;concat&quot;</span>]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong></p>
<p>上面的示例代码主要由三部分组成：<code>配置任务相关代码</code> + <code>加载插件相关代码</code> + <code>注册任务相关代码</code>,所有的代码都需要写在module.exports这个包装函数内部，grunt作为包装函数的参数传递。</p>
<p> 这里代码中的pkg部分并非必要，loadNpmTasks方法用于从node_modules中加载对应的插件，registerTask方法表示把concat这个任务加入到默认的任务队列中(该行代码并非必需)，如果不写该行代码则可以直接以<code>$ grunt concat</code>的方式执行合并任务。当然也可以通过registerTask方法来给Task注册个别名，然后通过<code>$ grunt 别名</code>指令来执行该Task。</p>
<p>当前的目录结构如下(注：省略node_modules目录细节)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ tree -L 1</span><br><span class="line">.</span><br><span class="line">├── Gruntfile.js</span><br><span class="line">├── node_modules</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">└── src</span><br><span class="line">    ├── demo_one.js</span><br><span class="line">    └── demo_two.js</span><br></pre></td></tr></table></figure>
<p>不同插件的使用方式可能也不尽相同，插件的具体用法请参考对应的文档说明。通过编辑Gruntfile文件指定任务的配置项、加载插件并注册任务后，就可以通过命令行来执行Task了。</p>
<p><strong><span style='color:#f25'>执行Task</span></strong></p>
<p>执行Task的命令行：<code>$ grunt</code> 或者是<code>$ grunt default</code> 或者是<code>$ grunt concat</code><br>命令行输出结果</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Demo wendingding$ grunt default</span><br><span class="line">Running &quot;concat:dist&quot; (concat) task</span><br><span class="line"></span><br><span class="line">Done.</span><br></pre></td></tr></table></figure>

<p>Task执行结束后，src目录下面的demo_one.js和demo_two.js两个文件会被合并成demo.js文件并保存到dist目录下，如果指定的目录不存在那么将会直接创建。</p>
<img src='../../../../src/grunt_01.png' height='200px'>

<p>** ✧ <span style='color:#195'>压缩插件uglify和cssmin的安装和使用 </span>✧ **</p>
<p>创建新的文件目录Grunt_Test来演示javaScript的压缩插件uglify以及CSS的压缩插件cssmin的使用，创建好文件目录之后，同样通过<code>$ npm init</code>初始化命令来生成基础的package.json文件。</p>
<p>先安装grunt到本地的项目中，具体命令如下：</p>
<p><code>$ npm install grunt --save-dev</code></p>
<p>然后下载需要用到的对应插件到本地的项目中，具体命令如下 ：</p>
<p><code>$ npm install grunt-contrib-uglify --save-dev</code>   表示安装uglify插件</p>
<p><code>$ npm install grunt-contrib-cssmin --save-dev</code>   表示cssmin插件</p>
<p>上面的命令行执行完毕后，grunt就会把两个压缩插件下载到node_modules文件目录下，可以通过在该目录下查找grunt-contrib-uglify和grunt-contrib-cssmi文件进行验证。</p>
<p><code>--save--dev</code>参数会把下载记录更新到package.json文件中的devDependencies字段。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;devDependencies&quot;: &#123;</span><br><span class="line">&quot;grunt&quot;: &quot;^1.0.2&quot;,</span><br><span class="line">    &quot;grunt-contrib-cssmin&quot;: &quot;^2.2.1&quot;,</span><br><span class="line">    &quot;grunt-contrib-uglify&quot;: &quot;^3.3.0&quot;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>为了演示压缩插件的具体使用，下面我们在项目根目录下创建index.js文件，并新建style文件夹，并在该目录下创建index.css文件，具体的目录结构如下:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── node_modules</span><br><span class="line">│   ├── ...(省略)</span><br><span class="line">│   ├── grunt-contrib-cssmin</span><br><span class="line">│   ├── grunt-contrib-uglify</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">└── src</span><br><span class="line">	├── index.js</span><br><span class="line">	└── style</span><br><span class="line">		└── index.css</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>index.js文件内容为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Created by wendingding on 18/5/19.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">123</span>;</span><br><span class="line"><span class="keyword">var</span> b = <span class="string">&quot;文顶顶&quot;</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">a,b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">c</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;______&quot;</span> + c);</span><br><span class="line">&#125;)(<span class="built_in">window</span>);</span><br></pre></td></tr></table></figure>
<p>index.css文件内容为</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: red;</span><br><span class="line">&#125;</span><br><span class="line">*&#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接下来我们创建并编辑Gruntfile文件，通过特定的代码定义和配置Task。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//包装函数</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params">grunt</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> app = &#123;</span><br><span class="line">        <span class="attr">src</span>:<span class="string">&quot;src/&quot;</span>,</span><br><span class="line">        <span class="attr">dist</span>:<span class="string">&quot;dist/&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//(1) 项目配置信息</span></span><br><span class="line">    <span class="comment">//说明：initConfig方法等价于grunt.config.init()方法;</span></span><br><span class="line">    grunt.initConfig(&#123;</span><br><span class="line">    <span class="comment">//定义js文件压缩Task: 表示把src目录下面的index.js文件压缩到dist目录中的index.min.js</span></span><br><span class="line">        <span class="string">&quot;uglify&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">target</span>:&#123;</span><br><span class="line">                <span class="attr">src</span>:app.src + <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">                <span class="attr">dest</span>:app.dist + <span class="string">&quot;index.min.js&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    <span class="comment">//定义css文件压缩Task: 表示把src/style目录中的index.css文件压缩到dist目录中的index.min.css</span></span><br><span class="line">        <span class="string">&quot;cssmin&quot;</span>:&#123;</span><br><span class="line">            <span class="attr">target</span>:&#123;</span><br><span class="line">                <span class="attr">src</span>:app.src + <span class="string">&quot;style/index.css&quot;</span>,</span><br><span class="line">                <span class="attr">dest</span>:app.dist + <span class="string">&quot;index.min.css&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//(2) 加载对应的插件</span></span><br><span class="line">    grunt.loadNpmTasks(<span class="string">&quot;grunt-contrib-uglify&quot;</span>);</span><br><span class="line">    grunt.loadNpmTasks(<span class="string">&quot;grunt-contrib-cssmin&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//(3) 注册任务</span></span><br><span class="line">    <span class="comment">//002 注册任务的第一种方式</span></span><br><span class="line">    <span class="comment">//① 这种方式可以不写任何注册任务相关的代码</span></span><br><span class="line">    <span class="comment">//② 我们可以通过$ grunt uglify和$ grunt cssmin命令来分别执行这两个Task</span></span><br><span class="line">    <span class="comment">//③ 支持以$ grunt uglify cssmin的方式来依次执行多个Task</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//002 注册任务的第二种方式</span></span><br><span class="line">    <span class="comment">//① 这种方式相当于给每个任务都起一个Task名称，通过$ grunt task名称的方式执行</span></span><br><span class="line">    <span class="comment">//② 执行命令 $ grunt uglifyTask 表示执行js文件的压缩操作</span></span><br><span class="line">    <span class="comment">//③ 执行命令 $ grunt cssminTask 表示执行css文件的压缩操作</span></span><br><span class="line">    <span class="comment">//④ 执行命令 $ grunt cssminTask uglifyTask 表示先执行css文件的压缩，再执行js文件的压缩</span></span><br><span class="line">    <span class="comment">//grunt.registerTask(&quot;uglifyTask&quot;,&quot;uglify&quot;);</span></span><br><span class="line">    <span class="comment">//grunt.registerTask(&quot;cssminTask&quot;,&quot;cssmin&quot;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//003 注册任务的第三种方式</span></span><br><span class="line">    <span class="comment">// ① 这种方式把多个任务添加到default任务队列中，执行$ grunt default的时候，所有的Task依次执行</span></span><br><span class="line">    <span class="comment">// ② 执行命令为 $ grunt default 或者是$ grunt  因为default可以被省略</span></span><br><span class="line">    <span class="comment">// grunt.registerTask(&quot;default&quot;,[&quot;uglify&quot;,&quot;cssmin&quot;]);</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>根据任务注册的不同方式来执行Task，下面分别给出三种方式的执行命令</p>
<p>方式（1）先执行<code>$ grunt cssmin</code>再执行 <code>$ grunt uglify</code>，或者通过<code>$ grunt cssmin uglify</code>命令来依次执行多个任务。</p>
<p>方式（2）先执行<code>$ grunt cssminTask</code>再执行 <code>$ grunt uglifyTask</code>，或者通过<code>$ grunt cssminTask uglifyTask</code>命令来依次执行多个任务。</p>
<p>方式（3）通过<code>$ grunt</code>或者是<code>$ grunt default</code>命令来依次执行多个任务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wendingding:Grunt_Test wendingding$ grunt default</span><br><span class="line">Running &quot;uglify:target&quot; (uglify) task</span><br><span class="line">&gt;&gt; 1 file created 174 B → 93 B</span><br><span class="line"></span><br><span class="line">Running &quot;cssmin:target&quot; (cssmin) task</span><br><span class="line">&gt;&gt; 1 file created. 89 B → 57 B</span><br><span class="line"></span><br><span class="line">Done.</span><br></pre></td></tr></table></figure>
<p>当两个任务执行完毕后，项目中会创建dist目录，该目录中新增两个文件分别对应压缩版的js文件和压缩版的css文件，新的目录结构如下。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── node_modules</span><br><span class="line">│   ├── ...(省略)</span><br><span class="line">│   ├── grunt-contrib-cssmin</span><br><span class="line">│   ├── grunt-contrib-uglify</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json</span><br><span class="line">├── dist</span><br><span class="line">│   ├── index.min.js</span><br><span class="line">│   └── index.min.css</span><br><span class="line">└── src</span><br><span class="line">	├── index.js</span><br><span class="line">	└── style</span><br><span class="line">		└── index.css</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上文列出了代码合并插件concat和压缩插件uglify|uglify的安装和基本使用过程，grunt生态系统拥有数量庞大的高质量插件群体，无法一一介绍，可以到<a target="_blank" rel="noopener" href="http://www.gruntjs.net/plugins">Grunt相关的插件列表页面-中文</a>或<a target="_blank" rel="noopener" href="https://gruntjs.com/plugins">Grunt相关的插件列表页面-官网</a>自行查看。</p>
<blockquote>
<p><strong><span style='color:#f25'>Grunt插件使用总结</span></strong></p>
<p>❏ 创建package.json文件(简单配置)和Gruntfile文件(<code>$ npm init</code>)<br>❏ 通过命令行把Grunt下载和安装到本地项目中(<code>$ npm install grunt --save-dev</code>)<br>❏ 通过命令行把Grunt插件下载和安装到本地项目中(<code>$ npm install grunt-contrib-xxx</code>)<br>❏ 在Gruntfile文件中对Grunt插件的Task进行配置（grunt.initConfig）<br>❏ 在Gruntfile文件中通过代码来加载对应的插件（grunt.loadNpmTasks）<br>❏ 在Gruntfile文件中通过代码来注册任务（grunt.registerTask）<br>❏ 在命令行中通过grunt + 任务名的方式来执行Task或加入到default队列以grunt命令执行。</p>
</blockquote>
<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/20/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97%5B03%5D%20Grunt%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7%E7%9A%84%E8%BF%90%E8%BD%AC%E6%9C%BA%E5%88%B6/" class="prev">上一篇</a><a href="/2018/05/19/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E7%B3%BB%E5%88%97%5B01%5D%20%20Bower%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E4%BD%BF%E7%94%A8/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 418.8k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>