<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScript系列 [28]- Event · 花田半亩</title><meta name="description" content="javaScript系列 [28]- Event - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScript系列 [28]- Event</h1><div class="post-info">May 17, 2018<span class="post-count"></span> ✧ 字数统计:6.2k(字) &nbsp;&nbsp; ♨︎ 阅读时长:23(分钟)</div><div class="post-content"><div class='tip'>本文介绍JavaScript事件相关的知识点，主要包括事件流、事件处理程序、事件对象(event)以及常见事件类型和事件委托等相关内容。</div>

<img src='../../../../src/js_base45.png'>

<p>在网页开发涉及的三种基础技术(<a href=""> HTML \ CSS \ JavaScript </a>)中，JavaScript主要负责处理页面的<code>行为</code>，而所谓行为大多指的是<code>交互行为</code>。<strong>JavaScript和HTML间的交互通过事件来实现</strong>，换句话来说事件其实就是页面文档或浏览器窗口中发生的特定交互，譬如页面中的按钮标签被点击我们称之为按钮的点击(<code>click</code>)事件，类似的还有页面加载事件、鼠标的移入移除等等。</p>
<p>通常,我们在开发中对事件的操作(处理)主要由两部分组成，即<code>事件注册</code>和<code>事件函数</code>。我们总是需要先通过特定的方式来给标签添加(注册)事件监听，当事件发生时事件函数将得以调用执行。本文以<strong>能够清晰明确的把事件的传递过程、事件注册的方式、事件对象以及常见的事件类型讲解清楚</strong>为目标。</p>
<p class='titleX'>**事件流**</p>

<img src='../../../../src/js_base47.png'>

<p><strong>事件流</strong> 描述的其实是事件内在的传递过程(顺序)。</p>
<p>我们的开发经验是，当我们给某些标签注册(绑定)了事件后，该事件被触发就会执行对应的事件处理函数。这似乎是一个顺理成章的经验，但事件到底是如何传递的呢 ？我们知道在网页中有很多的Node节点，而Node节点之间是复杂的树结构，事件在接收、传递和处理的时候，是按照<code>目标节点-&gt;上层节点-&gt;根节点</code>还是<code>根节点-&gt;下层节点-&gt;目标节点</code>的顺序传递的呢？ 不管它们是按照什么样的顺序来传递接收的，事件在传递的时候都会形成一个流式的传递结构，这就是所谓的事件流。</p>
<p>关于事件流的处理最早由<a href=""> IE4 </a>和 <a href=""> Netscape Communicator 4 </a>两个浏览器开发团队提出具体方案，有意思的是它们在处理这个相同问题的时候居然提出了两种完全相反的事件流方案。其中，<a href=""> IE </a>的事件流是<strong>事件冒泡流</strong>，而 <a href=""> Netscape Communicator 4 </a>的事件流是<strong>事件捕获流</strong>。如果再加上<code>DOM2级事件规定的事件流</code>，那么意味着我们将要学习<code>三种不同事件流</code>，感觉有些棘手但好在它们本身并不复杂。下面我们将从IE的冒泡事件流开始介绍。</p>
<img src='../../../../src/js_base48.png'>

<p><span style='border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195'>事件冒泡流</span></p>
<p><strong>事件冒泡<a href=""> event bubbling </a></strong> 指的是事件开始时由最具体的元素接收，然后逐级向上传递到文档。</p>
<p><span style='border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195'>事件捕获流</span></p>
<p><strong>事件捕获<a href=""> event capturing </a></strong> 指的是由页面文档先接收事件，然后逐级向下传递到最具体的元素。</p>
<img src='../../../../src/js_base50.png'>

<p><span style='border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195'>DOM事件流</span></p>
<p><strong>DOM2级事件</strong> 规定的事件流包括三个阶段：<a href="">事件捕获阶段</a>、<a href="">处于目标阶段</a> 和 <a href="">事件冒泡阶段</a>。事件捕获会首先发生，其为截获事件提供了机会，然后是实际的目标接收到事件，最后会对事件进行冒泡，可以在事件冒泡阶段对事件作出响应。</p>
<p><strong>事件流的浏览器支持情况</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(一)事件冒泡流</span><br><span class="line">所有现代浏览器都支持事件冒泡，在具体实现的时候存在差异。</span><br><span class="line">IE5-的事件冒泡会跳过html标签，而IE9+、Firefox、Chrome 和 Safari 则将事件一直冒泡到 window 对象。</span><br><span class="line"></span><br><span class="line">(二)事件捕获流</span><br><span class="line">IE9+、Firefox、Chrome、Safari 和 Opera等浏览器均支持事件捕获流，它们均从 window 对象开始捕获事件。</span><br><span class="line">因为老版本的浏览器不支持，因此很少有人使用事件捕获流(只在特殊需要的时候)。</span><br><span class="line"></span><br><span class="line">(三)DOM事件流</span><br><span class="line">IE9+、Firefox、Chrome、Safari 和 Opera等浏览器均支持DOM事件流，IE8-则不支持。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p class='titleX'>**事件处理程序(函数)**</p>

<p>事件指的是用户或浏览器自身执行的某种动作，譬如点击、拖拽、滚动等都是事件，在JavaScript中每种事件都有自己对应的名字，我们需要先通过特定的形式来给标签注册(绑定)事件，等事件被触发后进行响应，这个用来响应某个具体事件的函数我们称之为<code>事件处理函数</code>。</p>
<img src='../../../../src/js_base52.png'>

<p>在网页开发中，我们为标签事件指定事件处理函数的方式有多种，下面分别介绍。</p>
<p><span style='border:1px solid #ccc;padding:2px 10px;color:#666'>① 在html标签中添加事件处理函数</span></p>
<p>我们可以直接在标签身上以<code>属性节点</code>的形式来添加事件处理函数，这个属性节点的值要求是能够执行的JavaScript代码，可以是弹出框、函数调用等等形式。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--弹出消息--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(&#x27;点击了按钮&#x27;)&quot;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--控制台输出--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;showMsg()&quot;</span>&gt;</span>按钮2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(事件的类型-click)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(event.type)&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(输入框的值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(this.value)&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文顶顶&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--弹出消息(输入框的值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(value)&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文顶顶&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--弹出消息(引用了表单中user输入框元素并访问其值-文顶顶)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;user&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文顶顶&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;点击输出用户名&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;alert(user.value)&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--鼠标的移入事件演示--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width:200px;height:50px;background:red&quot;</span> <span class="attr">onmouseenter</span>=<span class="string">&quot;showLog()&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">showMsg</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;我是按钮点击事件的响应函数&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">showLog</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;鼠标移入div标签&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在以这种方式处理的事件函数中有权访问全局作用域中的任何代码，而且在执行的代码中可以直接(不用自己定义或者是从函数形参中读取)通过<code>event</code>变量来访问事件对象，在函数内部<code>this</code>的值则指向事件的目标元素。此外，还有一个比较特殊的地方是它内部扩展作用域的方式，简单说就是在事件函数内部可以像访问局部变量一样来访问document和该元素本身的成员。</p>
<p class='tip'>**注意** 我们在开发中应该尽量避免使用直接以属性节点的方式来处理标签的事件，因为它内在的作用域扩展机制在不同的浏览器中可能会产生不同的结果，而且这种方式让`JavaScript`和`HTML`代码交织在一起，耦合太过紧密不便于维护且违背代码分离的原则。</p>

<p><span style='border:1px solid #ccc;padding:2px 10px;color:#666'>② 通过标签的事件属性添加事件处理函数</span></p>
<p>我们也可以先通过DOM操作获取页面中指定的标签，然后通过把事件处理函数赋值给标签事件属性的方式来绑定事件。这种事件处理方式，因为其简单和跨浏览器的优势从第四代浏览器开始一直沿用至今。DOM中所有的元素(<a href=""> window \ document \ body \ div 等</a>)都拥有自己的事件处理属性，这些属性通常均为<code>on + 事件类型</code>的形式，全部小写且<span style='color:f05'>每个事件支持一个事件处理函数</span>。</p>
<p>我们为标签(元素)注册(绑定)事件只需要把事件处理函数赋值给元素的事件属性即可，标签常用的事件属性有<code>onclick</code>、<code>onmouseenter</code>和<code>onkeydown</code>等，使用时形如<code>oBtn.onclick = function()&#123;...&#125;</code> ，如果需要将标签上绑定的事件移除则只需要把事件属性赋值为<code>null</code>即可。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btnID&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;divID&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px;height: 50px;background: #195&quot;</span>&gt;</span>我是div标签<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">&quot;inputID&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入...&quot;</span> <span class="attr">value</span>=<span class="string">&quot;文顶顶&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*01-获取页面中指定的标签*/</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementById(<span class="string">&quot;btnID&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oDiv = <span class="built_in">document</span>.getElementById(<span class="string">&quot;divID&quot;</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oIpt = <span class="built_in">document</span>.getElementById(<span class="string">&quot;inputID&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*02-给按钮注册点击事件*/</span></span></span><br><span class="line"><span class="javascript">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;按钮被点击了&quot;</span>,event.type);          <span class="comment">//按钮被点击了 click</span></span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*03-给div注册鼠标移入移出事件*/</span></span></span><br><span class="line"><span class="javascript">  oDiv.onmouseenter = enter;</span></span><br><span class="line"><span class="javascript">  oDiv.onmouseleave = leave;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">enter</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;鼠标移入div标签&quot;</span>, event.currentTarget);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">leave</span>(<span class="params">event</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;鼠标移出div标签&quot;</span>, event.currentTarget);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*04-给input标签注册监听事件*/</span></span></span><br><span class="line"><span class="javascript">  oIpt.oninput = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;监听input事件&quot;</span>,<span class="built_in">this</span>.value);      <span class="comment">//实时获取文本输入框的值并打印</span></span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*05-演示删除事件*/</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">//oBtn.onclick = null;    打开后按钮的点击事件将失效</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p class='tip'>因为在这种处理方式中，事件函数被认为是标签(元素)的方法，因此函数中的`this`引用当前的标签(元素)，可以在事件处理函数中直接通过`this`来访问当前标签(元素)的任何属性和方法。</p>

<p><span style='border:1px solid #ccc;padding:2px 10px;color:#666'>③ 在JavaScript代码中为标签注册事件监听</span></p>
<p>我们还可以直接调用<code>addEventListener()</code>方法来给标签注册事件监听，同时支持为标签注册(<code>addEventListener</code>)和移除(<code>removeEventListener</code>)事件监听。所有的DOM节点都包含这两个方法，功能强大，唯一需要考虑的就是IE9-的兼容性问题。</p>
<p><strong><code>语法</code></strong> <code>ele.addEventListener(type,handle,bool)</code>  | <code>ele.removeEventListener(type,handle,bool)</code><br><strong><code>参数</code></strong> <code>type</code>表示要处理的事件名(类型)，<code>handle</code>是事件处理函数，<code>bool</code>控制调用事件函数的阶段，如果值为false(默认)则表示在冒泡阶段调用，值为true则表示在捕获阶段调用。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*01-获取页面中指定的标签*/</span></span><br><span class="line"><span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*02-给按钮绑定(注册)点击事件*/</span></span><br><span class="line"><span class="comment">/*02-A  捕获阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">&quot;click&quot;</span>,listener, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">/*02-B1 冒泡阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">&quot;click&quot;</span>,listener1, <span class="literal">false</span>);</span><br><span class="line"><span class="comment">/*02-B2 冒泡阶段调用事件函数*/</span></span><br><span class="line">oBtn.addEventListener(<span class="string">&quot;click&quot;</span>,listener2, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*具体的-事件处理函数*/</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;点击了按钮-A-捕获阶段&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;点击了按钮-B1-冒泡阶段&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;点击了按钮-B2-冒泡阶段&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*点击按钮后的执行情况*/</span></span><br><span class="line"><span class="comment">// 点击了按钮-A-捕获阶段</span></span><br><span class="line"><span class="comment">// 点击了按钮-B1-冒泡阶段</span></span><br><span class="line"><span class="comment">// 点击了按钮-B2-冒泡阶段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*03-删除按钮的点击事件*/</span></span><br><span class="line">oBtn.removeEventListener(<span class="string">&quot;click&quot;</span>,listener2, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>区别于<code>onclick</code>的方式，<code>addEventListener()</code>支持为标签绑定多个同类型的事件处理函数而且不存在覆盖的问题，当标签的事件被触发时绑定的事件处理函数会按照添加的顺序依次触发，需要注意的是在使用<code>removeEventListener()</code>方法移除标签的某个事件监听时，要求传入的函数同注册事件监听时的函数一致。此外，在IE9-的版本中，这两个方法不可用需考虑兼容性，在IE中我们可以使用<code>attachEvent</code>和<code>detachEvent</code>这两个方法来替代。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*01-获取页面中指定的标签*/</span></span><br><span class="line"><span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">/*IE8以及更早版本中注册事件监听的方式*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*02-给按钮注册事件监听*/</span></span><br><span class="line">oBtn.attachEvent(<span class="string">&quot;onclick&quot;</span>,listener1);</span><br><span class="line">oBtn.attachEvent(<span class="string">&quot;onclick&quot;</span>,listener2);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;点击了按钮-A-冒泡阶段&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">listener2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;点击了按钮-B-冒泡阶段&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);       <span class="comment">//事件处理函数在全局作用域中运行(this-&gt;window)</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*备注：如果给标签注册了多个事件监听，那么会以相反的顺序触发*/</span></span><br><span class="line"><span class="comment">//点击了按钮-B-冒泡阶段</span></span><br><span class="line"><span class="comment">//点击了按钮-A-冒泡阶段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*03-演示移除事件处理程序的情况*/</span></span><br><span class="line">oBtn.detachEvent(<span class="string">&quot;onclick&quot;</span>,listener2);</span><br></pre></td></tr></table></figure>
<p class='tip'>因为IE8及更早的版本只支持事件冒泡，因为通过`attachEvent()`方法添加的事件处理程序都会被添加到事件冒泡阶段，且事件函数中的this指向的并非事件标签而是`window`。</p>`<div class='titleX'>**常用的事件类型**</div>

<img src='../../../../src/js_base46.png'>

<p>Web浏览器中可能发生的事件有很多种类型，如果是按照<code>DOM3级事件</code>的规定那么大概可以划分为UI事件、焦点和鼠标事件、文本和键盘事件以及变动事件等几种类型。因为涉及到的事件众多且用法各异，因此本节将只会简单罗列它们。</p>
<p><span style='border:1px solid #ccc;padding:2px 10px;color:#fff;background:#195'>常用事件列表</span>  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">UI事件</span><br><span class="line">load :  当页面完全加载后(包括页面中所有图像、JavaScript和CSS文件等资源)触发window上面的load事件。</span><br><span class="line">unload: 当页面被完全卸载后触发window上面的unload事件，常用于清除引用以避免内存泄露。</span><br><span class="line">resize: 当浏览器窗口被调整时会触发window上面的resize事件，该事件不同浏览器触发机制不同(FireFox)。</span><br><span class="line">scroll: 当页面文档滚动的时候会触发window上面的scroll方法。</span><br><span class="line">        我们可以通过scrollLeft和scrollTop来监控该变化，需要注意标准和混杂模式下的差别。</span><br><span class="line">        </span><br><span class="line">焦点事件</span><br><span class="line">blur:   当元素失去焦点的时候触发。</span><br><span class="line">focus:  当元素获得焦点的时候触发。</span><br><span class="line"></span><br><span class="line">鼠标和滚轮事件</span><br><span class="line">click:      当被点击(或者按下键盘回车键)的时候触发。</span><br><span class="line">dbclick:    当被双击的时候触发。</span><br><span class="line">mousedown:  当用户按下任意鼠标键的时候触发。</span><br><span class="line">mouseup:    当用户释放鼠标按钮的时候触发。</span><br><span class="line">mouseenter: 当鼠标移入到元素范围内的时候触发，该事件不冒泡且对后代元素没影响。</span><br><span class="line">mouseleave: 当鼠标移出到元素范围内的时候触发，该事件不冒泡且对后代元素没影响。</span><br><span class="line">mousemove:  当鼠标在元素内部移动时重复触发。</span><br><span class="line">mouseover:  当鼠标移入到元素范围内的时候触发，对后代元素有影响。</span><br><span class="line">mouseout:   当鼠标移出到元素范围内的时候触发，对后代元素有影响。</span><br><span class="line">mousewheel: 当用户通过鼠标滚轮与页面交互滚动页面的时候触发。</span><br><span class="line"></span><br><span class="line">说明1：在一个元素中相继触发mousedown和mouseup事件后会自动触发click事件</span><br><span class="line">说明2：在一个元素中相继触发两次click事件则会自动触发dbclick事件。</span><br><span class="line"></span><br><span class="line">键盘和文本事件</span><br><span class="line">keydown:    当用户按下键盘上的任意键时触发，按住不放则重复触发。</span><br><span class="line">keypress:   当用户按下键盘上的字符键的时候触发，按住不放则重复触发。</span><br><span class="line">keyup:      当用户释放键盘上按键的时候触发。</span><br><span class="line">input:      在文本插入文本框之前触发input事件，是对keypress的补充。</span><br><span class="line">change:     在文本框内容改变(敲击回车键)的时候触发。</span><br><span class="line">select:     在文本被选中的时候触发。</span><br><span class="line">reset:      当点击重置按钮的时候被触发。</span><br><span class="line">submit:     表单提交的时候被触发。</span><br><span class="line"></span><br><span class="line">说明1：键盘和文本事件常用于用户通过文本框输入文本的时候。</span><br><span class="line">说明2：当用户按下键盘上字符键的时候首先触发keydown事件，然后是keypress事件最后触发keyup(后)事件。</span><br><span class="line">说明3：当用户按下键盘上非字符键的时候首先触发keydown事件，然后keyup(后)事件。</span><br><span class="line">说明4：任何可以获得焦点的元素都能够触发keypress事件，而只有可编辑区域才能触发textInput事件。</span><br><span class="line"></span><br><span class="line">DOM节点事件</span><br><span class="line">DOMSubtreeModified:     DOM结构发生任何变化都会触发。</span><br><span class="line">DOMNodeInserted:        当某个节点被插入到另一个节点中时被触发。</span><br><span class="line">DOMNodeRemoved:         当某个节点被从其父节点中删除时会被触发。</span><br><span class="line">DOMNodeInsertedIntoDocument: 当某个节点被插入到文档后会被触发。</span><br><span class="line">DOMNodeRemovedFromDocument:  当某个节点被从文档中删除后被触发。</span><br><span class="line">DOMAttrModified:             当属性节点被修改后被触发。</span><br><span class="line">DOMCharacterDataModified:    当文本节点值发生变化时被触发。</span><br><span class="line"></span><br><span class="line">注意：IE8及更早版本不支持任何DOM事件。</span><br><span class="line"></span><br><span class="line">HTML5事件</span><br><span class="line">contextmenu:      该事件用于控制显示自定义的上下文菜单。</span><br><span class="line">beforeunload:     该事件在页面卸载前触发，通常表现为弹出对话框提示用户是否确认离开页面。</span><br><span class="line">DOMContentLoaded: 当DOM树构造完成后触发，先于load，我们可以通过document来监听。</span><br><span class="line">readystatechange: 当文档状态发生改变时触发，支持该事件的对象均拥有readyState属性来获取当前状态。</span><br><span class="line">    uninitialized(未初始化)：对象存在但尚未初始化。</span><br><span class="line">    loading(正在加载)：      对象正在加载数据。</span><br><span class="line">    loaded(加载完毕)：       对象加载数据完成。</span><br><span class="line">    interactive(交互)：     可以交互操作对象，但还没有完全加载完毕。</span><br><span class="line">    complete(完成)：        对象已经加载完毕。</span><br><span class="line">。</span><br><span class="line">    </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>通常，我们总是把JavaScript的代码写到<code>window.onload</code>函数中以保证在执行JavaScript代码的时候页面和所有资源均以加载完毕。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--&lt;body onload=&quot;alert(&#x27;页面加载完毕&#x27;)&quot;&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入&quot;</span> <span class="attr">id</span>=<span class="string">&quot;inputID&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*01-演示常见的UI事件*/</span></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;页面所有资源都加载完毕--onload&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onunload = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">&quot;页面被卸载---onunload&quot;</span>)</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onresize = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;浏览器窗口大小被调整--onresize&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;监听到页面滚动----onscroll&quot;</span>)</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*02-获取页面中对应的标签*/</span></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> oInput = <span class="built_in">document</span>.getElementById(<span class="string">&quot;inputID&quot;</span>);</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*键盘回车执行一次*/</span></span></span><br><span class="line"><span class="javascript">  oInput.onchange = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;输入框的值发生了变化--change&quot;</span>,<span class="built_in">this</span>.value);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">/*只要输入框的值发生变化就会执行一次*/</span></span></span><br><span class="line"><span class="javascript">  oInput.oninput  = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;输入框的值发生了变化--oninput&quot;</span>,<span class="built_in">this</span>.value);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  oInput.onfocus = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;输入框获得焦点--onfocus&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  oInput.onblur = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(<span class="string">&quot;输入框失去焦点--onblur&quot;</span>);</span></span><br><span class="line"><span class="javascript">  &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 页面所有资源都加载完毕--onload</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框获得焦点--onfocus</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框的值发生了变化--oninput w</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框的值发生了变化--oninput we</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框的值发生了变化--oninput wen</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框的值发生了变化--change wen</span></span></span><br><span class="line"><span class="javascript">  <span class="comment">// 输入框失去焦点--onblur</span></span></span><br><span class="line"><span class="javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div class='titleX'>**事件对象**</div>

<p>事件对象记录着当事件发生时与该事件相关的所有必要信息，包括<code>事件的目标对象</code>、<code>事件的类型</code>等等，通常我们总是使用<code>event</code>或者<code>e</code>来表示事件对象。所有的浏览器都支持事件对象，但支持方式不同。兼容DOM的浏览器总是会将事件对象(<code>event</code>)作为第一个参数传入到事件处理函数中，而在IE8-版本的浏览器中事件对象作为window的属性存在，因此我们在具体写代码的时候需要考虑兼容问题。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*演示在事件处理函数中获取事件对象*/</span></span><br><span class="line">  <span class="keyword">var</span> oBtn = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;button&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  oBtn.onclick = <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = event || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="built_in">console</span>.dir(e);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>我们可以通过上面这一小段代码的运行结果来讨论事件对象的核心成员，具体参考下面的结果以及给出的标准。需要说明的是，下面列出的是常用的<code>click事件</code>中事件对象的成员，并非所有事件的<code>event</code>对象都长这样。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">MouseEvent</span><br><span class="line">    altKey: false             //当事件被触发时，&quot;ALT&quot; 是否被按下</span><br><span class="line">    bubbles: true             //表明事件是否冒泡</span><br><span class="line">    button: 0                 //返回当事件被触发时，哪个鼠标按钮被点击。</span><br><span class="line">    buttons: 0</span><br><span class="line">    cancelBubble: false      //表明是否阻止事件冒泡     </span><br><span class="line">    cancelable: true         //表明是否可以取消事件的默认行为</span><br><span class="line">    clientX: 33              //事件发生位置的X坐标，参考页面的可视区域</span><br><span class="line">    clientY: 26              //事件发生位置的Y坐标</span><br><span class="line">    composed: true</span><br><span class="line">    ctrlKey: false           //当事件被触发时，&quot;CTRL&quot; 键是否被按下</span><br><span class="line">    currentTarget: null      //事件处理程序当前正在处理的那个元素</span><br><span class="line">    defaultPrevented: false  //表示是否已经调用了preventDefault()方法禁止默认行为</span><br><span class="line">    detail: 1                //与事件相关的细节信息</span><br><span class="line">    eventPhase: 0            //调用事件处理程序的阶段,1-捕获，2-目标，3-冒泡</span><br><span class="line">    fromElement: null</span><br><span class="line">    isTrusted: true</span><br><span class="line">    layerX: 33               //视图位置的X坐标</span><br><span class="line">    layerY: 26               //视图位置的Y坐标</span><br><span class="line">    metaKey: false           //返回当事件被触发时，&quot;meta&quot; 键是否被按下。</span><br><span class="line">    movementX: 0</span><br><span class="line">    movementY: 0</span><br><span class="line">    offsetX: 24              //发生事件的地点在事件源元素的坐标系统中的 x 坐标</span><br><span class="line">    offsetY: 15              //发生事件的地点在事件源元素的坐标系统中的 y 坐标</span><br><span class="line">    pageX: 33                //页面位置的X坐标,页面没有滚动情况下等价于clientX</span><br><span class="line">    pageY: 26                //页面位置的Y坐标,页面没有滚动情况下等价于clientY</span><br><span class="line">    path: (5) [button, body, html, document, Window]  //DOM数的路径</span><br><span class="line">    relatedTarget: null      //返回与事件的目标节点相关的节点</span><br><span class="line">    returnValue: true        //默认未true,设置未false表示取消事件的默认行为</span><br><span class="line">    screenX: 89              //事件的屏幕(相对于电脑屏幕)位置X坐标</span><br><span class="line">    screenY: 189             //事件的屏幕(相对于电脑屏幕)位置Y坐标</span><br><span class="line">    shiftKey: false          //当事件被触发时，&quot;SHIFT&quot; 键是否被按下。</span><br><span class="line">    sourceCapabilities: InputDeviceCapabilities &#123;firesTouchEvents: false&#125;</span><br><span class="line">    srcElement: button       //事件的目标，同target保持一致</span><br><span class="line">    target: button           //事件作用于哪个标签</span><br><span class="line">    timeStamp: 2490.9807     //从启动到事件发生间的时间戳</span><br><span class="line">    toElement: button        //对于鼠标移入和移出事件，该属性引用移入鼠标的元素</span><br><span class="line">    type: &quot;click&quot;            //事件的类型</span><br><span class="line">    view: Window &#123;postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, parent: Window, …&#125;</span><br><span class="line">    which: 1        //对于keypress事件，该属性声明被敲击的键生成的 Unicode 字符码。</span><br><span class="line">    x: 33                     //事件发生的位置的 x 坐标</span><br><span class="line">    y: 26                     //事件发生的位置的 y 坐标</span><br></pre></td></tr></table></figure>
<p><strong>位置说明</strong> 下图说明了事件对象中<code>offsetX/Y</code>和<code>ScreenX/Y</code>以及<code>clientX/Y</code>的关系。</p>
<img src='../../../../src/js_base51.png'>

<p><strong>事件对象的兼容性问题</strong> DOM和IE中的事件对象有很多不同之处，下面简单列出对比。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[1] event                    window.event               获取事件对象 </span><br><span class="line">[2] event.target             event.srcElement           获取事件目标对象</span><br><span class="line">[3] event.preventDefault();  event.returnValue = false; 禁止标签默认行为</span><br><span class="line">[4] event.stopPropagation(); event.cancelBubble = true; 禁止事件冒泡</span><br></pre></td></tr></table></figure>
<div class='titleX'>**事件冒泡 | 默认行为 | 事件委托**</div>

<p><strong>事件冒泡</strong> 当我们在某个标签节点上触发某类事件时(譬如<code>click点击事件</code>)，该事件会沿着DOM树向上层节点逐级传播直到最顶层，在向上传播的过程中如果该节点注册了同类型的事件，那么这些事件也会被触发。</p>
<p><strong><code>注意[1]</code></strong> 绝大部分的事件都能冒泡，除<a href=""> blur、focus、load、unload </a>几个特殊的事件外。<br><strong><code>注意[2]</code></strong> 事件冒泡到最顶层的目标不同，大部分浏览器到window对象，IE8-到document对象。<br><strong><code>注意[3]</code></strong> 开发中我们可以在事件函数中调用<code>event.stopPropagation()方法</code>来阻止事件冒泡，如果是<a href="">IE8-</a>浏览器则需要通过<code>event.cancelBubble = true</code>代码设置。</p>
<p><strong>默认行为</strong>  HTML页面中的很多标签都存在默认行为，譬如超连接点击的时候会自动跳转到目标页面，表单点击提交后会把内容提交到action指定的页面，还有右键菜单以及文本选择等等。在开发中，我们如果需要阻止这些标签的默认行为，那么可以使用<code>event.preventDefault()方法</code>，如果是<a href="">E8-</a>浏览器则需要通过<code>event.returnValue = false</code>代码设置。</p>
<p><strong>事件委托</strong> 事件委托是一种用来解决<code>页面中事件处理函数过多</code>问题的方案，它利用事件冒泡只指定一个事件处理函数就能够管理某一类型的所有事件，恰当的利用事件委托，可以节省内存空间，有效的提升程序的整体性能。 </p>
<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/05/17/javaScript%E7%B3%BB%E5%88%97%20%5B29%5D-RegExp/" class="prev">上一篇</a><a href="/2018/05/16/javaScript%E7%B3%BB%E5%88%97%20%5B27%5D-DOM/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 420.5k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>