<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> javaScriptç³»åˆ— [09]-javaScriptå’ŒJSON (æ‹“å±•) Â· èŠ±ç”°åŠäº©</title><meta name="description" content="javaScriptç³»åˆ— [09]-javaScriptå’ŒJSON (æ‹“å±•) - æ–‡é¡¶é¡¶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="èŠ±ç”°åŠäº©"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="èŠ±ç”°åŠäº©" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">æ–‡é¡¶é¡¶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">æ ‡ç­¾</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">åšå®¢å›­</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">javaScriptç³»åˆ— [09]-javaScriptå’ŒJSON (æ‹“å±•)</h1><div class="post-info">Apr 20, 2018<span class="post-count"></span> âœ§ å­—æ•°ç»Ÿè®¡:8.7k(å­—) &nbsp;&nbsp; â™¨ï¸ é˜…è¯»æ—¶é•¿:39(åˆ†é’Ÿ)</div><div class="post-content"><div class='tip'>æœ¬æ–‡è¾“å‡ºJSONæœç´¢å’ŒJSONè½¬æ¢ç›¸å…³çš„å†…å®¹ï¼Œæ˜¯å¯¹å‰ä¸¤ç¯‡æ–‡ç« çš„è¡¥å……ã€‚</div>

<h3 id="JSONæœç´¢"><a href="#JSONæœç´¢" class="headerlink" title="JSONæœç´¢"></a>JSONæœç´¢</h3><p>åœ¨ç‰¹å®šçš„å¼€å‘åœºæ™¯ä¸­ï¼Œå¦‚æœæœåŠ¡å™¨ç«¯è¿”å›çš„JSONæ•°æ®å¼‚å¸¸å¤æ‚(å¯èƒ½è¶…è¿‡ä¸Šä¸‡è¡Œ)ï¼Œé‚£ä¹ˆå¿…ç„¶å°±æœ‰å¯¹JSONæ–‡æ¡£è¿›è¡Œæœç´¢çš„éœ€æ±‚ã€‚åœ¨å¯¹JSONæ–‡æ¡£è¿›è¡Œæœç´¢çš„æ—¶å€™ï¼Œå»ºè®®ä½¿ç”¨ä¸“ä¸šçš„JSONæœç´¢ç±»åº“å’Œå·¥å…·æ¥å®ç°ï¼Œè¿™å¯ä»¥æå¤§çš„ç®€åŒ–JSONæ–‡æ¡£æœç´¢çš„å·¥ä½œå¹¶é™ä½å·¥ä½œéš¾åº¦ã€‚</p>
<p>JSONæœç´¢çš„å…·ä½“é€‚ç”¨åœºæ™¯ï¼š<span style='color:#195'>å¯¹äºæŸæ¬¡APIè°ƒç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å…¶ä¸­çš„éƒ¨åˆ†æ•°æ®ï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®æŸä¸ªæ ‡å‡†æ¥å¯¹è¿”å›çš„JSONå†…å®¹è¿›è¡Œæœç´¢å’Œè¿‡æ»¤ã€‚</span></p>
<p>æœ¬æ–‡å°†ä¼šå…ˆåä»‹ç»å¤šæ¬¾å¤„ç†JSONæœç´¢çš„ç±»åº“(å·¥å…·)ï¼ŒåŒ…æ‹¬ä½†ä¸é™äº**<code>JSONPath</code><strong>ã€</strong><code>JSON Pointer</code><strong>ã€</strong><code>jq</code><strong>ç­‰ï¼Œåœ¨å¯¹å„ç§æ–¹æ¡ˆè¿›è¡Œä»‹ç»çš„æ—¶å€™å°†ä¼šä»</strong>æ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹ã€å…·ä½“çš„ä½¿ç”¨æ–¹å¼**ç­‰è§’åº¦åˆ‡å…¥ï¼Œå¼€å‘ä¸­å¯ä»¥æ ¹æ®å®é™…çš„å¼€å‘åœºæ™¯å’Œå„å·¥å…·è‡ªèº«çš„ç‰¹ç‚¹æ¥è¿›è¡Œé€‰æ‹©ã€‚</p>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>å·¥å…·001 â†’ jq</strong></span></p>
<p><strong><code>jq</code></strong>&nbsp;&nbsp;&nbsp;&nbsp;æ˜¯ä¸€ä¸ªæä¾›äº†å‘½ä»¤è¡Œç•Œé¢çš„JSONæœç´¢å·¥å…·ã€‚<br><strong><code>åŠŸèƒ½</code></strong> å¯ä½¿ç”¨è‡ªèº«ç‰¹å®šçš„æŸ¥è¯¢è¯­æ³•æ¥è¿‡æ»¤JSONå’Œæˆªå–æ•°ç»„ï¼Œç±»ä¼¼äºJSONä¸­çš„sedã€‚<br><strong><code>ç”Ÿæ€</code></strong> é™¤å‘½ä»¤è¡Œå¤–ï¼Œæ‹¥æœ‰ä¼˜ç§€çš„åŸºäºWebçš„jqæµ‹è¯•å™¨ï¼Œç”šè‡³Nodeç¤¾åŒºè¿˜ä»¥npmæ¨¡å—å½¢å¼å‘å¸ƒäº†<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jq-tutorial">æ•™ç¨‹</a>ã€‚<br><strong><code>ä¼˜åŠ¿</code></strong></p>
<ul>
<li>æä¾›ä¸°å¯Œçš„æœç´¢å’Œè¿‡æ»¤åŠŸèƒ½ã€‚</li>
<li>å¤§å¤šæ•°ç¼–ç¨‹è¯­è¨€éƒ½å¯¹jqæä¾›è‰¯å¥½çš„æ”¯æŒã€‚</li>
<li>jqç›¸å…³æ–‡æ¡£è´¨é‡è¾ƒé«˜ï¼Œä¸”æ‹¥æœ‰å‹å¥½çš„äº¤äº’å¼æ•™ç¨‹ã€‚</li>
<li>æ‹¥æœ‰ä¼˜ç§€çš„<a target="_blank" rel="noopener" href="https://jqplay.org/">åœ¨çº¿æµ‹è¯•å·¥å…·</a>ï¼Œèƒ½å¤Ÿå¯¹æŸ¥è¯¢æä¾›å¿«é€Ÿåé¦ˆã€‚</li>
<li>åœ¨å‘½ä»¤è¡Œä¸­èƒ½å¤Ÿå¾ˆå¥½çš„ä¸cURLä»¥åŠç®¡é“æ“ä½œç­‰ååŒå·¥ä½œã€‚</li>
<li>ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ï¼Œæ²¡æœ‰è¿è¡Œæ—¶ä¾èµ–ï¼Œå¯è¿è¡Œåœ¨Linuxï¼ŒOS Xå’ŒWindowsç­‰å¹³å°ã€‚</li>
</ul>
<p><strong><code>èµ„æ–™</code></strong> <a target="_blank" rel="noopener" href="https://stedolan.github.io/jq/">å®˜ç½‘</a> ã€<a target="_blank" rel="noopener" href="https://github.com/stedolan/jq">Githubä»“åº“</a> ã€ <a target="_blank" rel="noopener" href="http://manpages.ubuntu.com/manpages/bionic/man1/jq.1.html?_ga=2.163034492.1318091186.1542254580-1927231673.1542254580">Ubuntu-jqæ‰‹å†Œ</a> ã€ <a target="_blank" rel="noopener" href="http://hyperpolyglot.org/json">Hyperpolyglot JSONå·¥å…·</a>ã€<a target="_blank" rel="noopener" href="https://github.com/FasterXML/jackson">Jacksonç±»åº“</a>ã€<a target="_blank" rel="noopener" href="https://rubygems.org/gems/ruby-jq">Ruby-jq gem</a><br><strong><code>è¯­æ³•</code></strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">======åŸºæœ¬è¯­æ³•======</span><br><span class="line">.     è¾“å‡ºæ‰€æœ‰çš„æ–‡æ¡£å†…å®¹ã€‚</span><br><span class="line">|     ç®¡é“ç¬¦ï¼Œä¼ é€’æ•°æ®æµã€‚</span><br><span class="line">.key  è¾“å‡ºæŒ‡å®škeyå¯¹åº”çš„éƒ¨åˆ†æ–‡æ¡£ã€‚</span><br><span class="line">.[ ]  è¾“å‡ºæ•°ç»„ä¸­æŒ‡å®šç´¢å¼•å¯¹åº”çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">======æŸ¥è¯¢è¯­æ³•ç¤ºä¾‹========</span><br><span class="line">.person[0]	è·å–JSONæ–‡æ¡£personæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚</span><br><span class="line">.person[-1]	è·å–JSONæ–‡æ¡£personæ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ ã€‚</span><br><span class="line">.person[0:3]	è·å–JSONæ–‡æ¡£personæ•°ç»„ä¸­çš„å‰é¢ä¸‰ä¸ªå…ƒç´ ã€‚</span><br><span class="line">.person[] | select (.age&gt;20 ) è·å–JSONæ–‡æ¡£ä¸­æ»¡è¶³è¦æ±‚(age &gt; 20)çš„æ‰€æœ‰æ•°æ®ã€‚</span><br></pre></td></tr></table></figure>
<p><strong><code>å®‰è£…</code></strong></p>
<ul>
<li>OSXç³»ç»Ÿ å»ºè®®ä½¿ç”¨<a target="_blank" rel="noopener" href="https://brew.sh/">Homebrew</a>æ¥å®‰è£…ï¼Œå…·ä½“å‘½ä»¤ä¸ºï¼š<code>$ brew install jq</code></li>
<li>windowsç³»ç»Ÿ å»ºè®®ä½¿ç”¨<a target="_blank" rel="noopener" href="https://chocolatey.org/">Chocolatey NuGet</a>æ¥å®‰è£…ï¼Œå…·ä½“å‘½ä»¤ä¸ºï¼š<code> $ chocolatey install jq</code></li>
<li>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡<code>git clone</code>ä»“åº“æºç æ¥è¿›è¡Œå®‰è£…ï¼Œå…·ä½“ç»†èŠ‚ä»¥åŠå…¶å®ƒç³»ç»Ÿå¤„ç†è¯·å‚è€ƒ<a target="_blank" rel="noopener" href="https://stedolan.github.io/jq/download/">Download jq</a></li>
</ul>
<p>è¿™é‡Œç»™å‡ºOSXç³»ç»Ÿä¸­é€šè¿‡å‘½ä»¤è¡Œå®‰è£…<code>jq</code>çš„å…·ä½“ç»†èŠ‚å’Œç¤ºä¾‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ brew install jq</span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Installing dependencies <span class="keyword">for</span> jq: oniguruma</span><br><span class="line">==&gt; Installing jq dependency: oniguruma</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/oniguruma-6.8.2.high_sierra</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring oniguruma-6.8.2.high_sierra.bottle.tar.gz</span><br><span class="line">ğŸº  /usr/<span class="built_in">local</span>/Cellar/oniguruma/6.8.2: 17 files, 1.2MB</span><br><span class="line">==&gt; Installing jq</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/jq-1.5_3.high_sierra.bottle</span><br><span class="line"><span class="comment">######################################################################## 100.0%</span></span><br><span class="line">==&gt; Pouring jq-1.5_3.high_sierra.bottle.tar.gz</span><br><span class="line">ğŸº  /usr/<span class="built_in">local</span>/Cellar/jq/1.5_3: 19 files, 946.6KB</span><br><span class="line"></span><br><span class="line">wendingding$ jq --version</span><br><span class="line">jq-1.5</span><br></pre></td></tr></table></figure>
<div class='tip'>åœ¨å®‰è£…jqçš„æ—¶å€™ï¼Œå¦‚æœå‘½ä»¤è¡ŒæŠ¥<span style='color:red'>Error: Failure while executing: git config --local --replace-all homebrew.private true</span>é”™è¯¯ï¼Œå¯ä»¥å°è¯•å…ˆæ‰§è¡Œ`$ xcode-select --install `å‘½ä»¤ç„¶åé‡æ–°å®‰è£…ã€‚åœ¨å®‰è£…çš„æ—¶å€™å¦‚æœæ€»æ˜¯å¡åœ¨Updating Homebrew...å¯ä»¥`control + C`åœæ­¢æ›´æ–°ã€‚</div>

<p><strong><code>å·¥å…·(jq-tutorial)</code></strong></p>
<p><a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jq-tutorial">jq-tutorial</a>æ˜¯nodeç¤¾åŒºä»¥npmæ¨¡å—çš„å½¢å¼å‘å¸ƒçš„jqæ•™ç¨‹ï¼Œæ˜¯å­¦ä¹ jqä½¿ç”¨çš„ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„å·¥å…·ï¼Œè¿™é‡Œç®€å•åˆ—å‡ºè¯¥æ¨¡å—çš„å®‰è£…å’Œä½¿ç”¨ç¤ºä¾‹ï¼Œå¹¶å¯¹å‘½ä»¤è¿›è¡Œç®€å•çš„è¯´æ˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm search jq-tutorial</span><br><span class="line">NAME                      | DESCRIPTION          | AUTHOR          | DATE       </span><br><span class="line">jq-tutorial               | Exercises <span class="keyword">for</span>â€¦       | =rjz            | 2016-09-29 </span><br><span class="line"></span><br><span class="line">wendingding$ npm install -g jq-tutorial</span><br><span class="line">npm WARN notice [SECURITY] lodash has the following vulnerability: 1 low. </span><br><span class="line">Go here <span class="keyword">for</span> more details: https://nodesecurity.io/advisories?search=lodash version=2.4.2 </span><br><span class="line">-Run `npm i npm@latest -g` to upgrade npm version, and <span class="keyword">then</span> `npm audit` to get more info.</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/jq-tutorial -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/jq-tutorial/bin/jq-tutorial</span><br><span class="line">+ jq-tutorial@0.0.5</span><br><span class="line">added 4 packages <span class="keyword">in</span> 20.012s</span><br><span class="line"></span><br><span class="line">wendingding$ jq-tutorial </span><br><span class="line">Run jq-tutorial with one of the following:</span><br><span class="line">  * pick</span><br><span class="line">  * objects</span><br><span class="line">  * mapping</span><br><span class="line">  * filtering</span><br><span class="line">  * output</span><br><span class="line">  * reduce</span><br><span class="line"></span><br><span class="line">wendingding$ jq-tutorial pick</span><br><span class="line">Pick</span><br><span class="line">========================================</span><br><span class="line"><span class="comment">### Pick fields from an object</span></span><br><span class="line">`jq` retrieves named properties from objects by using `.` syntax:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">&#x27;&#123;&quot;foo&quot;: &#123; &quot;bar&quot;: &quot;a value&quot; &#125;&#125;&#x27;</span> | jq .foo</span><br><span class="line">Nested values are accessible as well:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">&#x27;&#123;&quot;foo&quot;: &#123; &quot;bar&quot;: &quot;a value&quot; &#125;&#125;&#x27;</span> | jq .foo.bar</span><br><span class="line"><span class="comment">### Pick elements from an array:</span></span><br><span class="line">Elements <span class="keyword">in</span> an array may be extracted by index:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">&#x27;[&quot;snap&quot;,&quot;crackle&quot;,&quot;pop&quot;]&#x27;</span> | jq .[1]</span><br><span class="line">More than one index? No problem!</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">&#x27;[&quot;snap&quot;,&quot;crackle&quot;,&quot;pop&quot;]&#x27;</span> | jq .[1, 2]</span><br><span class="line">We can even extract *all* elements at once by omitting the indices:</span><br><span class="line">    $ <span class="built_in">echo</span> <span class="string">&#x27;[&quot;snap&quot;,&quot;crackle&quot;,&quot;pop&quot;]&#x27;</span> | jq .[]</span><br><span class="line"><span class="built_in">type</span> <span class="string">&quot;data?&quot;</span> to see dataset or <span class="string">&quot;help?&quot;</span> <span class="keyword">for</span> more options</span><br><span class="line">--------------------------------</span><br><span class="line"></span><br><span class="line">Given:    <span class="string">&#x27;product&#x27;</span> (<span class="built_in">type</span> <span class="string">&quot;data?&quot;</span> to view)</span><br><span class="line">Challenge: Select the entire item (hint: don<span class="string">&#x27;t overthink this!):</span></span><br><span class="line"><span class="string">&gt; </span></span><br></pre></td></tr></table></figure>
<p><strong><code>å·¥å…·(jqPlay)</code></strong></p>
<p><a target="_blank" rel="noopener" href="https://jqplay.org/">jqPlay</a>æ˜¯ä¸€ä¸ªåŸºäºwebçš„jqåœ¨çº¿æµ‹è¯•æ¸¸ä¹åœºï¼Œå®ƒæä¾›äº†å¯¹JSONæ•°æ®è¿›è¡ŒjqæŸ¥è¯¢çš„åŸºæœ¬åŠŸèƒ½ï¼Œè€Œä¸”æä¾›äº†ç®€å•çš„jqæŸ¥è¯¢è¯­æ³•ç¤ºä¾‹ï¼Œèƒ½å¤Ÿå¯¹æŸ¥è¯¢è¿›è¡Œå¿«é€Ÿåé¦ˆã€‚</p>
<img src='../../../../src/json_03.gif'>

<p><strong>åŸºæœ¬ç”¨æ³•æ¼”ç¤º</strong></p>
<p>è¿™é‡Œæˆ‘å…ˆæä¾›ä¸€ä¸ªç¨å¤æ‚çš„JSONæ•°æ®,æ•°æ®ä¿å­˜åœ¨<code>/JSON-Demo/data.jsonè·¯å¾„</code>(<a target="_blank" rel="noopener" href="https://github.com/flowerField/Source/blob/master/Blog/data.json">æ‚¨å¯ä»¥ç‚¹å‡»æ­¤é“¾æ¥è·å–è¯¥æ•°æ®</a>)ã€‚ä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿ï¼Œè¿™é‡Œæˆ‘å°†ä¼šæŠŠè¯¥æ–‡æ¡£çš„æ•°æ®éƒ¨ç½²ä¸ºRESTful APIï¼Œä»è€Œåˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿçš„APIæœåŠ¡ã€‚åœ¨å…·ä½“çš„å¤„ç†ä¸­ï¼Œå°†ä½¿ç”¨åˆ°åä¸º<a target="_blank" rel="noopener" href="https://github.com/typicode/json-server">json-server</a>çš„Nodeæ¨¡å—ï¼Œä¸‹é¢åˆ—å‡ºå…·ä½“çš„ç»†èŠ‚ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ <span class="built_in">pwd</span></span><br><span class="line">/Users/æ–‡é¡¶é¡¶/Desktop/JSON-Demo</span><br><span class="line"></span><br><span class="line">wendingding$ npm install -g json-server</span><br><span class="line">/usr/<span class="built_in">local</span>/bin/json-server -&gt; /usr/<span class="built_in">local</span>/lib/node_modules/json-server/bin/index.js</span><br><span class="line">+ json-server@0.14.0</span><br><span class="line">added 223 packages <span class="keyword">in</span> 23.03s</span><br><span class="line"></span><br><span class="line">wendingding$ json-server -p 5000 ./data.json</span><br><span class="line"></span><br><span class="line">  \&#123;^_^&#125;/ hi!</span><br><span class="line"></span><br><span class="line">  Loading ./data.json</span><br><span class="line">  Done</span><br><span class="line"></span><br><span class="line">  Resources</span><br><span class="line">  http://localhost:5000/person</span><br><span class="line"></span><br><span class="line">  Home</span><br><span class="line">  http://localhost:5000</span><br><span class="line"></span><br><span class="line">  Type s + enter at any time to create a snapshot of the database</span><br><span class="line">GET /person 304 16.355 ms - -</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œ<code>$json-server -p 5000 ./data.json</code>å‘½ä»¤ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é€šè¿‡<a href="">http://localhost:5000/person</a>åœ°å€æ¥è®¿é—®JSONæ–‡æ¡£ä¸­çš„æ•°æ®ï¼Œä¸‹é¢æ˜¯æ˜¾ç¤ºç»“æœã€‚</p>
<img src='../../../../src/json_04.png'>

<p><strong>å¤‡æ³¨ï¼š</strong>å¦‚æœç»å¸¸éœ€è¦é€šè¿‡æµè§ˆå™¨è®¿é—®å’Œæ˜¾ç¤ºJSONæ•°æ®ï¼Œå»ºè®®å®‰è£…ç›¸åº”çš„JSONæ‰©å±•æ’ä»¶ï¼Œæˆ‘ç”µè„‘Chromeå®‰è£…çš„æ˜¯<a target="_blank" rel="noopener" href="http://jsonhandle.sinaapp.com/">JSON-handle</a>ï¼ŒåŒç±»å‹çš„è¿˜æœ‰<a target="_blank" rel="noopener" href="https://github.com/gildas-lormeau/JSONView-for-Chrome/tree/master/WebContent">JSONView</a>ã€‚</p>
<p>ä¸‹é¢åˆ—å‡ºjqå‘½ä»¤è¡Œå·¥å…·çš„ä½¿ç”¨ç¤ºä¾‹ä»¥åŠä¸»è¦å‘½ä»¤è¡Œçš„è§£è¯»è¯´æ˜ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   169k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: 18,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;mitaoer&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;mitaoer@126.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">      <span class="string">&quot;éŸ³ä¹&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç»˜ç”»&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IT&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;è‹±è²å°¼è¿ª&quot;</span>,</span><br><span class="line">      <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000001&quot;</span>,</span><br><span class="line">      <span class="string">&quot;price&quot;</span>: 200012.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: 28,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">      <span class="string">&quot;éŸ³ä¹&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;å¥¥è¿ª&quot;</span>,</span><br><span class="line">      <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000002&quot;</span>,</span><br><span class="line">      <span class="string">&quot;price&quot;</span>: 200000.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: 23,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;xiaxiaoxia&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;mitaoer@126.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IT&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;car&quot;</span>: null</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: 24,</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;LiuY&quot;</span>,</span><br><span class="line">    <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;LiuY@126.com&quot;</span>,</span><br><span class="line">    <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">      <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">      <span class="string">&quot;éŸ³ä¹&quot;</span>,</span><br><span class="line">      <span class="string">&quot;ç»˜ç”»&quot;</span>,</span><br><span class="line">      <span class="string">&quot;IT&quot;</span>,</span><br><span class="line">      <span class="string">&quot;é˜…è¯»&quot;</span>,</span><br><span class="line">      <span class="string">&quot;å¥èº«&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">      <span class="string">&quot;type&quot;</span>: <span class="string">&quot;ATS&quot;</span>,</span><br><span class="line">      <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000003&quot;</span>,</span><br><span class="line">      <span class="string">&quot;price&quot;</span>: 888888.66</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1]&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   140k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: 28,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éŸ³ä¹&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;å¥¥è¿ª&quot;</span>,</span><br><span class="line">    <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000002&quot;</span>,</span><br><span class="line">    <span class="string">&quot;price&quot;</span>: 200000.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1].name&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   171k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line"><span class="string">&quot;wendingding&quot;</span></span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1].email&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   106k      0 --:--:-- --:--:-- --:--:--  127k</span><br><span class="line"><span class="string">&quot;wenidngding_ios@126.com&quot;</span></span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1] | &#123;name,age&#125;&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   161k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: 28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1] | &#123;newName:.name,newAge:.age&#125;&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   153k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;newName&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">  <span class="string">&quot;newAge&quot;</span>: 28</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[] | select (.age &gt;=24)&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   167k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: 28,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éŸ³ä¹&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;å¥¥è¿ª&quot;</span>,</span><br><span class="line">    <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000002&quot;</span>,</span><br><span class="line">    <span class="string">&quot;price&quot;</span>: 200000.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;age&quot;</span>: 24,</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;LiuY&quot;</span>,</span><br><span class="line">  <span class="string">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;LiuY@126.com&quot;</span>,</span><br><span class="line">  <span class="string">&quot;interest&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;æ–‡å­¦&quot;</span>,</span><br><span class="line">    <span class="string">&quot;éŸ³ä¹&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ç»˜ç”»&quot;</span>,</span><br><span class="line">    <span class="string">&quot;IT&quot;</span>,</span><br><span class="line">    <span class="string">&quot;é˜…è¯»&quot;</span>,</span><br><span class="line">    <span class="string">&quot;å¥èº«&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">&quot;car&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;type&quot;</span>: <span class="string">&quot;ATS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000003&quot;</span>,</span><br><span class="line">    <span class="string">&quot;price&quot;</span>: 888888.66</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1,3] | &#123;name,email&#125;&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   162k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;LiuY&quot;</span>,</span><br><span class="line">  <span class="string">&quot;email&quot;</span>: <span class="string">&quot;LiuY@126.com&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1,3] | [&#123;name,email&#125;]&#x27;</span></span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   165k      0 --:--:-- --:--:-- --:--:--  255k</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;LiuY&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;LiuY@126.com&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">wendingding$ touch test.json</span><br><span class="line"></span><br><span class="line">wendingding$ curl http://localhost:5000/person | jq <span class="string">&#x27;.[1,3] | [&#123;name,email&#125;]&#x27;</span> &gt; test.json</span><br><span class="line">  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current</span><br><span class="line">                                 Dload  Upload   Total   Spent    Left  Speed</span><br><span class="line">100  1047  100  1047    0     0   143k      0 --:--:-- --:--:-- --:--:--  204k</span><br><span class="line">wendingding$ cat test.json </span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;LiuY&quot;</span>,</span><br><span class="line">    <span class="string">&quot;email&quot;</span>: <span class="string">&quot;LiuY@126.com&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong><code>ä¸»è¦å‘½ä»¤è¯´æ˜[ä¸ºæ–¹ä¾¿é˜…è¯»ï¼Œå‘½ä»¤è¡Œä¸­çš„xxxå‡ä»£è¡¨çš„æ˜¯http://localhost:5000/personè·¯å¾„]</code></strong></p>
<p><code>$ curl xxx | jq &#39;.&#39;</code> è·å–APIè¿”å›çš„æ‰€æœ‰JSONæ•°æ®ã€‚<br><code>$ curl xxx | jq &#39;.[1]&#39;</code> è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„ç¬¬2ä¸ªå…ƒç´ å†…å®¹ã€‚<br><code>$ curl xxx | jq &#39;.[1].name&#39;</code> è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„ç¬¬2ä¸ªå…ƒç´ (å¯¹è±¡)ä¸­çš„nameå±æ€§å€¼ã€‚<br><code>$ curl xxx | jq &#39;.[1] | &#123;name,age&#125;&#39;</code> è·å–æ•°ç»„ç¬¬2ä¸ªå…ƒç´ (å¯¹è±¡)çš„nameå’Œageé”®å€¼å¯¹ç»„æˆæ–°å¯¹è±¡ã€‚<br><code>$ curl xxx | jq &#39;.[1,3] | &#123;name,email&#125;&#39;</code> è·å–æ•°ç»„ç¬¬2å’Œç¬¬4ä¸ªå…ƒç´ ä¸­çš„nameå’Œemailå€¼ç»„æˆå¯¹è±¡ã€‚<br><code>$ curl xxx | jq &#39;.[] | select (.age &gt;=24)&#39;</code> è·å–JSONæ–‡æ¡£ä¸­æ‰€æœ‰ageå±æ€§å€¼&gt;=24çš„å¯¹è±¡å…ƒç´ é›†åˆã€‚</p>
<p><strong><code>è¡¥å……</code></strong> å¦‚æœéœ€è¦åœ¨Nodeä¸­ä½¿ç”¨jq,é‚£ä¹ˆå¯ä»¥å®‰è£…å¹¶ä½¿ç”¨requireå¯¼å…¥<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/node-jq">node-jq</a>æ¨¡å—ã€‚</p>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>å·¥å…·002 â†’ JSONPath</strong></span></p>
<p><strong><code>å®šä½</code></strong> æ˜¯ä¸€æ¬¾å¯ç”¨äºå¯¹JSONæ–‡æ¡£è¿›è¡Œæœç´¢å’Œæ•°æ®æå–æ“ä½œç±»åº“ã€‚<br><strong><code>å†å²</code></strong> ç”±<a target="_blank" rel="noopener" href="https://goessner.net/">Stefan Goessner</a>äº2007å¹´å¼€å‘ï¼Œæœ€å¼€å§‹çš„ç‰ˆæœ¬ä½¿ç”¨JavaScriptå®ç°ã€‚<br><strong><code>åŠŸèƒ½</code></strong> èƒ½å¤Ÿå¯¹JSONæ–‡æ¡£è¿›è¡Œæœç´¢å’Œæ•°æ®æå–ï¼Œå®ƒçš„æŸ¥è¯¢è¯­æ³•åŸºäº<a target="_blank" rel="noopener" href="http://www.w3school.com.cn/xpath/index.asp">XPath</a>å®ç°ã€‚<br><strong><code>ç”Ÿæ€</code></strong> JSONPathæ²¡æœ‰æä¾›å‘½ä»¤è¡Œæ“ä½œå®ç°ï¼Œä½†æä¾›äº†ä¼˜ç§€çš„<a target="_blank" rel="noopener" href="http://jsonpath.com/">åœ¨çº¿æµ‹è¯•å·¥å…·</a>å’Œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jsonpath">Nodeæ¨¡å—</a>ã€‚<br><strong><code>ä¼˜åŠ¿</code></strong></p>
<ul>
<li>å…·æœ‰ä¸°å¯Œçš„æŸ¥è¯¢è¯­æ³•ã€‚</li>
<li>æŸ¥è¯¢è¯­å¥å¯ä»¥è¿”å›æ–‡æ¡£ä¸­çš„å¤šä¸ªå…ƒç´ ã€‚</li>
<li>å¤§å¤šæ•°çš„ä¸»æµå¹³å°éƒ½å¯¹JSONPathæä¾›æ”¯æŒã€‚</li>
<li>æ‹¥æœ‰å¾ˆé«˜çš„ç¤¾åŒºä½¿ç”¨ç‡ï¼Œä¼˜ç§€çš„åœ¨çº¿æµ‹è¯•å·¥å…·å¯¹å¼€å‘è€…æ›´å‹å¥½ã€‚</li>
</ul>
<p><strong><code>èµ„æ–™</code></strong> <a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jsonpath">jsonpath Nodeæ¨¡å—</a> ã€<a target="_blank" rel="noopener" href="http://jsonpath.com/">åœ¨çº¿æµ‹è¯•ç½‘ç«™</a> ã€<a target="_blank" rel="noopener" href="https://github.com/json-path/JsonPath">Githubä»“åº“</a>ã€<a target="_blank" rel="noopener" href="https://goessner.net/">Stefan Goessnerä¸»é¡µ</a></p>
<table>
<thead>
<tr>
<th align="left">è¯­æ³•</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>$</code></td>
<td align="left">æ ¹èŠ‚ç‚¹</td>
</tr>
<tr>
<td align="left"><code>@</code></td>
<td align="left">å½“å‰èŠ‚ç‚¹çš„ç­›é€‰å™¨å±æ€§å¤„ç†</td>
</tr>
<tr>
<td align="left"><code>*</code></td>
<td align="left">é€šé…ç¬¦ï¼ŒåŒ¹é…ä»»ä½•å±æ€§åç§°</td>
</tr>
<tr>
<td align="left"><code>..</code></td>
<td align="left">é€šé…ç¬¦ï¼ŒåŒ¹é…ä»»æ„å±‚æ¬¡çš„èŠ‚ç‚¹</td>
</tr>
<tr>
<td align="left"><code>[]</code></td>
<td align="left">è¿­ä»£å™¨æ ‡ç¤ºï¼ŒåŒæ•°ç»„ç´¢å¼•</td>
</tr>
<tr>
<td align="left"><code>[,]</code></td>
<td align="left">è¿­ä»£å™¨æ ‡ç¤ºï¼Œè¿­ä»£å™¨å¤šé€‰</td>
</tr>
<tr>
<td align="left"><code>[start:end]</code></td>
<td align="left">æ•°ç»„åˆ‡ç‰‡è¿ç®—ç¬¦</td>
</tr>
<tr>
<td align="left"><code>[?(&lt;expression&gt;)]</code></td>
<td align="left">è¿‡æ»¤è¡¨è¾¾å¼ï¼Œæ±‚å€¼å¿…é¡»ä¸ºå¸ƒå°”å€¼</td>
</tr>
</tbody></table>
<hr>
<p><strong><code>æŸ¥è¯¢è¯­æ³•ç¤ºä¾‹</code></strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">//å¤‡æ³¨ï¼šå‚è€ƒçš„JSONæ•°æ®ä¸ºå‰æ–‡ä½¿ç”¨çš„data.jsonæ–‡ä»¶</span><br><span class="line">$                       è·å–æ•´ä¸ªJSONæ–‡æ¡£çš„å†…å®¹</span><br><span class="line">$.person                è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„å†…å®¹</span><br><span class="line">$.person.length         è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„é•¿åº¦(å…ƒç´ ä¸ªæ•°)</span><br><span class="line"></span><br><span class="line">$.person[0]             è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line">$.person[:1]            è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line">$.person[-1:]           è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line">$.person[(@.length-1)]  è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line"></span><br><span class="line">$.person[:2]            è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„å‰ä¸¤ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line">$.person[0,3]           è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„ç¬¬1å’Œ4ç¬¬ä¸ªå…ƒç´ çš„å†…å®¹</span><br><span class="line">$.person[0::2]          è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„æŒ‡å®šå…ƒç´ çš„å†…å®¹(éš”ä¸€ä¸ªå…ƒç´ æŠ½å–)</span><br><span class="line">$.person[:2].name       è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„å‰ä¸¤ä¸ªå…ƒç´ ä¸­çš„nameå€¼</span><br><span class="line"></span><br><span class="line">$..name                 è·å–JSONæ–‡æ¡£ä¸­æ‰€æœ‰çš„nameå­å…ƒç´ å†…å®¹</span><br><span class="line">$.person[?(@.age &gt;23)]  è·å–JSONæ–‡æ¡£ä¸­ageå€¼å¤§äº23çš„æ‰€æœ‰å…ƒç´ </span><br><span class="line">$.person[?(@.age &gt;23)].age  è·å–JSONæ–‡æ¡£ä¸­ageå€¼å¤§äº23çš„æ‰€æœ‰å…ƒç´ ä¸­çš„ageå€¼ä¿¡æ¯</span><br><span class="line">$.person[?(@.age &gt;20 &amp;&amp; @.interest.length == 2)].name æ»¡è¶³å¤šä¸ªæ¡ä»¶çš„ç­›é€‰</span><br></pre></td></tr></table></figure>
<p><strong><code>å·¥å…·(jsonpathåœ¨çº¿æµ‹è¯•ç½‘ç«™)</code></strong></p>
<p>jsonpathæä¾›äº†å¯¹åº”çš„<a target="_blank" rel="noopener" href="http://jsonpath.com/">åœ¨çº¿æµ‹è¯•ç½‘ç«™</a>ï¼Œç»™æŒ‡å®šJSONæ–‡æ¡£è¾“å…¥å¯¹åº”çš„jsonpathæŸ¥è¯¢è¯­å¥èƒ½å¤Ÿå¿«é€Ÿçœ‹åˆ°æœ€ç»ˆæ•ˆæœã€‚ä½¿ç”¨è¯¥æµ‹è¯•å·¥å…·æ¥å¯ä»¥â€é‡é‡çº§çš„â€å¤æ‚JSONæ•°æ®è¿›è¡Œå¿«é€Ÿçš„ç­›é€‰ï¼Œè¾“å…¥æŸ¥è¯¢è¯­å¥åé©¬ä¸Šå°±èƒ½å¤Ÿåœ¨å³ä¾§çœ‹åˆ°æŸ¥è¯¢åçš„ç»“æœã€‚å¦‚æœå¼€å‘è€…åŸæœ¬ä¸äº†è§£æŸ¥è¯¢è¯­æ³•ï¼Œé‚£ä¹Ÿå¯ä»¥é€šè¿‡è¯¥å·¥å…·æ¥å¿«é€Ÿçš„å­¦ä¹ ï¼Œä¸‹é¢ç»™å‡ºç®€å•çš„å›¾ç¤ºã€‚</p>
<img src='../../../../src/json_06.png'>

<div class='tip'>**æ³¨æ„** [jsonpath](https://jsonpath.org/)åœ¨çº¿æµ‹è¯•å·¥å…·åœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæ€»æ˜¯ä¼šæŠŠæŸ¥è¯¢çš„ç»“æœä¿å­˜åˆ°[ ]çš„ç»“æ„ä¸­ã€‚</div>

<p><strong><code>å·¥å…·(nodeæ¨¡å—jsonpath)</code></strong></p>
<p>JSONPathæœ¬èº«æ²¡æœ‰å‘½ä»¤è¡Œå·¥å…·ï¼Œé™¤äº†ä¸Šé¢ä»‹ç»çš„åœ¨çº¿æµ‹è¯•ç½‘ç«™ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜èƒ½åœ¨ä»£ç ä¸­ä½¿ç”¨nodeç¤¾åŒºå‘å¸ƒçš„<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jsonpath">jsonpathæ¨¡å—</a>å®ç°JSONçš„æœç´¢ä»»åŠ¡ã€‚ä¸‹é¢ç»™å‡ºä¸€ä¸ªç®€å•çš„å•å…ƒæµ‹è¯•ç¤ºä¾‹(åˆ—å‡ºæºç å’Œæ‰§è¡Œæƒ…å†µ)ã€‚</p>
<p><strong>001 å…ˆåˆ—å‡ºå•å…ƒæµ‹è¯•ç›¸å…³çš„ä»£ç </strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jsonpath-test.jsæ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> unirest  = <span class="built_in">require</span>(<span class="string">&quot;unirest&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> jsonPath = <span class="built_in">require</span>(<span class="string">&quot;jsonpath&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> expect   = <span class="built_in">require</span>(<span class="string">&quot;chai&quot;</span>).expect;</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&quot;wendingding-test&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request ;</span><br><span class="line">    beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        request = unirest.get(<span class="string">&quot;http://localhost:5000/person&quot;</span>)</span><br><span class="line">        .header(<span class="string">&quot;Accept&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return 200 çŠ¶æ€ç &quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.statusCode).to.eql(<span class="number">200</span>);</span><br><span class="line">            expect(response.headers[<span class="string">&quot;content-type&quot;</span>])</span><br><span class="line">            .to.eql(<span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.body.length).to.eql(<span class="number">4</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®ä¸­ç¬¬ä¸€ä¸ªå…ƒç´       -- $[1]&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">&quot;$[1]&quot;</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].name).to.eql(<span class="string">&quot;wendingding&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æœ€åä¸€ä¸ªå…ƒç´ [1] -- $[-1:]&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">&quot;$[-1:]&quot;</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].email).to.eql(<span class="string">&quot;LiuY@126.com&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æœ€åä¸€ä¸ªå…ƒç´ [2] -- $[(@.length-1)]&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123; </span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(response.body,<span class="string">&quot;$[(@.length-1)]&quot;</span>);</span><br><span class="line">            expect(resultData[<span class="number">0</span>].email).to.eql(<span class="string">&quot;LiuY@126.com&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æ»¡è¶³æ¡ä»¶å…ƒç´      -- $[?(@.age &gt;= 23)]&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> data = response.body;  </span><br><span class="line">            <span class="keyword">var</span> resultData = jsonPath.query(data,<span class="string">&quot;$[?(@.age &gt;= 23)]&quot;</span>);</span><br><span class="line">            <span class="comment">//console.log(resultData)</span></span><br><span class="line">            expect(resultData.length).to.eql(<span class="number">3</span>);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span> ;i&lt;resultData.length;i++)</span><br><span class="line">            &#123;</span><br><span class="line">                expect(resultData[i].age).to.be.at.least(<span class="number">23</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>002 åˆ—å‡ºä»£ç çš„å…·ä½“æ‰§è¡Œç»†èŠ‚</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ <span class="built_in">pwd</span> </span><br><span class="line">/Users/æ–‡é¡¶é¡¶/Desktop/jsonPath-demo</span><br><span class="line">wendingding$ npm <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line">&gt; jsonpath-demo@1.0.0 <span class="built_in">test</span> /Users/æ–‡é¡¶é¡¶/Desktop/jsonPath-demo</span><br><span class="line">&gt; mocha</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  wendingding-test</span><br><span class="line">    âœ“ <span class="built_in">return</span> 200 çŠ¶æ€ç </span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®</span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®ä¸­ç¬¬ä¸€ä¸ªå…ƒç´       -- $[1]</span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æœ€åä¸€ä¸ªå…ƒç´ [1] -- $[-1:]</span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æœ€åä¸€ä¸ªå…ƒç´ [2] -- $[(@.length-1)]</span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®ä¸­æ»¡è¶³æ¡ä»¶å…ƒç´     -- $[?(@.age &gt;= 23)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  6 passing (92ms)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>003 ä»£ç è¯´æ˜</strong></p>
<p>ã€‡ ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨äº†<a target="_blank" rel="noopener" href="https://mochajs.org/">Mocha</a>ã€<a target="_blank" rel="noopener" href="http://unirest.io/">Unirest</a>æµ‹è¯•æ¡†æ¶ï¼ŒjsonpathæŸ¥è¯¢æ¨¡å—ä»¥åŠ<a target="_blank" rel="noopener" href="https://www.chaijs.com/">Chai</a>æ¨¡å—ä¸­çš„æ–­è¨€ç»“æ„ã€‚<br>â‘  ç¤ºä¾‹ä»£ç ä¸­çš„æ¯ä¸€ä¸ª<code>it</code>å°±ä»£è¡¨ç€ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚<br>â‘¡ ç¤ºä¾‹ä»£ç ä¸­æˆ‘ä»¬åœ¨Mochaçš„<code>beforeEach()æ–¹æ³•</code>ä¸­å¯¹è¯·æ±‚ä¿¡æ¯è¿›è¡Œäº†é…ç½®ã€‚<br>â‘¢ ç¤ºä¾‹ä»£ç ä¸­åœ¨describeè¯­å¥å®šä¹‰çš„èŒƒå›´å†…ï¼Œæ¯æ¬¡æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹ä¹‹å‰éƒ½ä¼šå…ˆè¿è¡Œä¸€æ¬¡beforeEachæ–¹æ³•ã€‚</p>
<p><strong>004 æ‰§è¡Œå¤‡æ³¨</strong></p>
<p>è¿™é‡Œç®€å•è¯´æ˜ä¸Šé¢ä»£ç çš„æ‰§è¡Œç¯å¢ƒå’Œå¤„ç†è¿‡ç¨‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">[1]  åœ¨ç”µè„‘ä¸­æŒ‡å®šçš„è·¯å¾„åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œè¿›å…¥åˆ°è¯¥è·¯å¾„ã€‚</span><br><span class="line"></span><br><span class="line">$ mkdir JSON-TEST</span><br><span class="line">$ <span class="built_in">cd</span> JSON-TEST/</span><br><span class="line">$ <span class="built_in">pwd</span></span><br><span class="line">    /Users/æ–‡é¡¶é¡¶/Desktop/JSON-TEST</span><br><span class="line"></span><br><span class="line">[2] åˆå§‹åŒ–å¹¶å®‰è£…å¿…è¦çš„nodeæ¨¡å—ã€‚</span><br><span class="line"></span><br><span class="line">$ npm init  //é»˜è®¤å›è½¦å³å¯</span><br><span class="line">$ npm install -g mocha</span><br><span class="line">$ npm install --save-dev mocha</span><br><span class="line">$ npm install --save-dev unirest</span><br><span class="line">$ npm install -save-dev jsonpath</span><br><span class="line">$ npm install --save-dev chai</span><br><span class="line"></span><br><span class="line">[3] ä¿®æ”¹package.jsonæ–‡ä»¶ä¸­çš„scriptsé¡¹ä¸º<span class="string">&quot;test&quot;</span>: <span class="string">&quot;mocha&quot;</span>ã€‚</span><br><span class="line"></span><br><span class="line">wendingding$ cat package.json </span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;name&quot;</span>: <span class="string">&quot;json-test&quot;</span>,</span><br><span class="line">  <span class="string">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="string">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;test&quot;</span>: <span class="string">&quot;mocha&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="string">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="string">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="string">&quot;chai&quot;</span>: <span class="string">&quot;^4.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;jsonpath&quot;</span>: <span class="string">&quot;^1.0.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mocha&quot;</span>: <span class="string">&quot;^5.2.0&quot;</span>,</span><br><span class="line">    <span class="string">&quot;unirest&quot;</span>: <span class="string">&quot;^0.5.1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">[4] åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»º<span class="built_in">test</span>æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæµ‹è¯•æ–‡ä»¶(æ­¤å¤„å‘½åä¸ºjson-test.js)ã€‚</span><br><span class="line"></span><br><span class="line">$ mkdir <span class="built_in">test</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">test</span>/</span><br><span class="line">$ touch json-test.js</span><br><span class="line"></span><br><span class="line">[5] ç¼–è¾‘json-test.jsæ–‡ä»¶çš„å†…å®¹(å‰æ–‡å·²ç»ç»™å‡º),åˆ—å‡ºæ–‡ä»¶ç›®å½•ã€‚</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ node_modules</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ JSONSelect</span><br><span class="line">â”‚   ...çœç•¥</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ chai</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ jsonpath</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ mocha</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ unirest</span><br><span class="line">â”‚Â Â  â””â”€â”€ xtend</span><br><span class="line">â”œâ”€â”€ package-lock.json</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â””â”€â”€ <span class="built_in">test</span></span><br><span class="line">    â””â”€â”€ json-test.js</span><br><span class="line"></span><br><span class="line">[6] æ‰§è¡Œæµ‹è¯•ã€‚</span><br><span class="line"></span><br><span class="line">$ npm <span class="built_in">test</span></span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;'><strong>å·¥å…·003 â†’ JSON Pointer</strong></span></p>
<p><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6901">JSON Pointer</a>æœ¬èº«æ˜¯ä¸€é¡¹ç”¨äºè·å–JSONæ–‡æ¡£ä¸­ç‰¹å®šå€¼çš„æ ‡å‡†ã€‚JSON Pointerè®¾è®¡çš„ä¸»è¦ç›®æ ‡åœ¨äºæ”¯æŒJSON Schemaæ ‡å‡†ä¸­çš„$refï¼ˆè¯·å‚è€ƒJSONè¿›é˜¶ä¸€æ–‡ï¼‰ã€‚</p>
<p>ç›®å‰ï¼Œå¤§å¤šæ•°çš„ä¸»æµå¹³å°(åŒ…æ‹¬<span style='color:#f09'><strong>Node\Ruby on Rails\Ptyhon\Java</strong></span>ç­‰)éƒ½å·²ç»åŒ…å«JSON Pointerç›¸å…³çš„ç±»åº“ã€‚Javaï¼ŒJacksonå·²æ”¯æŒJSON PointeræŸ¥è¯¢è¯­æ³•ï¼ŒjavaEE 8å°†æä¾›åŸç”Ÿæ”¯æŒï¼›Nodeä¸­åˆ™å¯ä»¥åœ¨ç¤¾åŒºä¸­æ‰¾åˆ°å¹¶ä½¿ç”¨<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json-pointer">json-pointeræ¨¡å—</a>æ¥å¯¹JSONæ–‡æ¡£è¿›è¡Œå¤„ç†ã€‚</p>
<table>
<thead>
<tr>
<th align="left">è¯­æ³•</th>
<th align="left">æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>/data</code></td>
<td align="left">è·å–JSONæ–‡æ¡£ä¸­æŸä¸ªkeyå¯¹åº”çš„æ‰€æœ‰æ•°æ®</td>
</tr>
<tr>
<td align="left"><code>/data/index</code></td>
<td align="left">è·å–æŒ‡å®šç´¢å¼•å¯¹åº”çš„æ•°æ®</td>
</tr>
<tr>
<td align="left"><code>/data/index/key</code></td>
<td align="left">è·å–æŒ‡å®šç´¢å¼•å¯¹åº”çš„æ•°æ®å¹¶é€šè¿‡keyæ¥å–å€¼</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc6901">JSON Pointer</a>çš„æŸ¥è¯¢è¯­æ³•ç®€æ´é«˜æ•ˆï¼Œå…¶å·¥ä½œæœºåˆ¶æ˜¯ä»¥<code>/</code>æ¥è¡¨ç¤ºè·¯å¾„åˆ†éš”ï¼Œä»¥<code>ç´¢å¼•|ä¸‹æ ‡</code>æ¥è·å–æŒ‡å®šçš„å†…å®¹ï¼Œç´¢å¼•æ€»æ˜¯ä»0å¼€å§‹ã€‚ä¸‹é¢ç»™å‡ºç®€çŸ­çš„æŸ¥è¯¢è¯­æ³•ç¤ºä¾‹ï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//å¤‡æ³¨ï¼šå‚è€ƒçš„JSONæ•°æ®ä¸ºå‰æ–‡ä½¿ç”¨çš„data.jsonæ–‡ä»¶</span><br><span class="line">/person                 è·å–JSONæ–‡æ¡£ä¸­personçš„å†…å®¹</span><br><span class="line">/person/0               è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„ç¬¬ä¸€é¡¹å†…å®¹</span><br><span class="line">/person/0/name          è·å–JSONæ–‡æ¡£ä¸­personæ•°ç»„çš„ç¬¬ä¸€é¡¹å†…å®¹ä¸­çš„nameå€¼</span><br></pre></td></tr></table></figure>
<div class='tip'>**æ³¨æ„** JSON Pointeræ ‡å‡†ä¸­ï¼ŒæŸ¥è¯¢æ“ä½œçš„ç»“æœæ€»åªåŒ…å«æ•°æ®å€¼è€Œä¸ä¼šåŒ…å«ç›¸å…³çš„é”®åã€‚</div>

<p>è¿™é‡Œå°†ä½¿ç”¨nodeç¤¾åŒºçš„<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json-pointer">json-pointer</a>æ¨¡å—ç®€å•æ¼”ç¤ºnodeå¹³å°ä¸­å¯¹JSONæ–‡æ¡£çš„å¤„ç†ã€‚ä¸‹é¢åˆ—å‡ºæ ¸å¿ƒå•å…ƒæµ‹è¯•ä»£ç (åœ¨æµ‹è¯•çš„æ—¶å€™éœ€è¦å…ˆå®‰è£…å¯¹åº”çš„æ¨¡å—)ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">&quot;chai&quot;</span>).expect;</span><br><span class="line"><span class="keyword">var</span> pointer = <span class="built_in">require</span>(<span class="string">&quot;json-pointer&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> unirest = <span class="built_in">require</span>(<span class="string">&quot;unirest&quot;</span>);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&quot;wendingding-test&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> request ;</span><br><span class="line">    beforeEach(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        request = unirest.get(<span class="string">&quot;http://localhost:5000/person&quot;</span>)</span><br><span class="line">        .header(<span class="string">&quot;Accept&quot;</span>,<span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return 200 çŠ¶æ€ç &quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.statusCode).to.eql(<span class="number">200</span>);</span><br><span class="line">            expect(response.headers[<span class="string">&quot;content-type&quot;</span>])</span><br><span class="line">            .to.eql(<span class="string">&quot;application/json; charset=utf-8&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return æ‰€æœ‰çš„JOSNæ•°æ®&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            expect(response.body.length).to.eql(<span class="number">4</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return Personæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  /person/0&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = pointer.get(response.body,<span class="string">&quot;/0&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;\n&quot;</span>,resultData,<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">            expect(resultData.name).to.eql(<span class="string">&quot;mitaoer&quot;</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;return Personæ•°ç»„ä¸­çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸­interestçš„å€¼ /person/2/interest&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        request.end(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> resultData = pointer.get(response.body,<span class="string">&quot;/2/interest&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;\t&quot;</span>,resultData);</span><br><span class="line">            expect(resultData.length).to.eql(<span class="number">2</span>);</span><br><span class="line">            done();</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>ç®€å•åˆ—å‡ºæ‰§è¡Œæƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ npm <span class="built_in">test</span></span><br><span class="line">&gt; json-pointer-demo@1.0.0 <span class="built_in">test</span> /Users/æ–‡é¡¶é¡¶/Desktop/JSON-Pointer</span><br><span class="line">&gt; mocha</span><br><span class="line"></span><br><span class="line">  wendingding-test</span><br><span class="line">    âœ“ <span class="built_in">return</span> 200 çŠ¶æ€ç </span><br><span class="line">    âœ“ <span class="built_in">return</span> æ‰€æœ‰çš„JOSNæ•°æ®</span><br><span class="line"></span><br><span class="line">      &#123; age: 18,</span><br><span class="line">        name: <span class="string">&#x27;mitaoer&#x27;</span>,</span><br><span class="line">        hasBrother: <span class="literal">true</span>,</span><br><span class="line">        email: <span class="string">&#x27;mitaoer@126.com&#x27;</span>,</span><br><span class="line">        interest: [ <span class="string">&#x27;æ–‡å­¦&#x27;</span>, <span class="string">&#x27;éŸ³ä¹&#x27;</span>, <span class="string">&#x27;ç»˜ç”»&#x27;</span>, <span class="string">&#x27;IT&#x27;</span> ],</span><br><span class="line">        car: &#123; <span class="built_in">type</span>: <span class="string">&#x27;è‹±è²å°¼è¿ª&#x27;</span>, number: <span class="string">&#x27;äº¬A 000001&#x27;</span>, price: 200012.66 &#125; </span><br><span class="line">      &#125; </span><br><span class="line">    âœ“ <span class="built_in">return</span> Personæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´  /person/0</span><br><span class="line">	    [ <span class="string">&#x27;æ–‡å­¦&#x27;</span>, <span class="string">&#x27;IT&#x27;</span> ]</span><br><span class="line">    âœ“ <span class="built_in">return</span> Personæ•°ç»„ä¸­çš„ç¬¬ä¸‰ä¸ªå…ƒç´ ä¸­interestçš„å€¼ /person/2/interest</span><br><span class="line"></span><br><span class="line">  4 passing (66ms)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="JSONè½¬æ¢"><a href="#JSONè½¬æ¢" class="headerlink" title="JSONè½¬æ¢"></a>JSONè½¬æ¢</h3><h4 id="JSON-â†’-HTMLç»“æ„-æ¸²æŸ“"><a href="#JSON-â†’-HTMLç»“æ„-æ¸²æŸ“" class="headerlink" title="JSON â†’ HTMLç»“æ„(æ¸²æŸ“)"></a>JSON â†’ HTMLç»“æ„(æ¸²æŸ“)</h4><p>å°†JSONæ•°æ®è½¬æ¢(å¤„ç†)ä¸ºHTMLçš„æ“ä½œæˆ‘ä»¬åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œåœ¨å‰ç«¯å¼€å‘å’Œç§»åŠ¨ç«¯å¼€å‘é¢†åŸŸä¸­ï¼Œè¿™ä¸€éƒ¨åˆ†çš„æ“ä½œé€šå¸¸å’Œç½‘ç»œè¯·æ±‚ç´§å¯†è”ç³»ï¼Œä¸šåŠ¡æµç¨‹åŸºæœ¬éƒ½æ˜¯å…ˆå‘è¯·æ±‚è·å–æœåŠ¡å™¨ç«¯è¿”å›çš„(JSON)æ•°æ®ï¼Œç„¶åé€šè¿‡åºåˆ—åŒ–çš„æ–¹æ³•æ¥å¯¹æ•°æ®è¿›è¡Œè§£æï¼Œä¹Ÿå°±æ˜¯ååºåˆ—åŒ–å¤„ç†(é€šå¸¸æ˜¯å°†JSONæ•°æ®è½¬æ¢ä¸ºç¼–ç¨‹è¯­è¨€ä¸­å¯¹åº”çš„æ•°æ®ç»“æ„æ¯”å¦‚æ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡)ï¼Œæœ€ç»ˆå†æ ¹æ®å¾—åˆ°çš„æ•°æ®æ¥æ›´æ–°UIã€‚</p>
<p>ç°åœ¨å‰ç«¯å¼€å‘ä¸­è¿™éƒ½å±äºåŸºæœ¬æ“ä½œï¼Œç”šè‡³åƒVueè¿™æ ·ç±»ä¼¼çš„æ¡†æ¶ä¸­<code>æ•°æ®ç»‘å®š</code>å·²ç»æ˜¯å…¶æœ€æœ€åŸºç¡€çš„ä¸€éƒ¨åˆ†äº†ã€‚è™½ç„¶å¦‚æ­¤ï¼Œä¸ºäº†æ–‡ç« çš„å®Œæ•´æ€§ï¼Œè¿™é‡Œè¿˜æ˜¯ä¼šç®€å•ä»‹ç»<code>Mustache</code>å’Œ<code>Handlebars</code>ä¸¤ä¸ªç±»åº“åœ¨JSONè½¬æ¢ä¸­çš„è¿ç”¨ã€‚</p>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>Mustache</strong></span></p>
<p><strong><code>ç®€ä»‹</code></strong> Mustacheä½¿ç”¨å£°æ˜å¼æ¨¡æ¿æ¥è½¬æ¢æ•°æ®æ ¼ã€‚<br><strong><code>èµ„æ–™</code></strong> <a target="_blank" rel="noopener" href="https://mustache.github.io/">Mustache</a>ã€<a target="_blank" rel="noopener" href="https://github.com/mustache/mustache.github.com">Mustache Github</a>ã€<a target="_blank" rel="noopener" href="http://mustache.github.io/mustache.5.html">Mustache 5è¯´æ˜æ–‡æ¡£</a><br><strong><code>ä¼˜åŠ¿</code></strong> ä½¿ç”¨æ¨¡æ¿å¯ä»¥ä»ä»£ç ä¸­æŠ½å–å…·ä½“çš„æ•°æ®ä¿¡æ¯ï¼Œå¹¶å°†æ•°æ®ä¿å­˜åœ¨å¤–éƒ¨çš„æ–‡ä»¶ä¸­ï¼Œå®ç°å…³æ³¨ç‚¹åˆ†ç¦»ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘å°†é€šè¿‡ä¸€ä¸ªç®€çŸ­çš„ç¤ºä¾‹æ¥è¯´æ˜Mustacheçš„è¯­æ³•ä»¥åŠå…¶ä½¿ç”¨æ–¹å¼ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/flowerField/Source/blob/master/Blog/Tem-TEST.zip">æ‚¨å¯ä»¥ç‚¹å‡»è¯¥é“¾æ¥è·å–å®Œæ•´çš„é¡¹ç›®å†…å®¹</a>ã€‚ä¸ºäº†å¯¹ä»‹ç»Mustacheçš„ä½¿ç”¨ï¼Œè¿™é‡Œæˆ‘åˆ—å‡ºé¡¹ç›®ä¸­çš„éƒ¨åˆ†å†…å®¹å¹¶åšç®€è¦è¯´æ˜ã€‚</p>
<p>001 åˆ—å‡ºæ¨¡æ¿æ ¸å¿ƒå†…å®¹</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//å¤‡æ³¨ï¼š../Tem-TEST/src/index.mustacheæ–‡ä»¶çš„æ ¸å¿ƒå†…å®¹</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tb&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>interest<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-type<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-number<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;#person&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;email&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;interest.1&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            &#123;&#123;#car&#125;&#125;</span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;type&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;number&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            &#123;&#123;/car&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;/person&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>002 åˆ—å‡ºå•å…ƒæµ‹è¯•ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤‡æ³¨ï¼š../Tem-TEST/test/mustache-test.jsæ–‡ä»¶å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> expect = <span class="built_in">require</span>(<span class="string">&quot;chai&quot;</span>).expect;</span><br><span class="line"><span class="keyword">var</span> jsonfile = <span class="built_in">require</span>(<span class="string">&quot;jsonfile&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> mustache = <span class="built_in">require</span>(<span class="string">&quot;mustache&quot;</span>);</span><br><span class="line"></span><br><span class="line">describe(<span class="string">&quot;wendingding-mustache-test&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">//æ–‡ä»¶çš„ç›®å½•ç»“æ„ï¼šjsonæ–‡ä»¶è·¯å¾„ + æ¨¡æ¿æ–‡ä»¶è·¯å¾„ + ç›®æ ‡æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">    <span class="keyword">var</span> jsonFileFullPath     = __dirname + <span class="string">&quot;/../src/data.json&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> templateFileFullPath = __dirname + <span class="string">&quot;/../src/index.mustache&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> targetFileFunllPath  = __dirname + <span class="string">&quot;/../src/index.html&quot;</span>;</span><br><span class="line"></span><br><span class="line">    it(<span class="string">&quot;JSON -&gt; HTML&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">done</span>)</span>&#123;</span><br><span class="line">        jsonfile.readFile(jsonFileFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonFileError,jsonData</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!readJsonFileError)</span><br><span class="line">            &#123;</span><br><span class="line">                fs.readFile(templateFileFullPath,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readTemplateFileError,templateData</span>)</span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(!readTemplateFileError)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">var</span> template = templateData.toString();</span><br><span class="line">                        <span class="keyword">var</span> html = mustache.render(template,jsonData);</span><br><span class="line"></span><br><span class="line">                        fs.writeFile(targetFileFunllPath, html,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">if</span> (!errorStatus) &#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">&quot;è½¬æ¢æˆåŠŸå¹¶ä¿å­˜ä¸ºHTMLæ–‡ä»¶ï¼&quot;</span>);</span><br><span class="line">                                done();</span><br><span class="line">                            &#125;<span class="keyword">else</span></span><br><span class="line">                            &#123;</span><br><span class="line">                                done(errorStatus);</span><br><span class="line">                            &#125;  </span><br><span class="line">                         &#125;); </span><br><span class="line">                    &#125;<span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        done(readTemplateFileError)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                done(readJsonFileError)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡<code>$ npm test</code>æ‰§è¡Œå•å…ƒæµ‹è¯•ä»£ç ï¼Œå°†ä¼šæ‰§è¡ŒJSONæ•°ç»„åˆ°HTMLçš„è½¬æ¢ï¼Œå¤„ç†å®Œæ¯•åç»“æœä¿å­˜åˆ°index.htmlæ–‡ä»¶ä¸­ï¼Œä¸‹é¢è´´å‡ºè¯¥é¡µé¢çš„æ•ˆæœå›¾ã€‚</p>
<img src='../../../../src/json_07.png'>

<blockquote>
<p><strong>Mustacheæ¨¡æ¿å·¥ä½œæœºåˆ¶</strong><br>â  æ¨¡æ¿åŸºäºHTML,  Mustacheä½¿ç”¨JSONæ•°æ®æ¥è§£ææ ‡ç­¾ã€‚<br>â  æ¨¡æ¿ä¸­çš„æ ‡ç­¾å¯ä»¥è¡¨ç¤ºå•ä¸ªå­—æ®µï¼Œä½¿ç”¨<code>åŒå¤§æ‹¬å·</code>çš„å½¢å¼æ¥åŒ…è£¹ã€‚<br>â  æ¨¡æ¿ä¸­çš„åŒºå—éƒ½éœ€è¦ç”±<code>å¼€å§‹æ ‡ç­¾å’Œç»“å°¾æ ‡ç­¾</code>ç»„æˆï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­çš„personã€‚<br>â  æ¨¡æ¿ä¸­çš„åŒºå—å¯¹åº”JSONæ•°æ®ä¸­çš„æ•°ç»„æˆ–è€…æ˜¯å¯¹è±¡ï¼Œä¾‹å¦‚ä¸Šä¾‹ä¸­çš„personå’Œcarã€‚<br>â  æ¨¡æ¿ä¸­çš„åŒºå—å¯ä»¥ä¸ºå†…éƒ¨çš„æ ‡ç­¾å®šä¹‰ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚caråŒºå—å†…éƒ¨çš„typeå’Œnumberã€‚</p>
</blockquote>
<p><strong><code>Mustacheå·¥å…·(å‘½ä»¤è¡Œ &amp;&amp; åœ¨çº¿ç½‘ç«™)</code></strong></p>
<p>Mustacheé™¤ä¸Šé¢æ¼”ç¤ºçš„ä½¿ç”¨æ–¹å¼ä¹‹å¤–ï¼Œè¿˜èƒ½ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ï¼Œä¸‹é¢ç»™å‡ºç®€çŸ­çš„ä½¿ç”¨ç¤ºä¾‹ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">(1) å…¨å±€å®‰è£…Mustacheæ¨¡å—ã€‚</span><br><span class="line">$ npm install -g mustache </span><br><span class="line"></span><br><span class="line">(2) æ‰§è¡Œmustacheå‘½ä»¤è½¬æ¢ã€‚</span><br><span class="line">$ mustache /Users/æ–‡é¡¶é¡¶/Desktop/Tem-TEST/src/data.json /Users/æ–‡é¡¶é¡¶/Desktop/Tem-TEST/src/index.mustache &gt; target.html</span><br><span class="line"></span><br><span class="line">$ open target.html</span><br></pre></td></tr></table></figure>

<img src='../../../../src/json_08.png'>

<p>è¿™é‡Œå†æ¨èä¸€æ¬¾å¥½ç”¨çš„åœ¨çº¿æ¨¡æ¿ç¼–è¾‘å™¨<a target="_blank" rel="noopener" href="http://rowno.github.io/architect/">Architect</a>ï¼Œä½¿ç”¨è¯¥å·¥å…·å¯ä»¥æœ‰æ•ˆçš„ç®€åŒ–æµ‹è¯•å’Œå¼€å‘æ¨¡æ¿çš„å·¥ä½œï¼Œå½“ä¿®æ”¹æ¨¡æ¿çš„æ—¶å€™ï¼Œå¯ä»¥å®æ—¶çš„çœ‹åˆ°æ¸²æŸ“çš„ç»“æœã€‚è¯¥ç½‘ç«™æ”¯æŒå¤šæ¬¾ä¸»æµæ¨¡æ¿å¼•æ“(åŒ…æ‹¬<span style='color:#f09'><strong>doT.jsã€Dustjsã€EJSã€Handlebars.jsã€Hogan.jsã€Jadeã€Mustacheã€Nunjuckså’ŒUnderscore.jsç­‰</strong></span>)çš„ç¼–è¾‘å’Œæ¸²æŸ“ï¼Œå¯ä»¥æœ‰æ•ˆçš„åŠ é€Ÿå¼€å‘å’Œè°ƒè¯•å·¥ä½œã€‚</p>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>Handlebars</strong></span></p>
<p><strong><code>ç®€ä»‹</code></strong> <a target="_blank" rel="noopener" href="http://handlebarsjs.com/">Handlebars</a>æ˜¯Mustacheçš„æ‰©å±•ï¼Œä½¿ç”¨hashæˆ–å¯¹è±¡æ¥æ¸²æŸ“æ¨¡æ¿ä¸­çš„æ ‡ç­¾ã€‚<br><strong><code>èµ„æ–™</code></strong> <a target="_blank" rel="noopener" href="http://handlebarsjs.com/">Handlebars</a>ã€<a target="_blank" rel="noopener" href="https://github.com/wycats/handlebars.js/">Handlebars Github</a>ã€<a target="_blank" rel="noopener" href="http://rowno.github.io/architect/">Architect</a>ã€<a target="_blank" rel="noopener" href="http://tryhandlebarsjs.com/">åœ¨çº¿æµ‹è¯•ç½‘ç«™</a>ã€<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/handlebars">Handlebarsçš„Nodeæ¨¡å—</a><br><strong><code>è¯´æ˜</code></strong> Handlebarsä¸Mustacheé«˜åº¦å…¼å®¹ï¼Œç›¸å¯¹è€Œè¨€Handlebarsè‡ªèº«å¢åŠ äº†ä¸€äº›ç‰¹æ€§æ¥å¢å¼ºè½¬æ¢æ“ä½œã€‚å®ƒä»¬çš„å·®å¼‚ä¸»è¦åœ¨äºHandlebarsæä¾›äº†<code>if</code>å’Œ<code>unless</code>ç­‰å†…è”çš„è¾…åŠ©è¯­å¥ä¸”å…è®¸å¼€å‘è€…é€šè¿‡æ³¨å†Œè‡ªå®šä¹‰è¾…åŠ©è¯­ä¹‰çš„æ–¹å¼æ¥è¿›è¡Œæ‰©å±•ï¼ŒåŠŸèƒ½æ›´åŠ å¼ºå¤§ã€‚</p>
<p><strong><code>ä¼˜åŠ¿</code></strong></p>
<ul>
<li>æ¨¡æ¿è¯­è¨€ä¸°å¯Œï¼Œèƒ½æ»¡è¶³å¤§å¤šæ•°çš„è½¬æ¢éœ€æ±‚ã€‚</li>
<li>æ‹¥æœ‰ä¼˜ç§€çš„åœ¨çº¿ç¼–è¾‘å’Œæµ‹è¯•å·¥å…·ç”¨èµ·æ¥æ›´åŠ æ–¹ä¾¿ã€‚</li>
<li>é‡‡ç”¨å£°æ˜å¼ï¼Œä½†ä¹Ÿæ”¯æŒåœ¨è‡ªå®šä¹‰è¾…åŠ©æŒ‡ä»¤ä¸­ç¼–å†™é€»è¾‘ä»£ç ã€‚</li>
<li>å› ä¸ºæ‹¥æœ‰å†…ç½®çš„æ¡ä»¶é€»è¾‘ï¼Œæ‰€ä»¥åœ¨æ¸²æŸ“çš„æ—¶å€™å‡ ä¹å¯ä»¥ä¸ç”¨ç¼–å†™é¢å¤–çš„å¤„ç†ä»£ç ã€‚</li>
<li>è·¨å¹³å°çš„æ”¯æŒåº¦å¾ˆå¥½ï¼Œæ”¯æŒ<code>JavaScript</code>ã€<code>Node.js</code>ã€<code>Java</code>å’Œ<code>Ruby on Rails</code>ç­‰å¹³å°ã€‚</li>
</ul>
<p>è¿™é‡Œå°†ç®€å•ä»‹ç»Handlebarsåœ¨Nodeä¸­çš„ä½¿ç”¨ï¼Œå¹¶æä¾›nodeå’Œå‘½ä»¤è¡Œä¸¤ç§æ‰§è¡Œç¤ºä¾‹ä¾›å‚è€ƒï¼Œæ›´å¤šçš„ç»†èŠ‚è¯·è‡ªè¡Œå‚è€ƒå…¶å®˜ç½‘æ–‡æ¡£ã€‚</p>
<p><strong>001 åˆ—å‡ºæ¨¡æ¿æ–‡ä»¶çš„æ ¸å¿ƒä»£ç </strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">//å¤‡æ³¨(1)ï¼š/Users/æ–‡é¡¶é¡¶/Desktop/Handlebars-Test/index.hbsæ–‡ä»¶çš„æ ¸å¿ƒå†…å®¹</span><br><span class="line">//å¤‡æ³¨(2)ï¼šè½¬æ¢è¿‡ç¨‹ä¸­ä½¿ç”¨çš„jsonæ•°æ®ä¸ºå‰æ–‡ä¸­çš„data.jsonæ–‡ä»¶</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">&quot;tb&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>name<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>age<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>email<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-type<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">th</span>&gt;</span>car-Other<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;#each person&#125;&#125;</span><br><span class="line">        &#123;&#123;#if car&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;email&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>&#123;&#123;car.type&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>å·ç ï¼š&#123;&#123;car.number&#125;&#125;  |  ä»·æ ¼ï¼š&#123;&#123;car.price&#125;&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">        &#123;&#123;/if&#125;&#125;</span><br><span class="line">        &#123;&#123;/each&#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>002 åˆ—å‡ºå‘½ä»¤è¡Œæ‰§è¡Œçš„ç»†èŠ‚</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(1) å…ˆé€šè¿‡å‘½ä»¤è¡Œå…¨å±€å®‰è£…hb-interpolateæ¨¡å—</span><br><span class="line">$ npm install -g hb-interpolate</span><br><span class="line"></span><br><span class="line">(2) æ‰§è¡Œæ¸²æŸ“å‘½ä»¤ã€‚</span><br><span class="line">$ hb-interpolate -j /Users/æ–‡é¡¶é¡¶/Desktop/Handlebars-Test/data.json -t  /Users/æ–‡é¡¶é¡¶/Desktop/Handlebars-Test/index.hbs &gt; target.html</span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜</strong> ä¸Šé¢çš„å‘½ä»¤è¡Œä¸­<code>-j</code>è¡¨ç¤ºåé¢è·Ÿçš„æ˜¯jsonæ–‡ä»¶ï¼Œ<code>-t</code>è¡¨ç¤ºåé¢è·Ÿçš„æ˜¯æ¨¡æ¿æ–‡ä»¶ï¼Œè½¬æ¢åçš„ç»“æœè¢«è¾“å‡ºå¹¶ä¿å­˜åˆ°target.htmlæ–‡ä»¶ä¸­ã€‚åœ¨æ¨¡æ¿æ–‡ä»¶ä¸­çš„<code>#each</code>è¡¨ç¤ºéå†æ•°ç»„ï¼Œ<code>#if</code>æ˜¯é€»è¾‘æ§åˆ¶æŒ‡ä»¤ï¼Œåœ¨æ¸²æŸ“çš„æ—¶å€™è¿‡æ»¤äº†carä¸ºnullçš„æ•°æ®æƒ…å†µï¼Œæµè§ˆå™¨æ‰“å¼€target.htmlæ–‡ä»¶å¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æ˜¾ç¤ºç»“æœã€‚</p>
<img src='../../../../src/json_09.png'>

<p><strong>003 Handlebarsåœ¨Nodeä¸­çš„ä½¿ç”¨</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¤‡æ³¨ï¼šhandlebars-test.jsæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line"><span class="comment">//001 å¯¼å…¥nodeæ¨¡æ¿</span></span><br><span class="line"><span class="keyword">var</span> fs          = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> jsonfile    = <span class="built_in">require</span>(<span class="string">&quot;jsonfile&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> handlebars  = <span class="built_in">require</span>(<span class="string">&quot;handlebars&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 å¤„ç†æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> jsonFullPath     = __dirname + <span class="string">&quot;/data.json&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> templateFullPath = __dirname + <span class="string">&quot;/index.hbs&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> outPutFullPath  = __dirname + <span class="string">&quot;/output.html&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 è¯»å–JSONæ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">jsonfile.readFile(jsonFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonError,jsonData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!readJsonError)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//004 è¯»å–æ¨¡æ¿æ–‡ä»¶çš„å†…å®¹</span></span><br><span class="line">        fs.readFile(templateFullPath,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readTemplateError,templateData</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(!readTemplateError)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//005 JSONæ•°æ® + æ¨¡æ¿ = &gt; æ¸²æŸ“</span></span><br><span class="line">                <span class="keyword">var</span> template = handlebars.compile(templateData);</span><br><span class="line">                <span class="keyword">var</span> html = template(jsonData);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//006 æŠŠæ¸²æŸ“åçš„ç»“æœä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­</span></span><br><span class="line">                fs.writeFile(outPutFullPath, html,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span>(! errorStatus)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">&quot;æ¸²æŸ“æˆåŠŸï¼è¯·æ‰“å¼€&quot;</span>+outPutFullPath+<span class="string">&quot;æŸ¥çœ‹ç»“æœ!&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><strong>è¯´æ˜</strong> åœ¨æŒ‡å®šæ–‡ä»¶ç›®å½•ä¸­(æˆ‘è¿™é‡Œæ˜¯<code>/Users/æ–‡é¡¶é¡¶/Desktop/Handlebars-Test</code>)åˆ›å»ºhandlebars-test.jsæ–‡ä»¶ï¼Œå¹¶ç¼–å†™ä¸Šè¿°å¯¹åº”çš„ä»£ç ã€‚é€šè¿‡å‘½ä»¤è¡Œå®‰è£…å¿…è¦çš„Nodeæ¨¡å—ï¼Œæ‰§è¡Œå³å¯å¾—åˆ°å‰æ–‡æ‰€ç¤ºçš„å›¾ç‰‡ç»“æœã€‚ä¸‹é¢ç»™å‡ºå‘½ä»¤è¡Œæ‰§è¡Œçš„ç»†èŠ‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(1) åˆ‡æ¢åˆ°å½“å‰ç›®å½•</span><br><span class="line">$ <span class="built_in">cd</span> Handlebars-Test/</span><br><span class="line">$ <span class="built_in">pwd</span> </span><br><span class="line">/Users/æ–‡é¡¶é¡¶/Desktop/Handlebars-Test</span><br><span class="line"></span><br><span class="line">(2) ä½¿ç”¨npmåˆå§‹åŒ–å¹¶å®‰è£…å¿…è¦çš„Nodeæ¨¡å—ã€‚</span><br><span class="line">$ npm init</span><br><span class="line">$ npm install --save-dev jsonfile</span><br><span class="line">$ npm install --save-dev handlebars</span><br><span class="line"></span><br><span class="line">(3) æ‰§è¡Œã€‚</span><br><span class="line">$ node handlebars-test.js</span><br></pre></td></tr></table></figure>

<p><strong>è¡¥å……</strong> Mustacheå’ŒHandlebarsé™¤ç”¨æ¥æŠŠJSONè½¬æ¢ä¸ºHTML(æ¸²æŸ“)ä¹‹å¤–ï¼Œè¿˜èƒ½å¤Ÿå¯¹JSONæ•°æ®æœ¬èº«çš„æ ¼å¼è¿›è¡Œè½¬æ¢å·¥ä½œ(ä¸»è¦æ˜¯å¯¹JSONæ•°æ®è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œè­¬å¦‚åˆ å‡æˆ–ç»“æ„è°ƒæ•´ç­‰)ï¼Œä½†Mustacheåœ¨å…·ä½“è¿›è¡Œæ ¼å¼åŒ–çš„æ—¶å€™å› ä¸ºæ— æ³•ç¡®å®šå½“å‰æ‰€å¤„ç†çš„å…ƒç´ æ˜¯å¦ä¸ºæ•°ç»„æˆ–å¯¹è±¡çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼Œæ‰€ä»¥å¯èƒ½å­˜åœ¨<span style='color:#f09'>â€œæ— è°“é€—å·â€</span>çš„é—®é¢˜ã€‚Handlebarså¯ä»¥é€šè¿‡ä½¿ç”¨<code>#unless å’Œ@last</code>çš„å½¢å¼å¯¹â€æ— è°“é€—å·â€çš„é—®é¢˜è¿›è¡Œè§„é¿ï¼Œå…·ä½“çš„ç»†èŠ‚è¯·å‚è€ƒå…¶å®˜æ–¹æ–‡æ¡£è¯´æ˜ã€‚å¦å¤–ï¼ŒJSONæ ¼å¼è½¬æ¢çš„å·¥å…·åœ¨Nodeç¯å¢ƒä¸­æ¨èä½¿ç”¨<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json2json">Json2Json</a>å’Œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/jsonapter">jsonapter</a>ï¼Œä¹Ÿå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json-patch">JSON Patch</a>å’Œ<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/json-templater">JSON-T</a>çš„å®ç°ï¼Œè¿™é‡Œä¸å†å±•å¼€ã€‚</p>
<h4 id="JSONæ•°æ®-â†â†’-XMLæ–‡æ¡£"><a href="#JSONæ•°æ®-â†â†’-XMLæ–‡æ¡£" class="headerlink" title="JSONæ•°æ® â†â†’ XMLæ–‡æ¡£"></a>JSONæ•°æ® â†â†’ XMLæ–‡æ¡£</h4><p>æœ€åç®€å•ä»‹ç»JSONæ•°æ®å’ŒXMLæ•°æ®ä¹‹é—´çš„ç›¸äº’è½¬æ¢ï¼Œè™½ç„¶è¿™ç§åœºæ™¯é€šå¸¸å¯èƒ½å¾ˆå°‘å‡ºç°(å› ä¸ºå¼€å‘ä¸­å¸¸è§çš„åœºæ™¯ä¸€èˆ¬æ˜¯å¯¹JSONæˆ–XMLæ•°æ®è¿›è¡Œåºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¤„ç†ï¼ŒJSONå’ŒXMLä¸¤ç§æ•°æ®æ ¼å¼ä¹‹é—´ç›´æ¥ç›¸äº’è½¬æ¢çš„æƒ…å†µçœŸçš„å¾ˆå°‘è§)ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://www.xml.com/">XML</a>å…¨ç§°<code>Extensible Markup Language</code>(å¯æ‰©å±•æ ‡è®°è¯­è¨€)ï¼Œä¸»è¦æµè¡Œäº(1998~2008å¹´)ã€‚åŒJSONç±»ä¼¼ï¼ŒXMLä¹Ÿèƒ½ç”¨äºè¡¨ç¤ºå’Œä¼ è¾“æ•°æ®ï¼Œç°åœ¨å¾ˆå¤šå¤§å…¬å¸çš„APIéƒ½æä¾›XMLå’ŒJSONä¸¤ç§æ ¼å¼çš„æ•°æ®å“åº”ã€‚</p>
<p>XMLæ•°æ®å’ŒJSONæ•°æ®çš„è½¬æ¢éš¾æ˜“ç¨‹åº¦ä¸»è¦çœ‹XMLæ–‡æ¡£çš„ç»“æ„ï¼Œå¦‚æœæ–‡æ¡£ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½ä»¥XMLå…ƒç´ å’Œæ–‡æœ¬çš„æ–¹å¼ä¿å­˜é‚£ä¹ˆè½¬æ¢ä¸ºJSONæ•°æ®æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¦‚æœXMLæ–‡æ¡£çš„å…ƒç´ ä¸Šå­˜åœ¨è¿™å¤§é‡çš„å±æ€§èŠ‚ç‚¹(<span style='color:#f09'>æ—©å¹´çš„æ—¶å€™å¾ˆå¤šXMLçš„è®¾è®¡äººå‘˜æŠŠæ•°æ®ä¿å­˜åœ¨XMLçš„å±æ€§èŠ‚ç‚¹ä¸Šï¼Œè¿™æ ·æœ‰åŠ©äºå‡å°‘æ–‡ä»¶ä½“ç§¯å’Œç®€åŒ–å¤šå¹³å°ä¹‹é—´çš„è½¬æ¢å·¥ä½œ</span>)ï¼Œé‚£ä¹ˆè¿™ç§è½¬æ¢å°±ä¼šæ¯”è¾ƒå›°éš¾ã€‚ä¸è¿‡ï¼Œå¥½åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¾ˆå¤šç°æˆçš„å·¥å…·(è­¬å¦‚ï¼šParkerå’Œ<a target="_blank" rel="noopener" href="http://www.jsonml.org/">JsonML</a>ä»¥åŠ<a target="_blank" rel="noopener" href="http://badgerfish.ning.com/">Badgerfish</a>ç­‰)æ¥å®Œæˆè¿™ç§å…·ä½“çš„è½¬æ¢å·¥ä½œã€‚</p>
<p>å¯¹äºä¸Šé¢è¿™äº›å·¥å…·çš„å…·ä½“ä½¿ç”¨æƒ…å†µï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œäº†è§£ã€‚éœ€è¦è¯´æ˜çš„æ˜¯å³ä¾¿å¦‚æ­¤ï¼Œè¿™äº›å·¥å…·ä»ç„¶å­˜åœ¨å¾ˆå¤§çš„å±€é™æ€§(è­¬å¦‚<code>æ–‡æ¡£ä¸å…¨</code>ã€<code>ç¼ºä¹è·¨å¹³å°çš„æ”¯æŒ</code>å’Œ<code>å®Œæ•´å®ç°</code>ä»¥åŠ<code>æœ‰æŸè½¬æ¢</code>ç­‰ç­‰)ã€‚æ‰€ä»¥ï¼Œåœ¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­å…¶å®å¯ä»¥è€ƒè™‘å…ˆæŠŠJSON|XMLè½¬æ¢ä¸ºå½“å‰ç¼–ç¨‹è¯­è¨€ä¸­çš„æ•°æ®ç»“æ„å½¢å¼ï¼Œç„¶åå†è½¬æ¢æˆXML|JSON)ã€‚ä¸‹é¢ä»¥JavaScript(Node)å¹³å°ä¸ºä¾‹åŠ ä»¥ç®€å•è¯´æ˜ã€‚</p>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>XMLæ–‡æ¡£ â†’ JSONæ•°æ®</strong></span></p>
<ul>
<li>å…ˆæŠŠXMLæ•°æ®è§£æä¸ºJavaScriptä¸­çš„å¯¹è±¡|æ•°ç»„(<code>xml2jsæ¨¡å—</code>)ã€‚</li>
<li>æŠŠJavaScriptçš„å¯¹è±¡|æ•°ç»„åºåˆ—åŒ–ä¸ºJSONæ ¼å¼çš„æ•°æ®(<code>JSON.stringifyæ–¹æ³•</code>)ã€‚</li>
</ul>
<p>åˆ—å‡ºæ ¸å¿ƒç¤ºä¾‹ä»£ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xmlFullPath      = __dirname + <span class="string">&quot;/data.xml&quot;</span>;</span><br><span class="line">fs.readFile(xmlFullPath,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">readFileError,xmlData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> parser = <span class="keyword">new</span> xml2js.Parser();</span><br><span class="line">    parser.parseString(xmlData,<span class="function"><span class="keyword">function</span>(<span class="params">error,xmlObj</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(xmlObj,<span class="literal">null</span>,<span class="number">2</span>));</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;'><strong>JSONæ•°æ® â†’ XMLæ–‡æ¡£</strong></span></p>
<ul>
<li>å…ˆå°†JSONæ•°æ®è§£æ(ååºåˆ—åŒ–)ä¸ºJavaScriptä¸­çš„å¯¹è±¡|æ•°ç»„æ•°æ®(<code>evalå‡½æ•°æˆ–è€…æ˜¯JSON.parseæ–¹æ³•</code>)ã€‚</li>
<li>æ ¹æ®JavaScriptæ•°æ®æ¥ç”Ÿæˆ(marshaling)å¯¹åº”çš„XMLæ–‡æ¡£(<code>xml2jsæ¨¡å—</code>)</li>
</ul>
<p>è¿™é‡Œåˆ—å‡ºjsonæ•°æ®è½¬æ¢ä¸ºxmlæ•°æ®çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 å¯¼å…¥nodeæ¨¡æ¿</span></span><br><span class="line"><span class="keyword">var</span> fs          = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> xml2js      = <span class="built_in">require</span>(<span class="string">&quot;xml2js&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> jsonfile    = <span class="built_in">require</span>(<span class="string">&quot;jsonfile&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 å¤„ç†æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="keyword">var</span> jsonFullPath     = __dirname + <span class="string">&quot;/data.json&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> xmlFullPath      = __dirname + <span class="string">&quot;/data.xml&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 è¯»å–JSONæ–‡ä»¶çš„å†…å®¹å¹¶è§£æä¸ºJavaScriptå¯¹è±¡(jsonData)</span></span><br><span class="line">jsonfile.readFile(jsonFullPath,<span class="function"><span class="keyword">function</span>(<span class="params">readJsonError,jsonData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!readJsonError)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//004 åˆ›å»ºå¹¶è¿”å›buliderå®ä¾‹å¯¹è±¡</span></span><br><span class="line">        <span class="keyword">var</span> bulider = <span class="keyword">new</span> xml2js.Builder();</span><br><span class="line">        <span class="comment">//005 ä½¿ç”¨buliderå¯¹è±¡å°†jsonDataè½¬æ¢ä¸ºxmlæ ¼å¼çš„å­—ç¬¦ä¸²</span></span><br><span class="line">        <span class="keyword">var</span> xml = bulider.buildObject(jsonData);</span><br><span class="line">        <span class="comment">//006 å†™æ–‡ä»¶æ“ä½œ(æŠŠæœ€ç»ˆçš„æ•°æ®ä¿å­˜åˆ°æŒ‡å®šçš„æ–‡ä»¶ä¸­)</span></span><br><span class="line">        fs.writeFile(xmlFullPath, xml,  <span class="function"><span class="keyword">function</span>(<span class="params">errorStatus</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(! errorStatus)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;json-&gt;XML è½¬æ¢æˆåŠŸ&quot;</span>);</span><br><span class="line">                <span class="built_in">console</span>.log(xml);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>åˆ—å‡ºç”¨äºè½¬æ¢çš„åˆå§‹jsonæ•°æ®ã€‚</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;person&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;age&quot;</span>: <span class="number">18</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;mitaoer&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;mitaoer@126.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;car&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;è‹±è²å°¼è¿ª&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000001&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;price&quot;</span>: <span class="number">200012.66</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;age&quot;</span>: <span class="number">28</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;wendingding&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;hasBrother&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;wenidngding_ios@126.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;car&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: <span class="string">&quot;å¥¥è¿ª&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;number&quot;</span>: <span class="string">&quot;äº¬A 000002&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;price&quot;</span>: <span class="number">200000.66</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åˆ—å‡ºæœ€ç»ˆè¾“å‡ºçš„xmlæ•°æ®å†…å®¹ã€‚</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">person</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">age</span>&gt;</span>18<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>mitaoer<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hasBrother</span>&gt;</span>true<span class="tag">&lt;/<span class="name">hasBrother</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">email</span>&gt;</span>mitaoer@126.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">car</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>è‹±è²å°¼è¿ª<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>äº¬A 000001<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>200012.66<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">car</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">age</span>&gt;</span>28<span class="tag">&lt;/<span class="name">age</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">name</span>&gt;</span>wendingding<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">hasBrother</span>&gt;</span>true<span class="tag">&lt;/<span class="name">hasBrother</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">email</span>&gt;</span>wenidngding_ios@126.com<span class="tag">&lt;/<span class="name">email</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">car</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>å¥¥è¿ª<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">number</span>&gt;</span>äº¬A 000002<span class="tag">&lt;/<span class="name">number</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">price</span>&gt;</span>200000.66<span class="tag">&lt;/<span class="name">price</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">car</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">person</span>&gt;</span></span><br></pre></td></tr></table></figure>

<div class='tip'>æ³¨æ„ï¼šå¦‚æœJSONæ•°æ®ä¸­å­˜åœ¨æ•°ç»„è¿™ç§ç»“æ„é‚£ä¹ˆä½¿ç”¨xml2jsæ¨¡å—çš„å¤„ç†å…¶å®ä¸ç”šç†æƒ³ï¼Œæ›´æ–°ä¿¡æ¯è¯·å‚è€ƒ[å®˜æ–¹æ–‡æ¡£è¯´æ˜](https://www.npmjs.com/package/xml2js)ã€‚</div>


<div class='tip'>**åè®°** ï¼ MDï¼Œè¿™ç¯‡æ–‡ç« å†™äº†æˆ‘å¥½ä¹…ä¸­é—´ä¸€åº¦æ”¾å¼ƒï¼Œç©äº†ä¸¤å¤©å†œè¯ã€‚å¥½åœ¨ï¼Œæˆ‘ç»ˆäºå®Œæˆäº†ã€‚</div>

<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by åšå®¢å›­Â·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">æ–‡é¡¶é¡¶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">èŠ±ç”°åŠäº©</a></li>
<li>è”ç³»ä½œè€… ç®€ä¹¦Â·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">æ–‡é¡¶é¡¶</a> æ–°æµªå¾®åšÂ·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_æ–‡é¡¶é¡¶</a></li>
<li>åŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå£°æ˜ï¼šè‡ªç”±è½¬è½½-éå•†ç”¨-éè¡ç”Ÿ-ä¿æŒç½²å | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">æ–‡é¡¶é¡¶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/04/21/javaScript%E7%B3%BB%E5%88%97%20%5B10%5D-Canvas%E7%BB%98%E5%9B%BE(%E5%9F%BA%E7%A1%80)/" class="prev">ä¸Šä¸€ç¯‡</a><a href="/2018/04/19/javaScript%E7%B3%BB%E5%88%97%20%5B08%5D-javaScript%E5%92%8CJSON(%E8%BF%9B%E9%98%B6)/" class="next">ä¸‹ä¸€ç¯‡</a></div><div class="copyright"><p>Â© 2015 - 2022 <a href="https://weibo.com/u/3800117445">æ–‡é¡¶é¡¶</a> &nbsp;â˜ å…¨ç«™å­—æ•°ç»Ÿè®¡ 421.3k (å­—)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>