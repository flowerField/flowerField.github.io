<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Node系列-fs · 花田半亩</title><meta name="description" content="Node系列-fs - 文顶顶"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/logo.jpeg"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://weibo.com/u/3800117445/atom.xml" title="花田半亩"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="花田半亩" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">文顶顶</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">标签</a></li><li class="nav-list-item"><a href="https://www.cnblogs.com/wendingding/" target="_blank" class="nav-list-link">博客园</a></li><li class="nav-list-item"><a href="https://github.com/flowerField" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Node系列-fs</h1><div class="post-info">Dec 1, 2018<span class="post-count"></span> ✧ 字数统计:5.5k(字) &nbsp;&nbsp; ♨︎ 阅读时长:24(分钟)</div><div class="post-content"><div class='tip'>本文对Node的内置模块fs进行介绍，包括模块的基本情况和简单使用。</div>

<h4 id="1-0-模块介绍"><a href="#1-0-模块介绍" class="headerlink" title="1.0 模块介绍"></a>1.0 模块介绍</h4><p><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v10.x/docs/api/fs.html">fs文件模块(File System)</a>是Node的内置核心模块之一，代码中可以通过<code>var fs = require(&quot;fs&quot;)</code>直接加载和使用，该模块提供了操作文件系统的诸多API，且所有方法均提供了<strong>同步</strong>和<strong>异步</strong>操作两个版本。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ node </span><br><span class="line">&gt; fs</span><br><span class="line">&#123; <span class="attr">constants</span>: &#123; ··省略··· &#125;,</span><br><span class="line">  <span class="attr">Stats</span>: [<span class="built_in">Function</span>: Stats],</span><br><span class="line">  <span class="attr">F_OK</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">R_OK</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">W_OK</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">X_OK</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">access</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">accessSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">exists</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">existsSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readFileSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">close</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">closeSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">open</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">openSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">read</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">write</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">writeSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">rename</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">renameSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">truncate</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">truncateSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">ftruncate</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">ftruncateSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">rmdir</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">rmdirSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fdatasync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fdatasyncSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fsync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fsyncSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">mkdir</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">mkdirSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readdir</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readdirSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fstat</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lstat</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">stat</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fstatSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lstatSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">statSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readlink</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">readlinkSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">symlink</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">symlinkSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">link</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">linkSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">unlink</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">unlinkSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fchmod</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fchmodSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lchmod</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lchmodSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">chmod</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">chmodSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lchown</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">lchownSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fchown</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">fchownSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">chown</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">chownSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">_toUnixTimestamp</span>: [<span class="built_in">Function</span>: toUnixTimestamp],</span><br><span class="line">  <span class="attr">utimes</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">utimesSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">futimes</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">futimesSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">writeFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">writeFileSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">appendFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">appendFileSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">watch</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">watchFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">unwatchFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">realpathSync</span>: [<span class="built_in">Function</span>: realpathSync],</span><br><span class="line">  <span class="attr">realpath</span>: [<span class="built_in">Function</span>: realpath],</span><br><span class="line">  <span class="attr">mkdtemp</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">mkdtempSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">copyFile</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">copyFileSync</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">createReadStream</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">ReadStream</span>: </span><br><span class="line">   &#123; [<span class="built_in">Function</span>: ReadStream]</span><br><span class="line">     <span class="attr">super_</span>: </span><br><span class="line">      &#123; [<span class="built_in">Function</span>: Readable]</span><br><span class="line">        <span class="attr">ReadableState</span>: [<span class="built_in">Function</span>: ReadableState],</span><br><span class="line">        <span class="attr">super_</span>: [<span class="built_in">Object</span>],</span><br><span class="line">        <span class="attr">_fromList</span>: [<span class="built_in">Function</span>: fromList] &#125; &#125;,</span><br><span class="line">  <span class="attr">FileReadStream</span>: </span><br><span class="line">   &#123; [<span class="built_in">Function</span>: ReadStream]</span><br><span class="line">     <span class="attr">super_</span>: </span><br><span class="line">      &#123; [<span class="built_in">Function</span>: Readable]</span><br><span class="line">        <span class="attr">ReadableState</span>: [<span class="built_in">Function</span>: ReadableState],</span><br><span class="line">        <span class="attr">super_</span>: [<span class="built_in">Object</span>],</span><br><span class="line">        <span class="attr">_fromList</span>: [<span class="built_in">Function</span>: fromList] &#125; &#125;,</span><br><span class="line">  <span class="attr">createWriteStream</span>: [<span class="built_in">Function</span>],</span><br><span class="line">  <span class="attr">WriteStream</span>: </span><br><span class="line">   &#123; [<span class="built_in">Function</span>: WriteStream]</span><br><span class="line">     <span class="attr">super_</span>: &#123; [<span class="built_in">Function</span>: Writable] WritableState: [<span class="built_in">Function</span>: WritableState], </span><br><span class="line">     <span class="attr">super_</span>: [<span class="built_in">Object</span>] &#125; &#125;,</span><br><span class="line">  <span class="attr">FileWriteStream</span>: </span><br><span class="line">   &#123; [<span class="built_in">Function</span>: WriteStream]</span><br><span class="line">     <span class="attr">super_</span>: &#123; [<span class="built_in">Function</span>: Writable] WritableState: [<span class="built_in">Function</span>: WritableState],</span><br><span class="line">     <span class="attr">super_</span>: [<span class="built_in">Object</span>] &#125; &#125; &#125;</span><br></pre></td></tr></table></figure>
<p>在该模块中，所有的文件操作都提供了<code>同步</code>和<code>异步</code>两种方法(譬如：<code>readFile</code>和<code>readFileSync</code>方法)。这些方法在使用的时候，其使用方式和参数情况基本都是一致的。</p>
<p><strong>如果是异步方法</strong>，那么其语法形式总是为<code>function (err,callback)</code>，最后一个参数代表操作完成的回调函数，第一个参数通常是操作错误的异常(如果操作成功，该参数的值为<code>null</code>或<code>undefined</code>)，需注意异步方法不能保证执行顺序，如果对多个异步任务的执行顺序有要求，那么应该把后面的任务写在前面任务的回调函数中。</p>
<p><strong>如果是同步方法</strong>，那么任何异常都会立即抛出，可以使用<code>try/catch</code>结构来处理异常。同步方法总是按顺序从上向下执行，是阻塞的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//001 导入内置模块</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 演示同步方法的执行</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//方法说明：追加数据到文件中，如果文件不存在那么就创建</span></span><br><span class="line">    fs.appendFileSync(<span class="string">&#x27;./Hi.text&#x27;</span>, <span class="string">&#x27;文本数据&#x27;</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Success Info：创建文件成功!&#x27;</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span>(err)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;Error Info:&#x27;</span>,err);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//003 演示异步方法的使用</span></span><br><span class="line"><span class="comment">//方法说明：对文件执行重命名操作</span></span><br><span class="line">fs.rename(<span class="string">&#x27;./Hi.text&#x27;</span>, <span class="string">&#x27;./Hello.text&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: 文件重命名成功！&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//方法说明：查看重命名后的文件信息</span></span><br><span class="line">    <span class="comment">//依赖关系：需保证Hello.text文件已经存在</span></span><br><span class="line">    fs.stat(<span class="string">&#x27;./Hello.text&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err, stats</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`File Info: \n <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(stats,<span class="literal">null</span>,<span class="number">4</span>)&#125;</span>`</span>);</span><br><span class="line">      &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>代码说明</strong> 上面给出了同步和异步方法使用的简单示例，代码中首先导入了fs模块，然后在当前目录中使用同步的方法(<code>appendFileSync</code>)来创建<code>Hi.text</code>文件并写入数据，随后调用异步方法(<code>rename</code>)来对文件执行重命名操作，继而打印(<code>stat</code>)该文件的信息。下面列出示例代码的执行细节。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">wendingding$ node app.js </span><br><span class="line">Success Info：创建文件成功!</span><br><span class="line">Success Info: 文件重命名成功！</span><br><span class="line">File Info: </span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;dev&quot;</span>: 16777220,</span><br><span class="line">    <span class="string">&quot;mode&quot;</span>: 33188,</span><br><span class="line">    <span class="string">&quot;nlink&quot;</span>: 1,</span><br><span class="line">    <span class="string">&quot;uid&quot;</span>: 501,</span><br><span class="line">    <span class="string">&quot;gid&quot;</span>: 20,</span><br><span class="line">    <span class="string">&quot;rdev&quot;</span>: 0,</span><br><span class="line">    <span class="string">&quot;blksize&quot;</span>: 4194304,</span><br><span class="line">    <span class="string">&quot;ino&quot;</span>: 8601332359,</span><br><span class="line">    <span class="string">&quot;size&quot;</span>: 12,</span><br><span class="line">    <span class="string">&quot;blocks&quot;</span>: 8,</span><br><span class="line">    <span class="string">&quot;atimeMs&quot;</span>: 1543633694668.5117,</span><br><span class="line">    <span class="string">&quot;mtimeMs&quot;</span>: 1543633694669.2383,</span><br><span class="line">    <span class="string">&quot;ctimeMs&quot;</span>: 1543633694671.2622,</span><br><span class="line">    <span class="string">&quot;birthtimeMs&quot;</span>: 1543633694668.5117,</span><br><span class="line">    <span class="string">&quot;atime&quot;</span>: <span class="string">&quot;2018-12-01T03:08:14.669Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;mtime&quot;</span>: <span class="string">&quot;2018-12-01T03:08:14.669Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;ctime&quot;</span>: <span class="string">&quot;2018-12-01T03:08:14.671Z&quot;</span>,</span><br><span class="line">    <span class="string">&quot;birthtime&quot;</span>: <span class="string">&quot;2018-12-01T03:08:14.669Z&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">wendingding$ cat Hello.text </span><br><span class="line">文本数据</span><br></pre></td></tr></table></figure>

<h4 id="2-0-核心方法"><a href="#2-0-核心方法" class="headerlink" title="2.0 核心方法"></a>2.0 核心方法</h4><p><a target="_blank" rel="noopener" href="https://nodejs.org/dist/latest-v10.x/docs/api/fs.html">fs文件模块(File System)</a>中提供的方法很多，在具体介绍之前，为方便阅读我先简单列出这些方法并对它们进行功能性的区分。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">001</span> 读取和写入文件</span><br><span class="line">open()       打开文件</span><br><span class="line">close()      关闭文件</span><br><span class="line">readFile()   读取文件的完整内容</span><br><span class="line">writeFile()  把完整内容写入文件</span><br><span class="line">read()       读取文件中指定部分的内容</span><br><span class="line">write()      写入指定部分的内容到文件</span><br><span class="line">appendFile() 追加数据到文件，如果文件不存在那么就创建</span><br><span class="line"></span><br><span class="line"><span class="number">002</span> 操作文件目录</span><br><span class="line">mkdir()      创建文件夹(目录)</span><br><span class="line">rmdir()      删除文件夹(目录)</span><br><span class="line">readdir()    读取文件夹(目录)</span><br><span class="line"></span><br><span class="line"><span class="number">003</span> 文件或目录的信息</span><br><span class="line"><span class="comment">//获取信息</span></span><br><span class="line">stat()       查看文件或目录信息</span><br><span class="line">fstat()      查询文件的信息(open方法打开文件后可用)</span><br><span class="line">lstat()      查看文件或目录信息(查看符号连接文件信息 only)</span><br><span class="line">exists()     检查文件或目录是否存在</span><br><span class="line">realpath()   获取文件或目录的绝对路径</span><br><span class="line">access()     检查指定目录或文件的用户权限</span><br><span class="line"></span><br><span class="line"><span class="comment">//修改信息</span></span><br><span class="line">utimes()     修改文件的访问时间和修改时间</span><br><span class="line">futimes()    修改文件的访问时间和修改时间(open方法打开文件后可用)</span><br><span class="line">chmod()      修改文件或目录的读写权限</span><br><span class="line">fchmod()     修改文件或目录的读写权限(open方法打开文件后可用)</span><br><span class="line">rename()     修改文件的名称(重命名)</span><br><span class="line">truncate()   截断文件</span><br><span class="line">ftruncate()  截断文件(open方法打开文件后可用)</span><br><span class="line">watch()      监视文件</span><br><span class="line">watchFile()  监视文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<div style='border:1px solid #000;padding:5px 5px;background:#666;color:#fff'>① 读写文件</div>

<p><span style='border:1px solid #000;padding:5px 20px;background:#195;color:#fff'><strong>readFile 和 readFileSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)读取文件的内容。<br><strong>语法</strong> <code>fs.readFile( path ,[ options ], callback ) | fs.readFileSync( path ,[ options ])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL | integer类型</code>) 指定文件名或文件描述符。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>Object | string类型</code>) 指定编码和处理文件系统的<code>flag值</code>。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行完的回调函数(<code>err, data</code>)，其中data是文件的内容。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">001</span>    文件系统的flag</span><br><span class="line"><span class="string">&#x27;a&#x27;</span>    打开文件用于追加，如不存在则创建。</span><br><span class="line"><span class="string">&#x27;ax&#x27;</span>   类似 <span class="string">&#x27;a&#x27;</span>，但如果文件已存在则抛出异常。</span><br><span class="line"><span class="string">&#x27;a+&#x27;</span>   打开文件用于读取和追加，如不存在则创建。</span><br><span class="line"><span class="string">&#x27;ax+&#x27;</span>  类似 <span class="string">&#x27;a+&#x27;</span>，但如果文件已存在则抛出异常。</span><br><span class="line"><span class="string">&#x27;as&#x27;</span>   以同步模式打开文件用于追加，如不存在则创建。</span><br><span class="line"><span class="string">&#x27;as+&#x27;</span>  以同步模式打开文件用于读取和追加，如不存在则创建。</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;r&#x27;</span>    打开文件用于读取。如不存在则抛出异常。</span><br><span class="line"><span class="string">&#x27;r+&#x27;</span>   打开文件用于读取和写入。如不存在则抛出异常。</span><br><span class="line"><span class="string">&#x27;rs+&#x27;</span>  以同步模式打开文件用于读取和写入。指示操作系统绕开本地文件系统缓存(不建议使用)。</span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;w&#x27;</span>    打开文件用于写入，不存在则创建，存在则截断。</span><br><span class="line"><span class="string">&#x27;wx&#x27;</span>   类似 <span class="string">&#x27;w&#x27;</span>，但如果文件已存在则抛出异常。</span><br><span class="line"><span class="string">&#x27;w+&#x27;</span>   打开文件用于读取和写入，不存在则创建，存在则截断。</span><br><span class="line"><span class="string">&#x27;wx+&#x27;</span>  类似 <span class="string">&#x27;w+&#x27;</span>，但如果文件已存在则抛出异常。</span><br><span class="line"></span><br><span class="line"><span class="number">002</span> 参数使用注意</span><br><span class="line">options参数可以接收对象对象，如&#123;<span class="string">&quot;encoding&quot;</span>:<span class="string">&quot;utf8&quot;</span>,<span class="attr">flag</span>:<span class="string">&#x27;r&#x27;</span>&#125;;</span><br><span class="line">options参数也可以接收字符串，如<span class="string">&quot;utf8&quot;</span>,表示读取文件使用utf编码模式。</span><br><span class="line">默认情况下encoding的值为<span class="literal">null</span>,flag的值为r表示读取文件。</span><br><span class="line"></span><br><span class="line"><span class="number">003</span> fs.readFile() 会缓存整个文件。 为了最小化内存占用，尽可能优先使用 fs.createReadStream()。</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;'><strong>writeFile 和 writeFileSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)写入文件。<br><strong>语法</strong> <code>fs.writeFile(file,data,[ options ],callback) | fs.writeFileSync(file,data,[ options])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> file</span> (<code>string | Buffer | URL | integer类型</code>) 指定完整路径的文件名或文件描述符。</li>
<li><span class='liX' style='width:100px'> data</span> (<code>string | Buffer | TypedArray | DataView类型</code>) 指定需要写入的内容。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>Object | string类型</code>) 配置对象，可选项有<code>encoding、mode和flag</code>。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行完的回调函数(<code>err</code>),参数值为错误对象。</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：readAndWrite.js文件内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="comment">//001 读取文件内容(readFile)</span></span><br><span class="line">fs.readFile(<span class="string">&quot;./Hello.text&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;001 第二个参数省略返回Buffer类型:\n&quot;</span>,data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&quot;./Hello.text&quot;</span>,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;002 第二个参数为字符编码:&quot;</span>,data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">&quot;./Hello.text&quot;</span>,&#123;<span class="string">&quot;encoding&quot;</span>:<span class="string">&quot;utf8&quot;</span>,<span class="attr">flag</span>:<span class="string">&#x27;r&#x27;</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">error,data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;003 第二个参数为对象:&quot;</span>,data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 写入文件内容(writeFile)</span></span><br><span class="line"><span class="keyword">var</span> fullPath = <span class="string">&quot;./Hi.text&quot;</span></span><br><span class="line">fs.writeFile(fullPath,<span class="string">&quot;Beautiful&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="comment">//读取指定文件的内容</span></span><br><span class="line">  <span class="keyword">var</span> textContent = fs.readFileSync(fullPath,<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(textContent);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行和输出的结果为：</span></span><br><span class="line">wendingding$ node readAndWrite.js </span><br><span class="line"><span class="number">001</span> 第二个参数省略返回Buffer类型:</span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">Buffer</span> <span class="attr">e6</span> <span class="attr">96</span> <span class="attr">87</span> <span class="attr">e6</span> <span class="attr">9c</span> <span class="attr">ac</span> <span class="attr">3a</span> <span class="attr">4e</span> <span class="attr">69</span> <span class="attr">63</span> <span class="attr">65</span> <span class="attr">20</span> <span class="attr">74</span> <span class="attr">6f</span> <span class="attr">20</span> <span class="attr">6d</span> <span class="attr">65</span> <span class="attr">65</span> <span class="attr">74</span> <span class="attr">20</span> <span class="attr">75</span> <span class="attr">20</span>&gt;</span></span></span><br><span class="line"><span class="xml">Beautiful</span></span><br><span class="line"><span class="xml">002 第二个参数为字符编码: 文本:Nice to meet u </span></span><br><span class="line"><span class="xml">003 第二个参数为对象: 文本:Nice to meet u </span></span><br></pre></td></tr></table></figure>
<p><strong>说明</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">001</span> 方法说明</span><br><span class="line">在写数据到文件时候，如果文件不存在，则创建文件，如果文件已存在，则覆盖文件。</span><br><span class="line">如果 data 是一个 buffer，则忽略 encoding。</span><br><span class="line">options参数可以是对象，也可以是字符串，如果该参数是一个字符串，则用来指定字符编码。</span><br><span class="line"></span><br><span class="line"><span class="number">002</span> 对同一个文件多次使用 fs.writeFile() 且不等待回调，是不安全的。</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;background:#195;color:#fff'><strong>open 和 openSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)打开文件。<br><strong>语法</strong> <code>fs.open( path, flags , [ mode ], callback ) | fs.openSync( path, flags , [ mode ])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> flags</span> (<code>integer类型</code>) 指定对文件的操作，具体取值参考文件系统的<code>flag</code>值。</li>
<li><span class='liX' style='width:100px'> mode</span> (<code>integer类型</code>) 指定文件的模式，仅在创建时有效(默认可读可写)。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>Function类型</code>) 执行完毕的回调函数(<code>err</code>,<code>fd</code>)。</li>
</ul>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>close 和 closeSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)关闭文件。<br><strong>语法</strong> <code>fs.close( fd, callback ) | fs.closeSync( fd )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> fd</span> (<code>integer类型</code>) 指定的文件描述符。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>Function类型</code>) 执行完毕的回调函数(<code>err</code>, <code>fd</code>)，参数值为错误对象。</li>
</ul>
<p><span style='border:1px solid #000;padding:5px 20px;'>**read 和 readSync <strong></span>  <span style='border:1px solid #000;padding:5px 20px;margin-left:20px'> ** write 和 writeSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)的<a href="">读取</a>或<a href="">写入</a>文件。<br><strong>语法</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同步 | 异步读取文件的内容。</span></span><br><span class="line">fs.readSync(fd, buffer, offset, length, position)</span><br><span class="line">fs.read(fd, buffer, offset, length, position, callback)</span><br><span class="line"></span><br><span class="line"><span class="comment">//同步 | 异步写入数据到文件中。</span></span><br><span class="line">fs.writeSync(fd, buffer, offset, length, position)</span><br><span class="line">fs.write(fd, buffer, offset, length, position, callback)</span><br></pre></td></tr></table></figure>
<p><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> fd</span> (<code>integer类型</code>) 通常为open方法回调中返回的文件描述符。</li>
<li><span class='liX' style='width:100px'> buffer</span> (<code>Buffer | TypedArray | DataView类型</code>)  指定将文件数据读取到哪个缓存区。</li>
<li><span class='liX' style='width:100px'> offset</span> (<code>integer类型</code>) 写入数据的开始位置(字节单位)。</li>
<li><span class='liX' style='width:100px'> length</span> (<code>integer类型</code>) 指定从文件读取的字节数。</li>
<li><span class='liX' style='width:100px'> position</span> (<code>integer类型</code>) 指定读取文件时的开始位置。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>Function类型</code>) 回调函数(<code>err</code>,<code>bytes(Read | Written)</code>,<code>buffer</code>)。</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：openAndClose.js 文件的内容</span></span><br><span class="line"><span class="comment">//备注：在当前目录中先准备好Hi.text文件，内容为Nice !</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> fullPath = <span class="string">&quot;./Hi.text&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> bufferWrite = <span class="keyword">new</span> Buffer(<span class="string">&quot;,请保持微笑 &gt;.&lt;&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> bufferRead = <span class="keyword">new</span> Buffer(<span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;000 打印文件的内容：&quot;</span>,fs.readFileSync(fullPath,<span class="string">&quot;utf8&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//001 打开文件</span></span><br><span class="line"><span class="comment">//语法：fs.open( path, flags , [ mode ], callback ) </span></span><br><span class="line"><span class="comment">//参数：r+表示读取和写入文件，文件不存在则抛出异常</span></span><br><span class="line">fs.open(fullPath,<span class="string">&quot;r+&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,fd</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;001 打开文件成功！&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//002 写入文件</span></span><br><span class="line">  <span class="comment">//语法：fs.write(fd, buffer, offset, length, position, callback)</span></span><br><span class="line">  fs.write(fd,bufferWrite,<span class="number">0</span>,bufferWrite.length,<span class="number">5</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,writtenBytes,bufferData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;002 写入的数据大小:&quot;</span>,writtenBytes);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;002 写入的Buffer数据:&quot;</span>,bufferData);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;002 写入的Buffer数据字符串:&quot;</span>,bufferData.toString());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//003 读取文件内容</span></span><br><span class="line">    <span class="comment">//fs.read(fd, buffer, offset, length, position, callback)</span></span><br><span class="line">    fs.read(fd,bufferRead,<span class="number">0</span>,bufferRead.length,<span class="number">0</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,readBytes,bufferData</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;003 读取的数据大小：&quot;</span>,readBytes);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;003 读取的Buffer数据:&quot;</span>,bufferData);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;003 读取的Buffer数据字符串:&quot;</span>,bufferData.toString());</span><br><span class="line"></span><br><span class="line">      <span class="comment">//004 关闭文件</span></span><br><span class="line">      fs.close(fd,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;004 关闭文件成功！&quot;</span>);</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行细节：</span></span><br><span class="line">wendingding$ node openAndClose.js </span><br><span class="line"><span class="number">000</span> 打印文件的内容： Nice !</span><br><span class="line"></span><br><span class="line"><span class="number">001</span> 打开文件成功！</span><br><span class="line"></span><br><span class="line"><span class="number">002</span> 写入的数据大小: <span class="number">20</span></span><br><span class="line"><span class="number">002</span> 写入的Buffer数据:</span><br><span class="line"> &lt;Buffer 2c e8 af b7 e4 bf 9d e6 8c 81 e5 be ae e7 ac 91 20 3e 2e 3c&gt;</span><br><span class="line">002 写入的Buffer数据字符串: ,请保持微笑 &gt;.&lt;</span><br><span class="line"></span><br><span class="line">003 读取的数据大小： 25</span><br><span class="line">003 读取的Buffer数据: </span><br><span class="line">&lt;Buffer 4e 69 63 65 20 2c e8 af b7 e4 bf 9d e6 8c 81 e5 be ae e7 ac 91 20 3e 2e 3c ···00&gt;</span><br><span class="line">003 读取的Buffer数据字符串: Nice ,请保持微笑 &gt;.&lt;</span><br><span class="line"></span><br><span class="line">004 关闭文件成功！</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;'><strong>appendFile 和 appendFileSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)追加数据到指定文件，如果文件不存在那么就先创建。<br><strong>语法</strong><br><code>fs.appendFileSync(path, data, [options])</code><br><code>fs.appendFile(path, data, [options], callback)</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> data</span> (<code>string | Buffer类型</code>) 追加的具体数据。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>Object | string类型</code>) 配置<code>encoding、flag和mode</code>等字段。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行完的回调函数(<code>err</code>)，参数值为错误对象。</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> filePath = <span class="string">&quot;./Nice.text&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//001 同步追加数据到指定的文件(文件不存在)</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="comment">//语法：fs.appendFileSync(path, data, [options])</span></span><br><span class="line">  fs.appendFileSync(filePath,<span class="string">&quot;妙：Nice!&quot;</span>,&#123;<span class="attr">encoding</span>:<span class="string">&quot;utf8&quot;</span>&#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;创建文件，并追加数据到文件&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">catch</span>(err)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Error Info:&quot;</span>,err);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 异步方法追加数据</span></span><br><span class="line">fs.appendFile(filePath,<span class="string">&quot; Best&quot;</span>,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: 追加数据成功！&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//003 读取文件的内容验证</span></span><br><span class="line">  <span class="keyword">var</span> resultData = fs.readFileSync(filePath,<span class="string">&quot;utf8&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success resultData:&quot;</span>,resultData);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行细节</span></span><br><span class="line">wendingding$ node appendFile.js </span><br><span class="line">创建文件，并追加数据到文件</span><br><span class="line">Success Info: 追加数据成功！</span><br><span class="line">Success resultData: 妙：Nice! Best</span><br><span class="line">wendingding$ cat Nice.text </span><br><span class="line">妙：Nice! Best</span><br></pre></td></tr></table></figure>

<p style='border:1px solid #000;padding:5px 5px;background:#666;color:#fff'>② 目录操作</p>
<span style='border:1px solid #000;padding:5px 20px;'>**mkdir 和 mkdirSync**</span>

<p><strong>作用</strong> 异步(<code>同步</code>)创建文件夹(目录)。<br><strong>语法</strong> <code>fs.mkdir( path , [ options ], callback ) | fs.mkdirSync( path , [ options ] )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>Object | integer类型</code>) 配置选项有<code>recursive</code>(是否创建父目录 10+)和<code>mode</code>。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行完的回调函数(<code>err</code>)，参数值为错误对象。</li>
</ul>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>readdir 和 readSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)读取文件夹(目录)。<br><strong>语法</strong> <code>fs.readdir( path , [ options ] , callback ) | fs.readdirSync( path , [ options ] )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>Object | integer类型</code>) 配置选项有<code>encoding</code>和<code>withFileTypes</code>。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行完的回调函数(<code>err</code>,<code>files</code>)，表示错误对象和目录数组。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Options配置项说明</span><br><span class="line"></span><br><span class="line">[1]字符串作为参数，用于指定字符编码。</span><br><span class="line">[2]对象类型作为参数</span><br><span class="line">  encoding字段设置字符编码，默认为utf8 , 如果 encoding 设为 &#x27;buffer&#x27;，则返回的文件名是 Buffer。</span><br><span class="line">  withFileTypes字段设置回调函数files数组的元素结构，设置为true则数组的元素是fs.Dirent，默认为false。</span><br></pre></td></tr></table></figure>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>rmdir 和 rmdirSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)移除文件夹(目录)。<br><strong>语法</strong> <code>fs.rmdir( path , callback ) | fs.rmdirSync( path )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>function类型</code>)执行完的回调函数(<code>err</code>)，表示错误对象。</li>
</ul>
<p><strong>示例</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：file.js文件内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//001 创建文件目录</span></span><br><span class="line">fs.mkdir(<span class="string">&quot;./test&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: &quot;</span>,<span class="string">&quot;创建目录成功&quot;</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//002 读取目录</span></span><br><span class="line">  fs.readdir(<span class="string">&quot;./nodefs&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">error,files</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: &quot;</span>,<span class="string">&quot;读取目录成功&quot;</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;列出具体的内容:\n &quot;</span>,files);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//003 删除目录</span></span><br><span class="line">    <span class="comment">// fs.rmdir(&quot;./test&quot;,function()&#123;</span></span><br><span class="line">    <span class="comment">//   if(error) throw error;</span></span><br><span class="line">    <span class="comment">//   console.log(&quot;Success Info: &quot;,&quot;删除test目录成功&quot;)</span></span><br><span class="line">    <span class="comment">// &#125;)</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//003 删除目录(遍历删除nodefs下面所有的子目录)</span></span><br><span class="line">    files.forEach(<span class="function"><span class="params">element</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">var</span> fullPath = <span class="string">&quot;./nodefs/&quot;</span> + element;</span><br><span class="line">      <span class="built_in">console</span>.log(fullPath);</span><br><span class="line">      fs.rmdir(fullPath,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(error) <span class="keyword">throw</span> error;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: &quot;</span>,<span class="string">&quot;删除&quot;</span>+fullPath+<span class="string">&quot;目录成功&quot;</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行和输出的结果为：</span></span><br><span class="line">wendingding$ node file.js</span><br><span class="line">Success Info:  创建目录成功</span><br><span class="line">Success Info:  读取目录成功</span><br><span class="line">列出具体的内容:</span><br><span class="line">  [ <span class="string">&#x27;.DS_Store&#x27;</span>, <span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span> ]</span><br><span class="line">./nodefs/.DS_Store</span><br><span class="line">./nodefs/a</span><br><span class="line">./nodefs/b</span><br><span class="line">Success Info:  删除./nodefs/.DS_Store目录成功</span><br><span class="line">Success Info:  删除./nodefs/a目录成功</span><br><span class="line">Success Info:  删除./nodefs/b目录成功</span><br></pre></td></tr></table></figure>
<div style='border:1px solid #000;padding:5px 5px;background:#666;color:#fff'>③ 文件信息</div>


<p><span style='border:1px solid #000;padding:5px 20px;'><strong>access 和 accessSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)检查指定文件或目录的用户权限。<br><strong>语法</strong> <code>fs.access( path, [ mode ], callback ) | fs.accessSync( path , [ mode ])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> callBack</span> (<code>function类型</code>)执行检查完成的回调函数，如果失败则唯一的error参数有值。</li>
<li><span class='liX' style='width:100px'> mode</span> (<code>integer类型</code>)  默认值为<code>fs.constants.F_OK</code>   要执行的可访问性检查。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">001 文件的可访问性常量</span><br><span class="line">F_OK 文件可见 == 0</span><br><span class="line">R_OK 文件可读 == 4</span><br><span class="line">W_OK 文件可写 == 2</span><br><span class="line">X_OK 文件可执行(在 Windows上无效,效果同 fs.constants.F_OK) == 1</span><br><span class="line"></span><br><span class="line">002 使用建议</span><br><span class="line">不建议在调用 fs.open()、fs.readFile() 或 fs.writeFile() 之前使用 fs.access() 检查文件的可访问性。</span><br><span class="line">因为其他进程可能在两个调用的间隙改变文件的状态。 应该直接打开、读取或写入文件，当文件无法访问时再处理错误。</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;'><strong>stat 和 statSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)查看文件的属性。<br><strong>语法</strong> <code>fs.stat( path ,[ options ], callback) | fs.statSync( path )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>对象类型</code>)配置项bigint(布尔类型值)控制数值是否为 bigint 型。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>function类型</code>)回调函数(<code>err</code>,<code>stats</code>)，<code>stats</code>保存文件信息对象。</li>
</ul>
<p><strong>示例</strong> </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：test.js 文件内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//001 stat方法说明：查看文件的属性</span></span><br><span class="line"><span class="comment">//不建议在调用 fs.open()、fs.readFile() 或 fs.writeFile() 之前使用 fs.stat() 检查文件是否存在。</span></span><br><span class="line"><span class="comment">//应该直接打开、读取或写入文件，当文件无效时再处理错误</span></span><br><span class="line">fs.stat(<span class="string">&quot;./app.js&quot;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err,Info</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Success Info:&quot;</span>,Info);</span><br><span class="line">    <span class="comment">//查看是否为文件</span></span><br><span class="line">    <span class="built_in">console</span>.log(Info.isFile());</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//002 statSync方法说明：查看目录(文件夹)属性</span></span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> fileInfo = fs.statSync(<span class="string">&quot;./nodefs&quot;</span>);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success Info:&quot;</span>,fileInfo);</span><br><span class="line">&#125;<span class="keyword">catch</span>(err)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Error Info: &quot;</span>,err);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行和输出的结果为：</span></span><br><span class="line">wendingding$ node test.js </span><br><span class="line">Success Info: Stats &#123;</span><br><span class="line">  <span class="attr">dev</span>: <span class="number">16777220</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">16877</span>,</span><br><span class="line">  <span class="attr">nlink</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="attr">uid</span>: <span class="number">501</span>,</span><br><span class="line">  <span class="attr">gid</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">rdev</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">blksize</span>: <span class="number">4194304</span>,</span><br><span class="line">  <span class="attr">ino</span>: <span class="number">8601434025</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="number">128</span>,</span><br><span class="line">  <span class="attr">blocks</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">atimeMs</span>: <span class="number">1543821747020.0398</span>,</span><br><span class="line">  <span class="attr">mtimeMs</span>: <span class="number">1543821696833.2778</span>,</span><br><span class="line">  <span class="attr">ctimeMs</span>: <span class="number">1543821701216.544</span>,</span><br><span class="line">  <span class="attr">birthtimeMs</span>: <span class="number">1543821692999.7283</span>,</span><br><span class="line">  <span class="attr">atime</span>: <span class="number">2018</span>-<span class="number">12</span>-03T07:<span class="number">22</span>:<span class="number">27.</span>020Z,</span><br><span class="line">  <span class="attr">mtime</span>: <span class="number">2018</span>-<span class="number">12</span>-03T07:<span class="number">21</span>:<span class="number">36.</span>833Z,</span><br><span class="line">  <span class="attr">ctime</span>: <span class="number">2018</span>-<span class="number">12</span>-03T07:<span class="number">21</span>:<span class="number">41.</span>217Z,</span><br><span class="line">  <span class="attr">birthtime</span>: <span class="number">2018</span>-<span class="number">12</span>-03T07:<span class="number">21</span>:<span class="number">33.</span>000Z &#125;</span><br><span class="line">  <span class="literal">true</span></span><br><span class="line">Success Info: Stats &#123;</span><br><span class="line">  <span class="attr">dev</span>: <span class="number">16777220</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">33188</span>,</span><br><span class="line">  <span class="attr">nlink</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">uid</span>: <span class="number">501</span>,</span><br><span class="line">  <span class="attr">gid</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">rdev</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">blksize</span>: <span class="number">4194304</span>,</span><br><span class="line">  <span class="attr">ino</span>: <span class="number">8601330263</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="number">839</span>,</span><br><span class="line">  <span class="attr">blocks</span>: <span class="number">8</span>,</span><br><span class="line">  <span class="attr">atimeMs</span>: <span class="number">1543821852077.4976</span>,</span><br><span class="line">  <span class="attr">mtimeMs</span>: <span class="number">1543633822104.2488</span>,</span><br><span class="line">  <span class="attr">ctimeMs</span>: <span class="number">1543633822104.2488</span>,</span><br><span class="line">  <span class="attr">birthtimeMs</span>: <span class="number">1543632135491.0122</span>,</span><br><span class="line">  <span class="attr">atime</span>: <span class="number">2018</span>-<span class="number">12</span>-03T07:<span class="number">24</span>:<span class="number">12.</span>077Z,</span><br><span class="line">  <span class="attr">mtime</span>: <span class="number">2018</span>-<span class="number">12</span>-01T03:<span class="number">10</span>:<span class="number">22.</span>104Z,</span><br><span class="line">  <span class="attr">ctime</span>: <span class="number">2018</span>-<span class="number">12</span>-01T03:<span class="number">10</span>:<span class="number">22.</span>104Z,</span><br><span class="line">  <span class="attr">birthtime</span>: <span class="number">2018</span>-<span class="number">12</span>-01T02:<span class="number">42</span>:<span class="number">15.</span>491Z &#125;</span><br><span class="line"><span class="attr">bogon</span>:fs wendingding$ </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在上面代码中异步方法回调函数中的<code>Info</code>和同步方法的返回值<code>fileInfo</code>都是<code>fs.Stats</code>类型对象。</p>
<blockquote>
<p><strong><code>fs.Stats</code>对象核心成员</strong><br><span class='spaceX backColor'>mode</span>  当前文件的权限标识。<br><span class='spaceX backColor'>nlink</span>  当前文件的硬链接数量。<br><span class='spaceX backColor' style='background:#195;color:#fff'><strong>size</strong></span>   当前文件的大小(字节数)。<br><span class='spaceX backColor'>atime</span>  当前文件的访问时间。<br><span class='spaceX backColor'>mtime</span>  当前文件的修改时间。<br><span class='spaceX backColor'>ctime</span>  最后改变文件状态的时间。<br><span class='spaceX backColor'>birthtime</span>  创建文件的时间。<br><span class='spaceX backColor' style='width:180px'>isFile（）</span>  是否是一个文件。<br><span class='spaceX backColor' style='width:180px'>isDirectory（）</span> 是否是一个目录。<br><span class='spaceX backColor' style='width:180px'>isSymbolicLink（）</span>  是否是符号链接文件。</p>
</blockquote>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>fstat 和 fstatSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)查看文件的属性。<br><strong>语法</strong> <code>fs.fstat(fd ,[ options ], callback) | fs.fstatSync(fd ,[ options ])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> fd</span> (<code>integer类型</code>) 使用open方法打开后返回的文件描述符。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>对象类型</code>)配置项bigint(布尔类型值)控制数值是否为长整型。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>function类型</code>)回调函数(<code>err</code>,<code>stats</code>)，<code>stats</code>保存文件信息对象。</li>
</ul>
<p><span style='border:1px solid #000;padding:5px 20px;'><strong>realpath 和 realpathSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)计算文件路径，解析 .、.. 与符号链接。<br><strong>语法</strong> <code>fs.realpath(path ,[ options ], callback) | fs.realpathSync(path ,[ options ])</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> path</span> (<code>string | Buffer | URL类型</code>) 指定的文件或路径。</li>
<li><span class='liX' style='width:100px'> options</span> (<code>对象类型</code>)配置项encoding设置字符编码(默认为<code>utf8</code>)。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>function类型</code>)回调函数(<code>err</code>,<code>resolvedPath</code>)，<code>resolvedPath</code>保存完整路径。</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：fileInfo.js文件的内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> fullPath = <span class="string">&quot;./Hi.text&quot;</span>;</span><br><span class="line"><span class="comment">//001 打开文件</span></span><br><span class="line">fs.open(fullPath,<span class="string">&quot;r&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,fd</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: 打开文件成功！&quot;</span>);</span><br><span class="line">  <span class="comment">//002 查看文件信息</span></span><br><span class="line">  <span class="comment">//语法：fs.fstat(fd ,[ options ], callback)</span></span><br><span class="line">  fs.fstat(fd,<span class="function"><span class="keyword">function</span>(<span class="params">err,fileInfo</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;Success fileInfo:&quot;</span>,fileInfo);</span><br><span class="line"></span><br><span class="line">      <span class="comment">//003 打印文件的完整路径</span></span><br><span class="line">      fs.realpath(fullPath,<span class="function"><span class="keyword">function</span>(<span class="params">err,resultPath</span>)</span>&#123;</span><br><span class="line">          <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&quot;Successs Info =&gt; &quot;</span>,resultPath);</span><br><span class="line"></span><br><span class="line">          fs.close(fd,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;Success Info: 关闭文件成功！&quot;</span>);</span><br><span class="line">          &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行细节</span></span><br><span class="line">wendingding$ node fileInfo.js </span><br><span class="line">Success Info: 打开文件成功！</span><br><span class="line">Success fileInfo: Stats &#123;</span><br><span class="line">  <span class="attr">dev</span>: <span class="number">16777220</span>,</span><br><span class="line">  <span class="attr">mode</span>: <span class="number">33188</span>,</span><br><span class="line">  <span class="attr">nlink</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">uid</span>: <span class="number">501</span>,</span><br><span class="line">  <span class="attr">gid</span>: <span class="number">20</span>,</span><br><span class="line">  <span class="attr">rdev</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">blksize</span>: <span class="number">4194304</span>,</span><br><span class="line">  <span class="attr">ino</span>: <span class="number">8601453682</span>,</span><br><span class="line">  <span class="attr">size</span>: <span class="number">25</span>,</span><br><span class="line">  <span class="attr">blocks</span>: <span class="number">8</span>,</span><br><span class="line">  <span class="attr">atimeMs</span>: <span class="number">1543894023563.2808</span>,</span><br><span class="line">  <span class="attr">mtimeMs</span>: <span class="number">1543894022418.2258</span>,</span><br><span class="line">  <span class="attr">ctimeMs</span>: <span class="number">1543894022418.2258</span>,</span><br><span class="line">  <span class="attr">birthtimeMs</span>: <span class="number">1543633825190.9485</span>,</span><br><span class="line">  <span class="attr">atime</span>: <span class="number">2018</span>-<span class="number">12</span>-04T03:<span class="number">27</span>:<span class="number">03</span>.563Z,</span><br><span class="line">  <span class="attr">mtime</span>: <span class="number">2018</span>-<span class="number">12</span>-04T03:<span class="number">27</span>:<span class="number">02</span>.418Z,</span><br><span class="line">  <span class="attr">ctime</span>: <span class="number">2018</span>-<span class="number">12</span>-04T03:<span class="number">27</span>:<span class="number">02</span>.418Z,</span><br><span class="line">  <span class="attr">birthtime</span>: <span class="number">2018</span>-<span class="number">12</span>-01T03:<span class="number">10</span>:<span class="number">25.</span>191Z &#125;</span><br><span class="line">Successs Info =&gt;  <span class="regexp">/Users/</span>文顶顶/Desktop/fs/Hi.text</span><br><span class="line">Success Info: 关闭文件成功</span><br></pre></td></tr></table></figure>

<p><span style='border:1px solid #000;padding:5px 20px;;background:#195;color:#fff'><strong>rename 和 renameSync</strong></span></p>
<p><strong>作用</strong> 异步(<code>同步</code>)对文件进行重命名操作。<br><strong>语法</strong> <code>fs.rename( oldPath, newPath, callback ) | fs.renameSync( oldPath, newPath )</code><br><strong>参数</strong> </p>
<ul>
<li><span class='liX' style='width:100px'> oldPath</span> (<code>string | Buffer | URL类型</code>)原来的文件全路径。</li>
<li><span class='liX' style='width:100px'> newPath</span> (<code>string | Buffer | URL类型</code>)目标文件全路径名称。</li>
<li><span class='liX' style='width:100px'> callback</span> (<code>function类型</code>)回调函数(<code>err</code>)，若文件已存在则覆盖。</li>
</ul>
<p><strong>示例</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//备注：rename.js文件的内容</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> oldPath = <span class="string">&quot;./Hi.text&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> newPath = <span class="string">&quot;./newHi.text&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//001 执行重命名操作</span></span><br><span class="line">fs.rename(oldPath,newPath,<span class="function"><span class="keyword">function</span>(<span class="params">err</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;Success Info:文件重命名成功！&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//002 读取文件的内容</span></span><br><span class="line">  fs.readFile(newPath,<span class="string">&quot;utf8&quot;</span>,<span class="function"><span class="keyword">function</span>(<span class="params">err,fileData</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(err) <span class="keyword">throw</span> err;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Success fileData:&quot;</span>,fileData);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//命令行执行细节</span></span><br><span class="line">wendingding$ node rename.js </span><br><span class="line">Success Info:文件重命名成功！</span><br><span class="line">Success fileData: Nice ,请保持微笑 &gt;.&lt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<img src='../../../../z.png' width="200px">

<hr>
<ul>
<li>Posted by 博客园·<a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a> | <a target="_blank" rel="noopener" href="http://wendingding.com/">花田半亩</a></li>
<li>联系作者 简书·<a target="_blank" rel="noopener" href="http://www.jianshu.com/users/c5703017b9f5/latest_articleshttp://www.jianshu.com/users/c5703017b9f5/latest_articles">文顶顶</a> 新浪微博·<a href="http://weibo.com/p/1005053800117445/home?from=page_100505&mod=TAB#place">Coder_文顶顶</a></li>
<li>原创文章，版权声明：自由转载-非商用-非衍生-保持署名 | <a target="_blank" rel="noopener" href="http://www.cnblogs.com/wendingding/">文顶顶</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2018/12/04/Node%E7%B3%BB%E5%88%97-global/" class="prev">上一篇</a><a href="/2018/11/28/Node%E7%B3%BB%E5%88%97-http/" class="next">下一篇</a></div><div class="copyright"><p>© 2015 - 2022 <a href="https://weibo.com/u/3800117445">文顶顶</a> &nbsp;☁ 全站字数统计 420.5k (字)</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>