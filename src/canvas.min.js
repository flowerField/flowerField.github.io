$(function(){$("<canvas id='canvas' width='1126px' height='540px'></canvas>").appendTo($(".post-content")),$(".container,.wrap").css({margin:"0 20px 50px 20px",padding:0,width:"1000px"}),$(".post-content").css("width","1126px");for(var r=$("#canvas").get(0).getContext("2d"),t=r.canvas.height,e=r.canvas.width,a=Math.floor(e/30),n=0;n<=a;n++)r.beginPath(),r.moveTo(30*n-.5,0),r.lineTo(30*n-.5,t),r.strokeStyle="#1D244F",r.stroke();CanvasRenderingContext2D.prototype.fillTextVertical=function(n,i,o){var s=this,t=(s.canvas,n.split("")),l=t.map(function(t){return s.measureText(t).width}),e=s.textAlign,a=s.textBaseline;"left"==e?i+=Math.max.apply(null,l)/2:"right"==e&&(i-=Math.max.apply(null,l)/2),"bottom"==a||"alphabetic"==a||"ideographic"==a?o-=l[0]/2:"top"!=a&&"hanging"!=a||(o+=l[0]/2),s.textAlign="center",s.textBaseline="middle",t.forEach(function(t,e){if("#"==t)return o=62,void(i-=30);var a=l[e];t.charCodeAt(0)<=256?(s.translate(i,o),s.rotate(90*Math.PI/180),s.translate(-i,-o)):0<e&&n.charCodeAt(e-1)<256&&(o+=l[e-1]/2),s.fillText(t,i,o),s.setTransform(1,0,0,1,0,0);a=l[e];(o+=a)>=r.canvas.height-12&&(o=12,i-=30)}),s.textAlign=e,s.textBaseline=a};var i=document.getElementById("templateText").innerText;r.font="18px STKaiti, sans-serif",r.textAlign="center",r.textBaseline="top",r.fillStyle="#1D244F",r.fillTextVertical(i,r.canvas.width-60,0),r.beginPath(),r.font="18px bold STKaiti, sans-serif",r.fillTextVertical("逍遥游( 上)  · 庄子",r.canvas.width-32,0),$(".post-info,.post-title").css("display","none"),$(".post-content > ul").css("opacity",0),$(".post-info,.post-title,.post-content > ul").remove()});